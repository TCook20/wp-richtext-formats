{"version":3,"names":["createBlock","rawHandler","createListBlockFromDOMElement","listElement","_listElement$getAttri","listAttributes","ordered","tagName","anchor","id","undefined","start","getAttribute","parseInt","reversed","hasAttribute","type","innerBlocks","Array","from","children","map","listItem","childNodes","filter","node","nodeType","TEXT_NODE","textContent","trim","length","reverse","nestedList","nodes","hasNestedList","content","innerHTML","htmlNodes","outerHTML","childAttributes","join","childInnerBlocks","migrateToListV2","attributes","values","otherAttributes","list","document","createElement","setAttribute","listBlock","HTML"],"sources":["@wordpress/block-library/src/list/utils.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock, rawHandler } from '@wordpress/blocks';\n\nexport function createListBlockFromDOMElement( listElement ) {\n\tconst listAttributes = {\n\t\tordered: 'OL' === listElement.tagName,\n\t\tanchor: listElement.id === '' ? undefined : listElement.id,\n\t\tstart: listElement.getAttribute( 'start' )\n\t\t\t? parseInt( listElement.getAttribute( 'start' ), 10 )\n\t\t\t: undefined,\n\t\treversed: listElement.hasAttribute( 'reversed' ) ? true : undefined,\n\t\ttype: listElement.getAttribute( 'type' ) ?? undefined,\n\t};\n\n\tconst innerBlocks = Array.from( listElement.children ).map(\n\t\t( listItem ) => {\n\t\t\tconst children = Array.from( listItem.childNodes ).filter(\n\t\t\t\t( node ) =>\n\t\t\t\t\tnode.nodeType !== node.TEXT_NODE ||\n\t\t\t\t\tnode.textContent.trim().length !== 0\n\t\t\t);\n\t\t\tchildren.reverse();\n\t\t\tconst [ nestedList, ...nodes ] = children;\n\n\t\t\tconst hasNestedList =\n\t\t\t\tnestedList?.tagName === 'UL' || nestedList?.tagName === 'OL';\n\t\t\tif ( ! hasNestedList ) {\n\t\t\t\treturn createBlock( 'core/list-item', {\n\t\t\t\t\tcontent: listItem.innerHTML,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tconst htmlNodes = nodes.map( ( node ) => {\n\t\t\t\tif ( node.nodeType === node.TEXT_NODE ) {\n\t\t\t\t\treturn node.textContent;\n\t\t\t\t}\n\t\t\t\treturn node.outerHTML;\n\t\t\t} );\n\t\t\thtmlNodes.reverse();\n\t\t\tconst childAttributes = {\n\t\t\t\tcontent: htmlNodes.join( '' ).trim(),\n\t\t\t};\n\t\t\tconst childInnerBlocks = [\n\t\t\t\tcreateListBlockFromDOMElement( nestedList ),\n\t\t\t];\n\t\t\treturn createBlock(\n\t\t\t\t'core/list-item',\n\t\t\t\tchildAttributes,\n\t\t\t\tchildInnerBlocks\n\t\t\t);\n\t\t}\n\t);\n\n\treturn createBlock( 'core/list', listAttributes, innerBlocks );\n}\n\nexport function migrateToListV2( attributes ) {\n\tconst { values, start, reversed, ordered, type, ...otherAttributes } =\n\t\tattributes;\n\n\tconst list = document.createElement( ordered ? 'ol' : 'ul' );\n\tlist.innerHTML = values;\n\tif ( start ) {\n\t\tlist.setAttribute( 'start', start );\n\t}\n\tif ( reversed ) {\n\t\tlist.setAttribute( 'reversed', true );\n\t}\n\tif ( type ) {\n\t\tlist.setAttribute( 'type', type );\n\t}\n\n\tconst [ listBlock ] = rawHandler( { HTML: list.outerHTML } );\n\n\treturn [\n\t\t{ ...otherAttributes, ...listBlock.attributes },\n\t\tlistBlock.innerBlocks,\n\t];\n}\n"],"mappings":"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"}