{"version":3,"names":["useEntityBlockEditor","useEntityProp","useEntityRecord","Placeholder","Spinner","TextControl","PanelBody","__","useInnerBlocksProps","__experimentalRecursionProvider","RecursionProvider","__experimentalUseHasRecursion","useHasRecursion","InnerBlocks","InspectorControls","useBlockProps","Warning","ReusableBlockEdit","attributes","ref","hasAlreadyRendered","record","hasResolved","isMissing","blocks","onInput","onChange","id","title","setTitle","blockProps","className","innerBlocksProps","value","renderAppender","length","undefined","ButtonBlockAppender","createElement","uniqueId","__nextHasNoMarginBottom","label"],"sources":["@wordpress/block-library/src/block/edit.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tuseEntityBlockEditor,\n\tuseEntityProp,\n\tuseEntityRecord,\n} from '@wordpress/core-data';\nimport {\n\tPlaceholder,\n\tSpinner,\n\tTextControl,\n\tPanelBody,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tuseInnerBlocksProps,\n\t__experimentalRecursionProvider as RecursionProvider,\n\t__experimentalUseHasRecursion as useHasRecursion,\n\tInnerBlocks,\n\tInspectorControls,\n\tuseBlockProps,\n\tWarning,\n} from '@wordpress/block-editor';\n\nexport default function ReusableBlockEdit( { attributes: { ref } } ) {\n\tconst hasAlreadyRendered = useHasRecursion( ref );\n\tconst { record, hasResolved } = useEntityRecord(\n\t\t'postType',\n\t\t'wp_block',\n\t\tref\n\t);\n\tconst isMissing = hasResolved && ! record;\n\n\tconst [ blocks, onInput, onChange ] = useEntityBlockEditor(\n\t\t'postType',\n\t\t'wp_block',\n\t\t{ id: ref }\n\t);\n\n\tconst [ title, setTitle ] = useEntityProp(\n\t\t'postType',\n\t\t'wp_block',\n\t\t'title',\n\t\tref\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: 'block-library-block__reusable-block-container',\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\n\t\tvalue: blocks,\n\t\tonInput,\n\t\tonChange,\n\t\trenderAppender: blocks?.length\n\t\t\t? undefined\n\t\t\t: InnerBlocks.ButtonBlockAppender,\n\t} );\n\n\tif ( hasAlreadyRendered ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<Warning>\n\t\t\t\t\t{ __( 'Block cannot be rendered inside itself.' ) }\n\t\t\t\t</Warning>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( isMissing ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<Warning>\n\t\t\t\t\t{ __( 'Block has been deleted or is unavailable.' ) }\n\t\t\t\t</Warning>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( ! hasResolved ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<Placeholder>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</Placeholder>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<RecursionProvider uniqueId={ ref }>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ setTitle }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div { ...innerBlocksProps } />\n\t\t</RecursionProvider>\n\t);\n}\n"],"mappings":";AAAA;AACA;AACA;AACA,SACCA,oBAAoB,EACpBC,aAAa,EACbC,eAAe,QACT,sBAAsB;AAC7B,SACCC,WAAW,EACXC,OAAO,EACPC,WAAW,EACXC,SAAS,QACH,uBAAuB;AAC9B,SAASC,EAAE,QAAQ,iBAAiB;AACpC,SACCC,mBAAmB,EACnBC,+BAA+B,IAAIC,iBAAiB,EACpDC,6BAA6B,IAAIC,eAAe,EAChDC,WAAW,EACXC,iBAAiB,EACjBC,aAAa,EACbC,OAAO,QACD,yBAAyB;AAEhC,eAAe,SAASC,iBAAiBA,CAAE;EAAEC,UAAU,EAAE;IAAEC;EAAI;AAAE,CAAC,EAAG;EACpE,MAAMC,kBAAkB,GAAGR,eAAe,CAAEO,GAAI,CAAC;EACjD,MAAM;IAAEE,MAAM;IAAEC;EAAY,CAAC,GAAGpB,eAAe,CAC9C,UAAU,EACV,UAAU,EACViB,GACD,CAAC;EACD,MAAMI,SAAS,GAAGD,WAAW,IAAI,CAAED,MAAM;EAEzC,MAAM,CAAEG,MAAM,EAAEC,OAAO,EAAEC,QAAQ,CAAE,GAAG1B,oBAAoB,CACzD,UAAU,EACV,UAAU,EACV;IAAE2B,EAAE,EAAER;EAAI,CACX,CAAC;EAED,MAAM,CAAES,KAAK,EAAEC,QAAQ,CAAE,GAAG5B,aAAa,CACxC,UAAU,EACV,UAAU,EACV,OAAO,EACPkB,GACD,CAAC;EAED,MAAMW,UAAU,GAAGf,aAAa,CAAE;IACjCgB,SAAS,EAAE;EACZ,CAAE,CAAC;EAEH,MAAMC,gBAAgB,GAAGxB,mBAAmB,CAAEsB,UAAU,EAAE;IACzDG,KAAK,EAAET,MAAM;IACbC,OAAO;IACPC,QAAQ;IACRQ,cAAc,EAAEV,MAAM,EAAEW,MAAM,GAC3BC,SAAS,GACTvB,WAAW,CAACwB;EAChB,CAAE,CAAC;EAEH,IAAKjB,kBAAkB,EAAG;IACzB,OACCkB,aAAA;MAAA,GAAUR;IAAU,GACnBQ,aAAA,CAACtB,OAAO,QACLT,EAAE,CAAE,yCAA0C,CACxC,CACL,CAAC;EAER;EAEA,IAAKgB,SAAS,EAAG;IAChB,OACCe,aAAA;MAAA,GAAUR;IAAU,GACnBQ,aAAA,CAACtB,OAAO,QACLT,EAAE,CAAE,2CAA4C,CAC1C,CACL,CAAC;EAER;EAEA,IAAK,CAAEe,WAAW,EAAG;IACpB,OACCgB,aAAA;MAAA,GAAUR;IAAU,GACnBQ,aAAA,CAACnC,WAAW,QACXmC,aAAA,CAAClC,OAAO,MAAE,CACE,CACT,CAAC;EAER;EAEA,OACCkC,aAAA,CAAC5B,iBAAiB;IAAC6B,QAAQ,EAAGpB;EAAK,GAClCmB,aAAA,CAACxB,iBAAiB,QACjBwB,aAAA,CAAChC,SAAS,QACTgC,aAAA,CAACjC,WAAW;IACXmC,uBAAuB;IACvBC,KAAK,EAAGlC,EAAE,CAAE,MAAO,CAAG;IACtB0B,KAAK,EAAGL,KAAO;IACfF,QAAQ,EAAGG;EAAU,CACrB,CACS,CACO,CAAC,EACpBS,aAAA;IAAA,GAAUN;EAAgB,CAAI,CACZ,CAAC;AAEtB"}