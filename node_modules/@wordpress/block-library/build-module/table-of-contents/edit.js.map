{"version":3,"names":["fastDeepEqual","BlockControls","BlockIcon","InspectorControls","store","blockEditorStore","useBlockProps","createBlock","PanelBody","Placeholder","ToggleControl","ToolbarButton","ToolbarGroup","useDispatch","useSelect","__unstableStripHTML","stripHTML","renderToString","useEffect","__","addQueryArgs","removeQueryArgs","icon","TableOfContentsList","linearToNestedHeadingList","TableOfContentsEdit","attributes","headings","onlyIncludeCurrentPage","clientId","setAttributes","blockProps","canInsertList","select","getBlockRootClientId","canInsertBlockType","rootClientId","__unstableMarkNextChangeAsNotPersistent","replaceBlocks","latestHeadings","_editorSelectors$getP","getBlockAttributes","getBlockName","getClientIdsWithDescendants","__experimentalGetGlobalBlocksByName","getGlobalBlocksByName","editorSelectors","pageBreakClientIds","isPaginated","length","allBlockClientIds","tocPage","tocIndex","indexOf","blockIndex","blockClientId","entries","_latestHeadings","headingPage","permalink","getPermalink","headingPageLink","page","blockName","headingAttributes","canBeLinked","anchor","push","content","replace","level","link","headingTree","toolbarControls","createElement","onClick","ordered","values","nestedHeadingList","inspectorControls","title","__nextHasNoMarginBottom","label","checked","onChange","value","help","Fragment","instructions","inert"],"sources":["@wordpress/block-library/src/table-of-contents/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tBlockControls,\n\tBlockIcon,\n\tInspectorControls,\n\tstore as blockEditorStore,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tPanelBody,\n\tPlaceholder,\n\tToggleControl,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { renderToString, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs, removeQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport icon from './icon';\nimport TableOfContentsList from './list';\nimport { linearToNestedHeadingList } from './utils';\n\n/** @typedef {import('./utils').HeadingData} HeadingData */\n\n/**\n * Table of Contents block edit component.\n *\n * @param {Object}                       props                                   The props.\n * @param {Object}                       props.attributes                        The block attributes.\n * @param {HeadingData[]}                props.attributes.headings               A list of data for each heading in the post.\n * @param {boolean}                      props.attributes.onlyIncludeCurrentPage Whether to only include headings from the current page (if the post is paginated).\n * @param {string}                       props.clientId\n * @param {(attributes: Object) => void} props.setAttributes\n *\n * @return {WPComponent} The component.\n */\nexport default function TableOfContentsEdit( {\n\tattributes: { headings = [], onlyIncludeCurrentPage },\n\tclientId,\n\tsetAttributes,\n} ) {\n\tconst blockProps = useBlockProps();\n\n\tconst canInsertList = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockRootClientId, canInsertBlockType } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\treturn canInsertBlockType( 'core/list', rootClientId );\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst { __unstableMarkNextChangeAsNotPersistent, replaceBlocks } =\n\t\tuseDispatch( blockEditorStore );\n\n\t/**\n\t * The latest heading data, or null if the new data deeply equals the saved\n\t * headings attribute.\n\t *\n\t * Since useSelect forces a re-render when its return value is shallowly\n\t * inequal to its prior call, we would be re-rendering this block every time\n\t * the stores change, even if the latest headings were deeply equal to the\n\t * ones saved in the block attributes.\n\t *\n\t * By returning null when they're equal, we reduce that to 2 renders: one\n\t * when there are new latest headings (and so it returns them), and one when\n\t * they haven't changed (so it returns null). As long as the latest heading\n\t * data remains the same, further calls of the useSelect callback will\n\t * continue to return null, thus preventing any forced re-renders.\n\t */\n\tconst latestHeadings = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetClientIdsWithDescendants,\n\t\t\t\t__experimentalGetGlobalBlocksByName: getGlobalBlocksByName,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\t// FIXME: @wordpress/block-library should not depend on @wordpress/editor.\n\t\t\t// Blocks can be loaded into a *non-post* block editor, so to avoid\n\t\t\t// declaring @wordpress/editor as a dependency, we must access its\n\t\t\t// store by string. When the store is not available, editorSelectors\n\t\t\t// will be null, and the block's saved markup will lack permalinks.\n\t\t\t// eslint-disable-next-line @wordpress/data-no-store-string-literals\n\t\t\tconst editorSelectors = select( 'core/editor' );\n\n\t\t\tconst pageBreakClientIds = getGlobalBlocksByName( 'core/nextpage' );\n\n\t\t\tconst isPaginated = pageBreakClientIds.length !== 0;\n\n\t\t\t// Get the client ids of all blocks in the editor.\n\t\t\tconst allBlockClientIds = getClientIdsWithDescendants();\n\n\t\t\t// If onlyIncludeCurrentPage is true, calculate the page (of a paginated post) this block is part of, so we know which headings to include; otherwise, skip the calculation.\n\t\t\tlet tocPage = 1;\n\n\t\t\tif ( isPaginated && onlyIncludeCurrentPage ) {\n\t\t\t\t// We can't use getBlockIndex because it only returns the index\n\t\t\t\t// relative to sibling blocks.\n\t\t\t\tconst tocIndex = allBlockClientIds.indexOf( clientId );\n\n\t\t\t\tfor ( const [\n\t\t\t\t\tblockIndex,\n\t\t\t\t\tblockClientId,\n\t\t\t\t] of allBlockClientIds.entries() ) {\n\t\t\t\t\t// If we've reached blocks after the Table of Contents, we've\n\t\t\t\t\t// finished calculating which page the block is on.\n\t\t\t\t\tif ( blockIndex >= tocIndex ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif ( getBlockName( blockClientId ) === 'core/nextpage' ) {\n\t\t\t\t\t\ttocPage++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst _latestHeadings = [];\n\n\t\t\t/** The page (of a paginated post) a heading will be part of. */\n\t\t\tlet headingPage = 1;\n\n\t\t\t/**\n\t\t\t * A permalink to the current post. If the core/editor store is\n\t\t\t * unavailable, this variable will be null.\n\t\t\t */\n\t\t\tconst permalink = editorSelectors?.getPermalink() ?? null;\n\n\t\t\tlet headingPageLink = null;\n\n\t\t\t// If the core/editor store is available, we can add permalinks to the\n\t\t\t// generated table of contents.\n\t\t\tif ( typeof permalink === 'string' ) {\n\t\t\t\theadingPageLink = isPaginated\n\t\t\t\t\t? addQueryArgs( permalink, { page: headingPage } )\n\t\t\t\t\t: permalink;\n\t\t\t}\n\n\t\t\tfor ( const blockClientId of allBlockClientIds ) {\n\t\t\t\tconst blockName = getBlockName( blockClientId );\n\t\t\t\tif ( blockName === 'core/nextpage' ) {\n\t\t\t\t\theadingPage++;\n\n\t\t\t\t\t// If we're only including headings from the current page (of\n\t\t\t\t\t// a paginated post), then exit the loop if we've reached the\n\t\t\t\t\t// pages after the one with the Table of Contents block.\n\t\t\t\t\tif ( onlyIncludeCurrentPage && headingPage > tocPage ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( typeof permalink === 'string' ) {\n\t\t\t\t\t\theadingPageLink = addQueryArgs(\n\t\t\t\t\t\t\tremoveQueryArgs( permalink, [ 'page' ] ),\n\t\t\t\t\t\t\t{ page: headingPage }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If we're including all headings or we've reached headings on\n\t\t\t\t// the same page as the Table of Contents block, add them to the\n\t\t\t\t// list.\n\t\t\t\telse if (\n\t\t\t\t\t! onlyIncludeCurrentPage ||\n\t\t\t\t\theadingPage === tocPage\n\t\t\t\t) {\n\t\t\t\t\tif ( blockName === 'core/heading' ) {\n\t\t\t\t\t\tconst headingAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( blockClientId );\n\n\t\t\t\t\t\tconst canBeLinked =\n\t\t\t\t\t\t\ttypeof headingPageLink === 'string' &&\n\t\t\t\t\t\t\ttypeof headingAttributes.anchor === 'string' &&\n\t\t\t\t\t\t\theadingAttributes.anchor !== '';\n\n\t\t\t\t\t\t_latestHeadings.push( {\n\t\t\t\t\t\t\t// Convert line breaks to spaces, and get rid of HTML tags in the headings.\n\t\t\t\t\t\t\tcontent: stripHTML(\n\t\t\t\t\t\t\t\theadingAttributes.content.replace(\n\t\t\t\t\t\t\t\t\t/(<br *\\/?>)+/g,\n\t\t\t\t\t\t\t\t\t' '\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tlevel: headingAttributes.level,\n\t\t\t\t\t\t\tlink: canBeLinked\n\t\t\t\t\t\t\t\t? `${ headingPageLink }#${ headingAttributes.anchor }`\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( fastDeepEqual( headings, _latestHeadings ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn _latestHeadings;\n\t\t},\n\t\t[ clientId, onlyIncludeCurrentPage, headings ]\n\t);\n\n\tuseEffect( () => {\n\t\tif ( latestHeadings !== null ) {\n\t\t\t// This is required to keep undo working and not create 2 undo steps\n\t\t\t// for each heading change.\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tsetAttributes( { headings: latestHeadings } );\n\t\t}\n\t}, [ latestHeadings ] );\n\n\tconst headingTree = linearToNestedHeadingList( headings );\n\n\tconst toolbarControls = canInsertList && (\n\t\t<BlockControls>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\tcreateBlock( 'core/list', {\n\t\t\t\t\t\t\t\tordered: true,\n\t\t\t\t\t\t\t\tvalues: renderToString(\n\t\t\t\t\t\t\t\t\t<TableOfContentsList\n\t\t\t\t\t\t\t\t\t\tnestedHeadingList={ headingTree }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Convert to static list' ) }\n\t\t\t\t</ToolbarButton>\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n\n\tconst inspectorControls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Only include current page' ) }\n\t\t\t\t\tchecked={ onlyIncludeCurrentPage }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { onlyIncludeCurrentPage: value } )\n\t\t\t\t\t}\n\t\t\t\t\thelp={\n\t\t\t\t\t\tonlyIncludeCurrentPage\n\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t'Only including headings from the current page (if the post is paginated).'\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t'Toggle to only include headings from the current page (if the post is paginated).'\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\t// If there are no headings or the only heading is empty.\n\t// Note that the toolbar controls are intentionally omitted since the\n\t// \"Convert to static list\" option is useless to the placeholder state.\n\tif ( headings.length === 0 ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div { ...blockProps }>\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\t\tlabel={ __( 'Table of Contents' ) }\n\t\t\t\t\t\tinstructions={ __(\n\t\t\t\t\t\t\t'Start adding Heading blocks to create a table of contents. Headings with HTML anchors will be linked here.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{ inspectorControls }\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<nav { ...blockProps }>\n\t\t\t\t<ol inert=\"true\">\n\t\t\t\t\t<TableOfContentsList nestedHeadingList={ headingTree } />\n\t\t\t\t</ol>\n\t\t\t</nav>\n\t\t\t{ toolbarControls }\n\t\t\t{ inspectorControls }\n\t\t</>\n\t);\n}\n"],"mappings":"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"}