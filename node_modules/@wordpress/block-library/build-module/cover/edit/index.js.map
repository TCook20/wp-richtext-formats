{"version":3,"names":["classnames","extend","namesPlugin","useEntityProp","store","coreStore","useEffect","useMemo","useRef","Placeholder","Spinner","compose","useResizeObserver","withColors","ColorPalette","useBlockProps","useSetting","useInnerBlocksProps","__experimentalUseGradient","blockEditorStore","__","useSelect","useDispatch","isBlobURL","noticesStore","attributesFromMedia","IMAGE_BACKGROUND_TYPE","VIDEO_BACKGROUND_TYPE","dimRatioToClass","isContentPositionCenter","getPositionClassName","mediaPosition","getCoverIsDark","CoverInspectorControls","CoverBlockControls","CoverPlaceholder","ResizableCoverPopover","getInnerBlocksTemplate","attributes","align","placeholder","isTemporaryMedia","id","url","CoverEdit","clientId","isSelected","overlayColor","setAttributes","setOverlayColor","toggleSelection","context","postId","postType","contentPosition","useFeaturedImage","dimRatio","focalPoint","hasParallax","isDark","isRepeated","minHeight","minHeightUnit","alt","allowedBlocks","templateLock","tagName","TagName","featuredImage","__unstableMarkNextChangeAsNotPersistent","media","select","getMedia","mediaUrl","source_url","setIsDark","isDarkSetting","color","replaceAll","backgroundType","createErrorNotice","gradientClass","gradientValue","setMedia","onSelectMedia","newMedia","newUrl","type","undefined","onClearMedia","onSetOverlayColor","colorValue","onUpdateDimRatio","newDimRatio","isUploadingMedia","onUploadError","message","isImageBackground","isVideoBackground","resizeListener","height","width","resizableBoxDimensions","minHeightWithUnit","isImgElement","style","backgroundImage","backgroundPosition","bgStyle","backgroundColor","mediaStyle","objectPosition","hasBackground","hasInnerBlocks","getBlock","innerBlocks","length","ref","blockProps","hasFontSizes","innerBlocksTemplate","fontSize","innerBlocksProps","className","template","templateInsertUpdatesSelection","mediaElement","currentSettings","toggleUseFeaturedImage","blockControls","createElement","inspectorControls","coverRef","updateDimRatio","resizableCoverProps","onResizeStart","onResize","value","onResizeStop","newMinHeight","showHandle","size","Fragment","onError","disableCustomColors","onChange","clearable","classes","class","withIllustration","src","role","autoPlay","muted","loop","disableMediaButtons"],"sources":["@wordpress/block-library/src/cover/edit/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\n\n/**\n * WordPress dependencies\n */\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\nimport { useEffect, useMemo, useRef } from '@wordpress/element';\nimport { Placeholder, Spinner } from '@wordpress/components';\nimport { compose, useResizeObserver } from '@wordpress/compose';\nimport {\n\twithColors,\n\tColorPalette,\n\tuseBlockProps,\n\tuseSetting,\n\tuseInnerBlocksProps,\n\t__experimentalUseGradient,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isBlobURL } from '@wordpress/blob';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport {\n\tattributesFromMedia,\n\tIMAGE_BACKGROUND_TYPE,\n\tVIDEO_BACKGROUND_TYPE,\n\tdimRatioToClass,\n\tisContentPositionCenter,\n\tgetPositionClassName,\n\tmediaPosition,\n\tgetCoverIsDark,\n} from '../shared';\nimport CoverInspectorControls from './inspector-controls';\nimport CoverBlockControls from './block-controls';\nimport CoverPlaceholder from './cover-placeholder';\nimport ResizableCoverPopover from './resizable-cover-popover';\n\nextend( [ namesPlugin ] );\n\nfunction getInnerBlocksTemplate( attributes ) {\n\treturn [\n\t\t[\n\t\t\t'core/paragraph',\n\t\t\t{\n\t\t\t\talign: 'center',\n\t\t\t\tplaceholder: __( 'Write titleâ€¦' ),\n\t\t\t\t...attributes,\n\t\t\t},\n\t\t],\n\t];\n}\n\n/**\n * Is the URL a temporary blob URL? A blob URL is one that is used temporarily while\n * the media (image or video) is being uploaded and will not have an id allocated yet.\n *\n * @param {number} id  The id of the media.\n * @param {string} url The url of the media.\n *\n * @return {boolean} Is the URL a Blob URL.\n */\nconst isTemporaryMedia = ( id, url ) => ! id && isBlobURL( url );\n\nfunction CoverEdit( {\n\tattributes,\n\tclientId,\n\tisSelected,\n\toverlayColor,\n\tsetAttributes,\n\tsetOverlayColor,\n\ttoggleSelection,\n\tcontext: { postId, postType },\n} ) {\n\tconst {\n\t\tcontentPosition,\n\t\tid,\n\t\tuseFeaturedImage,\n\t\tdimRatio,\n\t\tfocalPoint,\n\t\thasParallax,\n\t\tisDark,\n\t\tisRepeated,\n\t\tminHeight,\n\t\tminHeightUnit,\n\t\talt,\n\t\tallowedBlocks,\n\t\ttemplateLock,\n\t\ttagName: TagName = 'div',\n\t} = attributes;\n\n\tconst [ featuredImage ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'featured_media',\n\t\tpostId\n\t);\n\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\tconst media = useSelect(\n\t\t( select ) =>\n\t\t\tfeaturedImage &&\n\t\t\tselect( coreStore ).getMedia( featuredImage, { context: 'view' } ),\n\t\t[ featuredImage ]\n\t);\n\tconst mediaUrl = media?.source_url;\n\n\tuseEffect( () => {\n\t\tasync function setIsDark() {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\t\tmediaUrl,\n\t\t\t\tdimRatio,\n\t\t\t\toverlayColor.color\n\t\t\t);\n\t\t\tsetAttributes( {\n\t\t\t\tisDark: isDarkSetting,\n\t\t\t} );\n\t\t}\n\t\tif ( useFeaturedImage ) {\n\t\t\tsetIsDark();\n\t\t}\n\t\t// We only ever want to run this effect if the mediaUrl changes.\n\t\t// All other changes to the isDark state are handled in the appropriate event handlers.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ mediaUrl ] );\n\n\t// instead of destructuring the attributes\n\t// we define the url and background type\n\t// depending on the value of the useFeaturedImage flag\n\t// to preview in edit the dynamic featured image\n\tconst url = useFeaturedImage\n\t\t? mediaUrl\n\t\t: // Ensure the url is not malformed due to sanitization through `wp_kses`.\n\t\t  attributes.url?.replaceAll( '&amp;', '&' );\n\tconst backgroundType = useFeaturedImage\n\t\t? IMAGE_BACKGROUND_TYPE\n\t\t: attributes.backgroundType;\n\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\tconst { gradientClass, gradientValue } = __experimentalUseGradient();\n\tconst setMedia = attributesFromMedia( setAttributes, dimRatio );\n\n\tconst onSelectMedia = async ( newMedia ) => {\n\t\t// Only pass the url to getCoverIsDark if the media is an image as video is not handled.\n\t\tconst newUrl = newMedia?.type === 'image' ? newMedia.url : undefined;\n\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\tnewUrl,\n\t\t\tdimRatio,\n\t\t\toverlayColor.color\n\t\t);\n\t\tsetMedia( newMedia, isDarkSetting );\n\t};\n\n\tconst onClearMedia = async () => {\n\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\tundefined,\n\t\t\tdimRatio,\n\t\t\toverlayColor.color\n\t\t);\n\t\tsetAttributes( {\n\t\t\turl: undefined,\n\t\t\tid: undefined,\n\t\t\tbackgroundType: undefined,\n\t\t\tfocalPoint: undefined,\n\t\t\thasParallax: undefined,\n\t\t\tisRepeated: undefined,\n\t\t\tuseFeaturedImage: false,\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst onSetOverlayColor = async ( colorValue ) => {\n\t\tconst isDarkSetting = await getCoverIsDark( url, dimRatio, colorValue );\n\t\tsetOverlayColor( colorValue );\n\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\tsetAttributes( {\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst onUpdateDimRatio = async ( newDimRatio ) => {\n\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\turl,\n\t\t\tnewDimRatio,\n\t\t\toverlayColor.color\n\t\t);\n\n\t\tsetAttributes( {\n\t\t\tdimRatio: newDimRatio,\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst isUploadingMedia = isTemporaryMedia( id, url );\n\n\tconst onUploadError = ( message ) => {\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t};\n\n\tconst isImageBackground = IMAGE_BACKGROUND_TYPE === backgroundType;\n\tconst isVideoBackground = VIDEO_BACKGROUND_TYPE === backgroundType;\n\n\tconst [ resizeListener, { height, width } ] = useResizeObserver();\n\tconst resizableBoxDimensions = useMemo( () => {\n\t\treturn {\n\t\t\theight: minHeightUnit === 'px' ? minHeight : 'auto',\n\t\t\twidth: 'auto',\n\t\t};\n\t}, [ minHeight, minHeightUnit ] );\n\n\tconst minHeightWithUnit =\n\t\tminHeight && minHeightUnit\n\t\t\t? `${ minHeight }${ minHeightUnit }`\n\t\t\t: minHeight;\n\n\tconst isImgElement = ! ( hasParallax || isRepeated );\n\n\tconst style = {\n\t\tminHeight: minHeightWithUnit || undefined,\n\t};\n\n\tconst backgroundImage = url ? `url(${ url })` : undefined;\n\n\tconst backgroundPosition = mediaPosition( focalPoint );\n\n\tconst bgStyle = { backgroundColor: overlayColor.color };\n\tconst mediaStyle = {\n\t\tobjectPosition:\n\t\t\tfocalPoint && isImgElement\n\t\t\t\t? mediaPosition( focalPoint )\n\t\t\t\t: undefined,\n\t};\n\n\tconst hasBackground = !! ( url || overlayColor.color || gradientValue );\n\n\tconst hasInnerBlocks = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getBlock( clientId ).innerBlocks.length >\n\t\t\t0,\n\t\t[ clientId ]\n\t);\n\n\tconst ref = useRef();\n\tconst blockProps = useBlockProps( { ref } );\n\n\t// Check for fontSize support before we pass a fontSize attribute to the innerBlocks.\n\tconst hasFontSizes = !! useSetting( 'typography.fontSizes' )?.length;\n\tconst innerBlocksTemplate = getInnerBlocksTemplate( {\n\t\tfontSize: hasFontSizes ? 'large' : undefined,\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-cover__inner-container',\n\t\t},\n\t\t{\n\t\t\t// Avoid template sync when the `templateLock` value is `all` or `contentOnly`.\n\t\t\t// See: https://github.com/WordPress/gutenberg/pull/45632\n\t\t\ttemplate: ! hasInnerBlocks ? innerBlocksTemplate : undefined,\n\t\t\ttemplateInsertUpdatesSelection: true,\n\t\t\tallowedBlocks,\n\t\t\ttemplateLock,\n\t\t}\n\t);\n\n\tconst mediaElement = useRef();\n\tconst currentSettings = {\n\t\tisVideoBackground,\n\t\tisImageBackground,\n\t\tmediaElement,\n\t\thasInnerBlocks,\n\t\turl,\n\t\tisImgElement,\n\t\toverlayColor,\n\t};\n\n\tconst toggleUseFeaturedImage = async () => {\n\t\tconst isDarkSetting = await ( useFeaturedImage\n\t\t\t? getCoverIsDark( undefined, dimRatio, overlayColor.color )\n\t\t\t: getCoverIsDark( mediaUrl, dimRatio, overlayColor.color ) );\n\t\tsetAttributes( {\n\t\t\tid: undefined,\n\t\t\turl: undefined,\n\t\t\tuseFeaturedImage: ! useFeaturedImage,\n\t\t\tdimRatio: dimRatio === 100 ? 50 : dimRatio,\n\t\t\tbackgroundType: useFeaturedImage\n\t\t\t\t? IMAGE_BACKGROUND_TYPE\n\t\t\t\t: undefined,\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst blockControls = (\n\t\t<CoverBlockControls\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\tcurrentSettings={ currentSettings }\n\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t/>\n\t);\n\n\tconst inspectorControls = (\n\t\t<CoverInspectorControls\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tclientId={ clientId }\n\t\t\tsetOverlayColor={ onSetOverlayColor }\n\t\t\tcoverRef={ ref }\n\t\t\tcurrentSettings={ currentSettings }\n\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\tupdateDimRatio={ onUpdateDimRatio }\n\t\t\tonClearMedia={ onClearMedia }\n\t\t/>\n\t);\n\n\tconst resizableCoverProps = {\n\t\tclassName: 'block-library-cover__resize-container',\n\t\tclientId,\n\t\theight,\n\t\tminHeight: minHeightWithUnit,\n\t\tonResizeStart: () => {\n\t\t\tsetAttributes( { minHeightUnit: 'px' } );\n\t\t\ttoggleSelection( false );\n\t\t},\n\t\tonResize: ( value ) => {\n\t\t\tsetAttributes( { minHeight: value } );\n\t\t},\n\t\tonResizeStop: ( newMinHeight ) => {\n\t\t\ttoggleSelection( true );\n\t\t\tsetAttributes( { minHeight: newMinHeight } );\n\t\t},\n\t\tshowHandle: true,\n\t\tsize: resizableBoxDimensions,\n\t\twidth,\n\t};\n\n\tif ( ! useFeaturedImage && ! hasInnerBlocks && ! hasBackground ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ blockControls }\n\t\t\t\t{ inspectorControls }\n\t\t\t\t{ isSelected && (\n\t\t\t\t\t<ResizableCoverPopover { ...resizableCoverProps } />\n\t\t\t\t) }\n\t\t\t\t<TagName\n\t\t\t\t\t{ ...blockProps }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'is-placeholder',\n\t\t\t\t\t\tblockProps.className\n\t\t\t\t\t) }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t...blockProps.style,\n\t\t\t\t\t\tminHeight: minHeightWithUnit || undefined,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ resizeListener }\n\t\t\t\t\t<CoverPlaceholder\n\t\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"wp-block-cover__placeholder-background-options\">\n\t\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\t\tdisableCustomColors={ true }\n\t\t\t\t\t\t\t\tvalue={ overlayColor.color }\n\t\t\t\t\t\t\t\tonChange={ onSetOverlayColor }\n\t\t\t\t\t\t\t\tclearable={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CoverPlaceholder>\n\t\t\t\t</TagName>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst classes = classnames(\n\t\t{\n\t\t\t'is-dark-theme': isDark,\n\t\t\t'is-light': ! isDark,\n\t\t\t'is-transient': isUploadingMedia,\n\t\t\t'has-parallax': hasParallax,\n\t\t\t'is-repeated': isRepeated,\n\t\t\t'has-custom-content-position':\n\t\t\t\t! isContentPositionCenter( contentPosition ),\n\t\t},\n\t\tgetPositionClassName( contentPosition )\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ blockControls }\n\t\t\t{ inspectorControls }\n\t\t\t<TagName\n\t\t\t\t{ ...blockProps }\n\t\t\t\tclassName={ classnames( classes, blockProps.className ) }\n\t\t\t\tstyle={ { ...style, ...blockProps.style } }\n\t\t\t\tdata-url={ url }\n\t\t\t>\n\t\t\t\t{ resizeListener }\n\t\t\t\t{ ( ! useFeaturedImage || url ) && (\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'wp-block-cover__background',\n\t\t\t\t\t\t\tdimRatioToClass( dimRatio ),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t[ overlayColor.class ]: overlayColor.class,\n\t\t\t\t\t\t\t\t'has-background-dim': dimRatio !== undefined,\n\t\t\t\t\t\t\t\t// For backwards compatibility. Former versions of the Cover Block applied\n\t\t\t\t\t\t\t\t// `.wp-block-cover__gradient-background` in the presence of\n\t\t\t\t\t\t\t\t// media, a gradient and a dim.\n\t\t\t\t\t\t\t\t'wp-block-cover__gradient-background':\n\t\t\t\t\t\t\t\t\turl && gradientValue && dimRatio !== 0,\n\t\t\t\t\t\t\t\t'has-background-gradient': gradientValue,\n\t\t\t\t\t\t\t\t[ gradientClass ]: gradientClass,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tstyle={ { backgroundImage: gradientValue, ...bgStyle } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ ! url && useFeaturedImage && (\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\tclassName=\"wp-block-cover__image--placeholder-image\"\n\t\t\t\t\t\twithIllustration={ true }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ url &&\n\t\t\t\t\tisImageBackground &&\n\t\t\t\t\t( isImgElement ? (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tref={ mediaElement }\n\t\t\t\t\t\t\tclassName=\"wp-block-cover__image-background\"\n\t\t\t\t\t\t\talt={ alt }\n\t\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\t\tstyle={ mediaStyle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={ mediaElement }\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\t'wp-block-cover__image-background'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tstyle={ { backgroundImage, backgroundPosition } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t{ url && isVideoBackground && (\n\t\t\t\t\t<video\n\t\t\t\t\t\tref={ mediaElement }\n\t\t\t\t\t\tclassName=\"wp-block-cover__video-background\"\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tloop\n\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\tstyle={ mediaStyle }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ isUploadingMedia && <Spinner /> }\n\t\t\t\t<CoverPlaceholder\n\t\t\t\t\tdisableMediaButtons\n\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t/>\n\t\t\t\t<div { ...innerBlocksProps } />\n\t\t\t</TagName>\n\t\t\t{ isSelected && (\n\t\t\t\t<ResizableCoverPopover { ...resizableCoverProps } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithColors( { overlayColor: 'background-color' } ),\n] )( CoverEdit );\n"],"mappings":"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"}