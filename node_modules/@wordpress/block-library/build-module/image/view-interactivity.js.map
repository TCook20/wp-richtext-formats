{"version":3,"names":["store","focusableSelectors","state","core","image","windowWidth","window","innerWidth","windowHeight","innerHeight","actions","showLightbox","context","event","imageLoaded","initialized","lastFocusedElement","document","activeElement","scrollDelta","lightboxEnabled","setStyles","documentElement","classList","add","hideLightbox","hideAnimationEnabled","lightboxAnimation","deltaY","type","Math","abs","scrollY","scrollTop","pageYOffset","scrollLeft","pageXOffset","onscroll","scrollTo","setTimeout","remove","focus","preventScroll","handleKeydown","key","keyCode","shiftKey","firstFocusableElement","preventDefault","lastFocusableElement","handleLoad","effects","ref","imageCurrentSrc","currentSrc","setButtonStyles","selectors","roleAttribute","lightboxObjectFit","enlargedImgSrc","imageUploadedSrc","setCurrentSrc","complete","initLightbox","figureRef","querySelector","imageRef","focusableElements","querySelectorAll","length","naturalWidth","naturalHeight","offsetWidth","offsetHeight","scaleAttr","naturalRatio","offsetRatio","imageButtonWidth","buttonHeight","imageButtonHeight","imageButtonTop","buttonWidth","imageButtonLeft","afterLoad","addEventListener","debounce","originalWidth","originalHeight","target","nextElementSibling","x","screenPosX","y","screenPosY","getBoundingClientRect","originalRatio","heightWithoutSpace","widthWithoutSpace","imgMaxWidth","parseFloat","targetWidth","imgMaxHeight","targetHeight","imgRatio","containerMaxWidth","containerMaxHeight","containerWidth","containerHeight","toFixed","reducedHeight","reducedWidth","horizontalPadding","verticalPadding","targetMaxWidth","min","targetMaxHeight","targetContainerRatio","containerScale","lightboxImgWidth","lightboxImgHeight","styleTag","getElementById","createElement","id","head","appendChild","innerHTML","func","wait","timeout","later","clearTimeout"],"sources":["@wordpress/block-library/src/image/view-interactivity.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store } from '@wordpress/interactivity';\n\nconst focusableSelectors = [\n\t'a[href]',\n\t'area[href]',\n\t'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\n\t'select:not([disabled]):not([aria-hidden])',\n\t'textarea:not([disabled]):not([aria-hidden])',\n\t'button:not([disabled]):not([aria-hidden])',\n\t'iframe',\n\t'object',\n\t'embed',\n\t'[contenteditable]',\n\t'[tabindex]:not([tabindex^=\"-\"])',\n];\n\nstore(\n\t{\n\t\tstate: {\n\t\t\tcore: {\n\t\t\t\timage: {\n\t\t\t\t\twindowWidth: window.innerWidth,\n\t\t\t\t\twindowHeight: window.innerHeight,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tactions: {\n\t\t\tcore: {\n\t\t\t\timage: {\n\t\t\t\t\tshowLightbox: ( { context, event } ) => {\n\t\t\t\t\t\t// We can't initialize the lightbox until the reference\n\t\t\t\t\t\t// image is loaded, otherwise the UX is broken.\n\t\t\t\t\t\tif ( ! context.core.image.imageLoaded ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontext.core.image.initialized = true;\n\t\t\t\t\t\tcontext.core.image.lastFocusedElement =\n\t\t\t\t\t\t\twindow.document.activeElement;\n\t\t\t\t\t\tcontext.core.image.scrollDelta = 0;\n\n\t\t\t\t\t\tcontext.core.image.lightboxEnabled = true;\n\t\t\t\t\t\tsetStyles( context, event );\n\t\t\t\t\t\t// Hide overflow only when the animation is in progress,\n\t\t\t\t\t\t// otherwise the removal of the scrollbars will draw attention\n\t\t\t\t\t\t// to itself and look like an error\n\t\t\t\t\t\tdocument.documentElement.classList.add(\n\t\t\t\t\t\t\t'wp-has-lightbox-open'\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\thideLightbox: async ( { context, event } ) => {\n\t\t\t\t\t\tcontext.core.image.hideAnimationEnabled = true;\n\t\t\t\t\t\tif ( context.core.image.lightboxEnabled ) {\n\t\t\t\t\t\t\t// If scrolling, wait a moment before closing the lightbox.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcontext.core.image.lightboxAnimation === 'fade'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcontext.core.image.scrollDelta += event.deltaY;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tevent.type === 'mousewheel' &&\n\t\t\t\t\t\t\t\t\tMath.abs(\n\t\t\t\t\t\t\t\t\t\twindow.scrollY -\n\t\t\t\t\t\t\t\t\t\t\tcontext.core.image.scrollDelta\n\t\t\t\t\t\t\t\t\t) < 10\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tcontext.core.image.lightboxAnimation === 'zoom'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// Disable scroll until the zoom animation ends.\n\t\t\t\t\t\t\t\t// Get the current page scroll position\n\t\t\t\t\t\t\t\tconst scrollTop =\n\t\t\t\t\t\t\t\t\twindow.pageYOffset ||\n\t\t\t\t\t\t\t\t\tdocument.documentElement.scrollTop;\n\t\t\t\t\t\t\t\tconst scrollLeft =\n\t\t\t\t\t\t\t\t\twindow.pageXOffset ||\n\t\t\t\t\t\t\t\t\tdocument.documentElement.scrollLeft;\n\t\t\t\t\t\t\t\t// if any scroll is attempted, set this to the previous value.\n\t\t\t\t\t\t\t\twindow.onscroll = function () {\n\t\t\t\t\t\t\t\t\twindow.scrollTo( scrollLeft, scrollTop );\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t// Enable scrolling after the animation finishes\n\t\t\t\t\t\t\t\tsetTimeout( function () {\n\t\t\t\t\t\t\t\t\twindow.onscroll = function () {};\n\t\t\t\t\t\t\t\t}, 400 );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdocument.documentElement.classList.remove(\n\t\t\t\t\t\t\t\t'wp-has-lightbox-open'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tcontext.core.image.lightboxEnabled = false;\n\t\t\t\t\t\t\tcontext.core.image.lastFocusedElement.focus( {\n\t\t\t\t\t\t\t\tpreventScroll: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\thandleKeydown: ( { context, actions, event } ) => {\n\t\t\t\t\t\tif ( context.core.image.lightboxEnabled ) {\n\t\t\t\t\t\t\tif ( event.key === 'Tab' || event.keyCode === 9 ) {\n\t\t\t\t\t\t\t\t// If shift + tab it change the direction\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tevent.shiftKey &&\n\t\t\t\t\t\t\t\t\twindow.document.activeElement ===\n\t\t\t\t\t\t\t\t\t\tcontext.core.image.firstFocusableElement\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\tcontext.core.image.lastFocusableElement.focus();\n\t\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t\t! event.shiftKey &&\n\t\t\t\t\t\t\t\t\twindow.document.activeElement ===\n\t\t\t\t\t\t\t\t\t\tcontext.core.image.lastFocusableElement\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\tcontext.core.image.firstFocusableElement.focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tevent.key === 'Escape' ||\n\t\t\t\t\t\t\t\tevent.keyCode === 27\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tactions.core.image.hideLightbox( {\n\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\thandleLoad: ( { state, context, effects, ref } ) => {\n\t\t\t\t\t\tcontext.core.image.imageLoaded = true;\n\t\t\t\t\t\tcontext.core.image.imageCurrentSrc = ref.currentSrc;\n\t\t\t\t\t\teffects.core.image.setButtonStyles( {\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tref,\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tselectors: {\n\t\t\tcore: {\n\t\t\t\timage: {\n\t\t\t\t\troleAttribute: ( { context } ) => {\n\t\t\t\t\t\treturn context.core.image.lightboxEnabled\n\t\t\t\t\t\t\t? 'dialog'\n\t\t\t\t\t\t\t: '';\n\t\t\t\t\t},\n\t\t\t\t\tlightboxObjectFit: ( { context } ) => {\n\t\t\t\t\t\tif ( context.core.image.initialized ) {\n\t\t\t\t\t\t\treturn 'cover';\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tenlargedImgSrc: ( { context } ) => {\n\t\t\t\t\t\treturn context.core.image.initialized\n\t\t\t\t\t\t\t? context.core.image.imageUploadedSrc\n\t\t\t\t\t\t\t: '';\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\teffects: {\n\t\t\tcore: {\n\t\t\t\timage: {\n\t\t\t\t\tsetCurrentSrc: ( { context, ref } ) => {\n\t\t\t\t\t\tif ( ref.complete ) {\n\t\t\t\t\t\t\tcontext.core.image.imageLoaded = true;\n\t\t\t\t\t\t\tcontext.core.image.imageCurrentSrc = ref.currentSrc;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tinitLightbox: async ( { context, ref } ) => {\n\t\t\t\t\t\tcontext.core.image.figureRef =\n\t\t\t\t\t\t\tref.querySelector( 'figure' );\n\t\t\t\t\t\tcontext.core.image.imageRef =\n\t\t\t\t\t\t\tref.querySelector( 'img' );\n\t\t\t\t\t\tif ( context.core.image.lightboxEnabled ) {\n\t\t\t\t\t\t\tconst focusableElements =\n\t\t\t\t\t\t\t\tref.querySelectorAll( focusableSelectors );\n\t\t\t\t\t\t\tcontext.core.image.firstFocusableElement =\n\t\t\t\t\t\t\t\tfocusableElements[ 0 ];\n\t\t\t\t\t\t\tcontext.core.image.lastFocusableElement =\n\t\t\t\t\t\t\t\tfocusableElements[\n\t\t\t\t\t\t\t\t\tfocusableElements.length - 1\n\t\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tref.querySelector( '.close-button' ).focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsetButtonStyles: ( { state, context, ref } ) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tnaturalWidth,\n\t\t\t\t\t\t\tnaturalHeight,\n\t\t\t\t\t\t\toffsetWidth,\n\t\t\t\t\t\t\toffsetHeight,\n\t\t\t\t\t\t} = ref;\n\n\t\t\t\t\t\t// If the image isn't loaded yet, we can't\n\t\t\t\t\t\t// calculate how big the button should be.\n\t\t\t\t\t\tif ( naturalWidth === 0 || naturalHeight === 0 ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Subscribe to the window dimensions so we can\n\t\t\t\t\t\t// recalculate the styles if the window is resized.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t( state.core.image.windowWidth ||\n\t\t\t\t\t\t\t\tstate.core.image.windowHeight ) &&\n\t\t\t\t\t\t\tcontext.core.image.scaleAttr === 'contain'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// In the case of an image with object-fit: contain, the\n\t\t\t\t\t\t\t// size of the img element can be larger than the image itself,\n\t\t\t\t\t\t\t// so we need to calculate the size of the button to match.\n\n\t\t\t\t\t\t\t// Natural ratio of the image.\n\t\t\t\t\t\t\tconst naturalRatio = naturalWidth / naturalHeight;\n\t\t\t\t\t\t\t// Offset ratio of the image.\n\t\t\t\t\t\t\tconst offsetRatio = offsetWidth / offsetHeight;\n\n\t\t\t\t\t\t\tif ( naturalRatio > offsetRatio ) {\n\t\t\t\t\t\t\t\t// If it reaches the width first, keep\n\t\t\t\t\t\t\t\t// the width and recalculate the height.\n\t\t\t\t\t\t\t\tcontext.core.image.imageButtonWidth =\n\t\t\t\t\t\t\t\t\toffsetWidth;\n\t\t\t\t\t\t\t\tconst buttonHeight = offsetWidth / naturalRatio;\n\t\t\t\t\t\t\t\tcontext.core.image.imageButtonHeight =\n\t\t\t\t\t\t\t\t\tbuttonHeight;\n\t\t\t\t\t\t\t\tcontext.core.image.imageButtonTop =\n\t\t\t\t\t\t\t\t\t( offsetHeight - buttonHeight ) / 2;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// If it reaches the height first, keep\n\t\t\t\t\t\t\t\t// the height and recalculate the width.\n\t\t\t\t\t\t\t\tcontext.core.image.imageButtonHeight =\n\t\t\t\t\t\t\t\t\toffsetHeight;\n\t\t\t\t\t\t\t\tconst buttonWidth = offsetHeight * naturalRatio;\n\t\t\t\t\t\t\t\tcontext.core.image.imageButtonWidth =\n\t\t\t\t\t\t\t\t\tbuttonWidth;\n\t\t\t\t\t\t\t\tcontext.core.image.imageButtonLeft =\n\t\t\t\t\t\t\t\t\t( offsetWidth - buttonWidth ) / 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// In all other cases, we can trust that the size of\n\t\t\t\t\t\t\t// the image is the right size for the button as well.\n\n\t\t\t\t\t\t\tcontext.core.image.imageButtonWidth = offsetWidth;\n\t\t\t\t\t\t\tcontext.core.image.imageButtonHeight = offsetHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\tafterLoad: ( { state } ) => {\n\t\t\twindow.addEventListener(\n\t\t\t\t'resize',\n\t\t\t\tdebounce( () => {\n\t\t\t\t\tstate.core.image.windowWidth = window.innerWidth;\n\t\t\t\t\tstate.core.image.windowHeight = window.innerHeight;\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t}\n);\n\nfunction setStyles( context, event ) {\n\t// The reference img element lies adjacent\n\t// to the event target button in the DOM.\n\tlet {\n\t\tnaturalWidth,\n\t\tnaturalHeight,\n\t\toffsetWidth: originalWidth,\n\t\toffsetHeight: originalHeight,\n\t} = event.target.nextElementSibling;\n\tlet { x: screenPosX, y: screenPosY } =\n\t\tevent.target.nextElementSibling.getBoundingClientRect();\n\n\t// Natural ratio of the image clicked to open the lightbox.\n\tconst naturalRatio = naturalWidth / naturalHeight;\n\t// Original ratio of the image clicked to open the lightbox.\n\tlet originalRatio = originalWidth / originalHeight;\n\n\t// If it has object-fit: contain, recalculate the original sizes\n\t// and the screen position without the blank spaces.\n\tif ( context.core.image.scaleAttr === 'contain' ) {\n\t\tif ( naturalRatio > originalRatio ) {\n\t\t\tconst heightWithoutSpace = originalWidth / naturalRatio;\n\t\t\t// Recalculate screen position without the top space.\n\t\t\tscreenPosY += ( originalHeight - heightWithoutSpace ) / 2;\n\t\t\toriginalHeight = heightWithoutSpace;\n\t\t} else {\n\t\t\tconst widthWithoutSpace = originalHeight * naturalRatio;\n\t\t\t// Recalculate screen position without the left space.\n\t\t\tscreenPosX += ( originalWidth - widthWithoutSpace ) / 2;\n\t\t\toriginalWidth = widthWithoutSpace;\n\t\t}\n\t}\n\toriginalRatio = originalWidth / originalHeight;\n\n\t// Typically, we use the image's full-sized dimensions. If those\n\t// dimensions have not been set (i.e. an external image with only one size),\n\t// the image's dimensions in the lightbox are the same\n\t// as those of the image in the content.\n\tlet imgMaxWidth = parseFloat(\n\t\tcontext.core.image.targetWidth !== 'none'\n\t\t\t? context.core.image.targetWidth\n\t\t\t: naturalWidth\n\t);\n\tlet imgMaxHeight = parseFloat(\n\t\tcontext.core.image.targetHeight !== 'none'\n\t\t\t? context.core.image.targetHeight\n\t\t\t: naturalHeight\n\t);\n\n\t// Ratio of the biggest image stored in the database.\n\tlet imgRatio = imgMaxWidth / imgMaxHeight;\n\tlet containerMaxWidth = imgMaxWidth;\n\tlet containerMaxHeight = imgMaxHeight;\n\tlet containerWidth = imgMaxWidth;\n\tlet containerHeight = imgMaxHeight;\n\t// Check if the target image has a different ratio than the original one (thumbnail).\n\t// Recalculate the width and height.\n\tif ( naturalRatio.toFixed( 2 ) !== imgRatio.toFixed( 2 ) ) {\n\t\tif ( naturalRatio > imgRatio ) {\n\t\t\t// If the width is reached before the height, we keep the maxWidth\n\t\t\t// and recalculate the height.\n\t\t\t// Unless the difference between the maxHeight and the reducedHeight\n\t\t\t// is higher than the maxWidth, where we keep the reducedHeight and\n\t\t\t// recalculate the width.\n\t\t\tconst reducedHeight = imgMaxWidth / naturalRatio;\n\t\t\tif ( imgMaxHeight - reducedHeight > imgMaxWidth ) {\n\t\t\t\timgMaxHeight = reducedHeight;\n\t\t\t\timgMaxWidth = reducedHeight * naturalRatio;\n\t\t\t} else {\n\t\t\t\timgMaxHeight = imgMaxWidth / naturalRatio;\n\t\t\t}\n\t\t} else {\n\t\t\t// If the height is reached before the width, we keep the maxHeight\n\t\t\t// and recalculate the width.\n\t\t\t// Unless the difference between the maxWidth and the reducedWidth\n\t\t\t// is higher than the maxHeight, where we keep the reducedWidth and\n\t\t\t// recalculate the height.\n\t\t\tconst reducedWidth = imgMaxHeight * naturalRatio;\n\t\t\tif ( imgMaxWidth - reducedWidth > imgMaxHeight ) {\n\t\t\t\timgMaxWidth = reducedWidth;\n\t\t\t\timgMaxHeight = reducedWidth / naturalRatio;\n\t\t\t} else {\n\t\t\t\timgMaxWidth = imgMaxHeight * naturalRatio;\n\t\t\t}\n\t\t}\n\t\tcontainerWidth = imgMaxWidth;\n\t\tcontainerHeight = imgMaxHeight;\n\t\timgRatio = imgMaxWidth / imgMaxHeight;\n\n\t\t// Calculate the max size of the container.\n\t\tif ( originalRatio > imgRatio ) {\n\t\t\tcontainerMaxWidth = imgMaxWidth;\n\t\t\tcontainerMaxHeight = containerMaxWidth / originalRatio;\n\t\t} else {\n\t\t\tcontainerMaxHeight = imgMaxHeight;\n\t\t\tcontainerMaxWidth = containerMaxHeight * originalRatio;\n\t\t}\n\t}\n\n\t// If the image has been pixelated on purpose, keep that size.\n\tif ( originalWidth > containerWidth || originalHeight > containerHeight ) {\n\t\tcontainerWidth = originalWidth;\n\t\tcontainerHeight = originalHeight;\n\t}\n\n\t// Calculate the final lightbox image size and the\n\t// scale factor. MaxWidth is either the window container\n\t// (accounting for padding) or the image resolution.\n\tlet horizontalPadding = 0;\n\tif ( window.innerWidth > 480 ) {\n\t\thorizontalPadding = 80;\n\t} else if ( window.innerWidth > 1920 ) {\n\t\thorizontalPadding = 160;\n\t}\n\tconst verticalPadding = 80;\n\n\tconst targetMaxWidth = Math.min(\n\t\twindow.innerWidth - horizontalPadding,\n\t\tcontainerWidth\n\t);\n\tconst targetMaxHeight = Math.min(\n\t\twindow.innerHeight - verticalPadding,\n\t\tcontainerHeight\n\t);\n\tconst targetContainerRatio = targetMaxWidth / targetMaxHeight;\n\n\tif ( originalRatio > targetContainerRatio ) {\n\t\t// If targetMaxWidth is reached before targetMaxHeight\n\t\tcontainerWidth = targetMaxWidth;\n\t\tcontainerHeight = containerWidth / originalRatio;\n\t} else {\n\t\t// If targetMaxHeight is reached before targetMaxWidth\n\t\tcontainerHeight = targetMaxHeight;\n\t\tcontainerWidth = containerHeight * originalRatio;\n\t}\n\n\tconst containerScale = originalWidth / containerWidth;\n\tconst lightboxImgWidth =\n\t\timgMaxWidth * ( containerWidth / containerMaxWidth );\n\tconst lightboxImgHeight =\n\t\timgMaxHeight * ( containerHeight / containerMaxHeight );\n\n\t// Add the CSS variables needed.\n\tlet styleTag = document.getElementById( 'wp-lightbox-styles' );\n\tif ( ! styleTag ) {\n\t\tstyleTag = document.createElement( 'style' );\n\t\tstyleTag.id = 'wp-lightbox-styles';\n\t\tdocument.head.appendChild( styleTag );\n\t}\n\n\t// As of this writing, using the calculations above will render the lightbox\n\t// with a small, erroneous whitespace on the left side of the image in iOS Safari,\n\t// perhaps due to an inconsistency in how browsers handle absolute positioning and CSS\n\t// transformation. In any case, adding 1 pixel to the container width and height solves\n\t// the problem, though this can be removed if the issue is fixed in the future.\n\tstyleTag.innerHTML = `\n\t\t:root {\n\t\t\t--wp--lightbox-initial-top-position: ${ screenPosY }px;\n\t\t\t--wp--lightbox-initial-left-position: ${ screenPosX }px;\n\t\t\t--wp--lightbox-container-width: ${ containerWidth + 1 }px;\n\t\t\t--wp--lightbox-container-height: ${ containerHeight + 1 }px;\n\t\t\t--wp--lightbox-image-width: ${ lightboxImgWidth }px;\n\t\t\t--wp--lightbox-image-height: ${ lightboxImgHeight }px;\n\t\t\t--wp--lightbox-scale: ${ containerScale };\n\t\t}\n\t`;\n}\n\nfunction debounce( func, wait = 50 ) {\n\tlet timeout;\n\treturn () => {\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tfunc();\n\t\t};\n\t\tclearTimeout( timeout );\n\t\ttimeout = setTimeout( later, wait );\n\t};\n}\n"],"mappings":"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"}