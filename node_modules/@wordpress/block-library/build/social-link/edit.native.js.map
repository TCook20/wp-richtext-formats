{"version":3,"names":["_element","require","_reactNative","_blockEditor","_components","_compose","_i18n","_icons","_data","_socialList","_editor","_interopRequireDefault","DEFAULT_ACTIVE_ICON_STYLES","backgroundColor","color","DEFAULT_INACTIVE_ICON_STYLES","ANIMATION_DELAY","ANIMATION_DURATION","linkSettingsOptions","url","label","__","placeholder","autoFocus","linkLabel","footer","SocialLinkEdit","attributes","setAttributes","isSelected","onFocus","name","service","isLinkSheetVisible","setIsLinkSheetVisible","useState","hasUrl","setHasUrl","activeIcon","styles","inactiveIcon","usePreferredColorSchemeStyle","inactiveIconDark","animatedValue","useRef","Animated","Value","current","IconComponent","getIconBySite","socialLinkName","getNameBySite","useEffect","setValue","animateColors","interpolationColors","interpolate","inputRange","outputRange","stroke","sequence","delay","timing","toValue","duration","easing","Easing","circle","useNativeDriver","start","onCloseSettingsSheet","useCallback","onOpenSettingsSheet","onEmptyURL","onIconPress","accessibilityHint","sprintf","createElement","View","Fragment","BlockControls","ToolbarGroup","ToolbarButton","title","icon","link","onClick","isActive","LinkSettingsNavigation","isVisible","rel","onClose","options","withBottomSheet","TouchableWithoutFeedback","onPress","accessibilityRole","accessibilityLabel","style","iconContainer","Icon","animated","_default","compose","withSelect","select","clientId","getBlock","blockEditorStore","block","substring","exports","default"],"sources":["@wordpress/block-library/src/social-link/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, Animated, Easing, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tBlockControls,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useEffect, useState, useRef, useCallback } from '@wordpress/element';\nimport {\n\tToolbarGroup,\n\tToolbarButton,\n\tLinkSettingsNavigation,\n} from '@wordpress/components';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { link, Icon } from '@wordpress/icons';\nimport { withSelect } from '@wordpress/data';\n/**\n * Internal dependencies\n */\nimport { getIconBySite, getNameBySite } from './social-list';\nimport styles from './editor.scss';\n\nconst DEFAULT_ACTIVE_ICON_STYLES = {\n\tbackgroundColor: '#f0f0f0',\n\tcolor: '#444',\n};\nconst DEFAULT_INACTIVE_ICON_STYLES = {\n\tbackgroundColor: '#0000003f',\n\tcolor: '#fff',\n};\nconst ANIMATION_DELAY = 300;\nconst ANIMATION_DURATION = 400;\n\nconst linkSettingsOptions = {\n\turl: {\n\t\tlabel: __( 'URL' ),\n\t\tplaceholder: __( 'Add URL' ),\n\t\tautoFocus: true,\n\t},\n\tlinkLabel: {\n\t\tlabel: __( 'Link label' ),\n\t\tplaceholder: __( 'None' ),\n\t},\n\tfooter: {\n\t\tlabel: __( 'Briefly describe the link to help screen reader user' ),\n\t},\n};\n\nconst SocialLinkEdit = ( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tonFocus,\n\tname,\n} ) => {\n\tconst { url, service = name } = attributes;\n\tconst [ isLinkSheetVisible, setIsLinkSheetVisible ] = useState( false );\n\tconst [ hasUrl, setHasUrl ] = useState( !! url );\n\tconst activeIcon =\n\t\tstyles[ `wp-social-link-${ service }` ] ||\n\t\tstyles[ `wp-social-link` ] ||\n\t\tDEFAULT_ACTIVE_ICON_STYLES;\n\tconst inactiveIcon =\n\t\tusePreferredColorSchemeStyle(\n\t\t\tstyles.inactiveIcon,\n\t\t\tstyles.inactiveIconDark\n\t\t) || DEFAULT_INACTIVE_ICON_STYLES;\n\n\tconst animatedValue = useRef( new Animated.Value( 0 ) ).current;\n\n\tconst IconComponent = getIconBySite( service )();\n\tconst socialLinkName = getNameBySite( service );\n\n\t// When new social icon is added link sheet is opened automatically.\n\tuseEffect( () => {\n\t\tif ( isSelected && ! url ) {\n\t\t\tsetIsLinkSheetVisible( true );\n\t\t}\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( ! url ) {\n\t\t\tsetHasUrl( false );\n\t\t\tanimatedValue.setValue( 0 );\n\t\t} else if ( url ) {\n\t\t\tanimateColors();\n\t\t}\n\t}, [ url ] );\n\n\tconst interpolationColors = {\n\t\tbackgroundColor: animatedValue.interpolate( {\n\t\t\tinputRange: [ 0, 1 ],\n\t\t\toutputRange: [\n\t\t\t\tinactiveIcon.backgroundColor,\n\t\t\t\tactiveIcon.backgroundColor,\n\t\t\t],\n\t\t} ),\n\t\tcolor: animatedValue.interpolate( {\n\t\t\tinputRange: [ 0, 1 ],\n\t\t\toutputRange: [ inactiveIcon.color, activeIcon.color ],\n\t\t} ),\n\t\tstroke: '',\n\t};\n\n\tconst { backgroundColor, color, stroke } = hasUrl\n\t\t? activeIcon\n\t\t: interpolationColors;\n\n\tfunction animateColors() {\n\t\tAnimated.sequence( [\n\t\t\tAnimated.delay( ANIMATION_DELAY ),\n\t\t\tAnimated.timing( animatedValue, {\n\t\t\t\ttoValue: 1,\n\t\t\t\tduration: ANIMATION_DURATION,\n\t\t\t\teasing: Easing.circle,\n\t\t\t\tuseNativeDriver: false,\n\t\t\t} ),\n\t\t] ).start( () => setHasUrl( true ) );\n\t}\n\n\tconst onCloseSettingsSheet = useCallback( () => {\n\t\tsetIsLinkSheetVisible( false );\n\t}, [] );\n\n\tconst onOpenSettingsSheet = useCallback( () => {\n\t\tsetIsLinkSheetVisible( true );\n\t}, [] );\n\n\tconst onEmptyURL = useCallback( () => {\n\t\tanimatedValue.setValue( 0 );\n\t\tsetHasUrl( false );\n\t}, [ animatedValue ] );\n\n\tfunction onIconPress() {\n\t\tif ( isSelected ) {\n\t\t\tsetIsLinkSheetVisible( true );\n\t\t} else {\n\t\t\tonFocus();\n\t\t}\n\t}\n\n\tconst accessibilityHint = url\n\t\t? sprintf(\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t__( '%s has URL set' ),\n\t\t\t\tsocialLinkName\n\t\t  )\n\t\t: sprintf(\n\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t__( '%s has no URL set' ),\n\t\t\t\tsocialLinkName\n\t\t  );\n\n\treturn (\n\t\t<View>\n\t\t\t{ isSelected && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\ttitle={ sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t\t\t\t\t\t__( 'Add link to %s' ),\n\t\t\t\t\t\t\t\t\tsocialLinkName\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\t\t\tonClick={ onOpenSettingsSheet }\n\t\t\t\t\t\t\t\tisActive={ url }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t\t<LinkSettingsNavigation\n\t\t\t\t\t\tisVisible={ isLinkSheetVisible }\n\t\t\t\t\t\turl={ attributes.url }\n\t\t\t\t\t\tlabel={ attributes.label }\n\t\t\t\t\t\trel={ attributes.rel }\n\t\t\t\t\t\tonEmptyURL={ onEmptyURL }\n\t\t\t\t\t\tonClose={ onCloseSettingsSheet }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\toptions={ linkSettingsOptions }\n\t\t\t\t\t\twithBottomSheet\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ onIconPress }\n\t\t\t\taccessibilityRole={ 'button' }\n\t\t\t\taccessibilityLabel={ sprintf(\n\t\t\t\t\t// translators: %s: social link name e.g: \"Instagram\".\n\t\t\t\t\t__( '%s social icon' ),\n\t\t\t\t\tsocialLinkName\n\t\t\t\t) }\n\t\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\t>\n\t\t\t\t<Animated.View\n\t\t\t\t\tstyle={ [ styles.iconContainer, { backgroundColor } ] }\n\t\t\t\t>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tanimated\n\t\t\t\t\t\ticon={ IconComponent }\n\t\t\t\t\t\tstyle={ { stroke, color } }\n\t\t\t\t\t/>\n\t\t\t\t</Animated.View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t</View>\n\t);\n};\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst name = block?.name.substring( 17 );\n\n\t\treturn {\n\t\t\tname,\n\t\t};\n\t} ),\n] )( SocialLinkEdit );\n"],"mappings":"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"}