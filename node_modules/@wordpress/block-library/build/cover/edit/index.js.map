{"version":3,"names":["_element","require","_classnames","_interopRequireDefault","_colord","_names","_coreData","_components","_compose","_blockEditor","_i18n","_data","_blob","_notices","_shared","_inspectorControls","_blockControls","_coverPlaceholder","_resizableCoverPopover","extend","namesPlugin","getInnerBlocksTemplate","attributes","align","placeholder","__","isTemporaryMedia","id","url","isBlobURL","CoverEdit","clientId","isSelected","overlayColor","setAttributes","setOverlayColor","toggleSelection","context","postId","postType","contentPosition","useFeaturedImage","dimRatio","focalPoint","hasParallax","isDark","isRepeated","minHeight","minHeightUnit","alt","allowedBlocks","templateLock","tagName","TagName","featuredImage","useEntityProp","__unstableMarkNextChangeAsNotPersistent","useDispatch","blockEditorStore","media","useSelect","select","coreStore","getMedia","mediaUrl","source_url","useEffect","setIsDark","isDarkSetting","getCoverIsDark","color","replaceAll","backgroundType","IMAGE_BACKGROUND_TYPE","createErrorNotice","noticesStore","gradientClass","gradientValue","__experimentalUseGradient","setMedia","attributesFromMedia","onSelectMedia","newMedia","newUrl","type","undefined","onClearMedia","onSetOverlayColor","colorValue","onUpdateDimRatio","newDimRatio","isUploadingMedia","onUploadError","message","isImageBackground","isVideoBackground","VIDEO_BACKGROUND_TYPE","resizeListener","height","width","useResizeObserver","resizableBoxDimensions","useMemo","minHeightWithUnit","isImgElement","style","backgroundImage","backgroundPosition","mediaPosition","bgStyle","backgroundColor","mediaStyle","objectPosition","hasBackground","hasInnerBlocks","getBlock","innerBlocks","length","ref","useRef","blockProps","useBlockProps","hasFontSizes","useSetting","innerBlocksTemplate","fontSize","innerBlocksProps","useInnerBlocksProps","className","template","templateInsertUpdatesSelection","mediaElement","currentSettings","toggleUseFeaturedImage","blockControls","createElement","default","inspectorControls","coverRef","updateDimRatio","resizableCoverProps","onResizeStart","onResize","value","onResizeStop","newMinHeight","showHandle","size","Fragment","classnames","onError","ColorPalette","disableCustomColors","onChange","clearable","classes","isContentPositionCenter","getPositionClassName","dimRatioToClass","class","Placeholder","withIllustration","src","role","autoPlay","muted","loop","Spinner","disableMediaButtons","_default","compose","withColors","exports"],"sources":["@wordpress/block-library/src/cover/edit/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\n\n/**\n * WordPress dependencies\n */\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\nimport { useEffect, useMemo, useRef } from '@wordpress/element';\nimport { Placeholder, Spinner } from '@wordpress/components';\nimport { compose, useResizeObserver } from '@wordpress/compose';\nimport {\n\twithColors,\n\tColorPalette,\n\tuseBlockProps,\n\tuseSetting,\n\tuseInnerBlocksProps,\n\t__experimentalUseGradient,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isBlobURL } from '@wordpress/blob';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport {\n\tattributesFromMedia,\n\tIMAGE_BACKGROUND_TYPE,\n\tVIDEO_BACKGROUND_TYPE,\n\tdimRatioToClass,\n\tisContentPositionCenter,\n\tgetPositionClassName,\n\tmediaPosition,\n\tgetCoverIsDark,\n} from '../shared';\nimport CoverInspectorControls from './inspector-controls';\nimport CoverBlockControls from './block-controls';\nimport CoverPlaceholder from './cover-placeholder';\nimport ResizableCoverPopover from './resizable-cover-popover';\n\nextend( [ namesPlugin ] );\n\nfunction getInnerBlocksTemplate( attributes ) {\n\treturn [\n\t\t[\n\t\t\t'core/paragraph',\n\t\t\t{\n\t\t\t\talign: 'center',\n\t\t\t\tplaceholder: __( 'Write titleâ€¦' ),\n\t\t\t\t...attributes,\n\t\t\t},\n\t\t],\n\t];\n}\n\n/**\n * Is the URL a temporary blob URL? A blob URL is one that is used temporarily while\n * the media (image or video) is being uploaded and will not have an id allocated yet.\n *\n * @param {number} id  The id of the media.\n * @param {string} url The url of the media.\n *\n * @return {boolean} Is the URL a Blob URL.\n */\nconst isTemporaryMedia = ( id, url ) => ! id && isBlobURL( url );\n\nfunction CoverEdit( {\n\tattributes,\n\tclientId,\n\tisSelected,\n\toverlayColor,\n\tsetAttributes,\n\tsetOverlayColor,\n\ttoggleSelection,\n\tcontext: { postId, postType },\n} ) {\n\tconst {\n\t\tcontentPosition,\n\t\tid,\n\t\tuseFeaturedImage,\n\t\tdimRatio,\n\t\tfocalPoint,\n\t\thasParallax,\n\t\tisDark,\n\t\tisRepeated,\n\t\tminHeight,\n\t\tminHeightUnit,\n\t\talt,\n\t\tallowedBlocks,\n\t\ttemplateLock,\n\t\ttagName: TagName = 'div',\n\t} = attributes;\n\n\tconst [ featuredImage ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'featured_media',\n\t\tpostId\n\t);\n\n\tconst { __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\tconst media = useSelect(\n\t\t( select ) =>\n\t\t\tfeaturedImage &&\n\t\t\tselect( coreStore ).getMedia( featuredImage, { context: 'view' } ),\n\t\t[ featuredImage ]\n\t);\n\tconst mediaUrl = media?.source_url;\n\n\tuseEffect( () => {\n\t\tasync function setIsDark() {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\t\tmediaUrl,\n\t\t\t\tdimRatio,\n\t\t\t\toverlayColor.color\n\t\t\t);\n\t\t\tsetAttributes( {\n\t\t\t\tisDark: isDarkSetting,\n\t\t\t} );\n\t\t}\n\t\tif ( useFeaturedImage ) {\n\t\t\tsetIsDark();\n\t\t}\n\t\t// We only ever want to run this effect if the mediaUrl changes.\n\t\t// All other changes to the isDark state are handled in the appropriate event handlers.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ mediaUrl ] );\n\n\t// instead of destructuring the attributes\n\t// we define the url and background type\n\t// depending on the value of the useFeaturedImage flag\n\t// to preview in edit the dynamic featured image\n\tconst url = useFeaturedImage\n\t\t? mediaUrl\n\t\t: // Ensure the url is not malformed due to sanitization through `wp_kses`.\n\t\t  attributes.url?.replaceAll( '&amp;', '&' );\n\tconst backgroundType = useFeaturedImage\n\t\t? IMAGE_BACKGROUND_TYPE\n\t\t: attributes.backgroundType;\n\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\tconst { gradientClass, gradientValue } = __experimentalUseGradient();\n\tconst setMedia = attributesFromMedia( setAttributes, dimRatio );\n\n\tconst onSelectMedia = async ( newMedia ) => {\n\t\t// Only pass the url to getCoverIsDark if the media is an image as video is not handled.\n\t\tconst newUrl = newMedia?.type === 'image' ? newMedia.url : undefined;\n\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\tnewUrl,\n\t\t\tdimRatio,\n\t\t\toverlayColor.color\n\t\t);\n\t\tsetMedia( newMedia, isDarkSetting );\n\t};\n\n\tconst onClearMedia = async () => {\n\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\tundefined,\n\t\t\tdimRatio,\n\t\t\toverlayColor.color\n\t\t);\n\t\tsetAttributes( {\n\t\t\turl: undefined,\n\t\t\tid: undefined,\n\t\t\tbackgroundType: undefined,\n\t\t\tfocalPoint: undefined,\n\t\t\thasParallax: undefined,\n\t\t\tisRepeated: undefined,\n\t\t\tuseFeaturedImage: false,\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst onSetOverlayColor = async ( colorValue ) => {\n\t\tconst isDarkSetting = await getCoverIsDark( url, dimRatio, colorValue );\n\t\tsetOverlayColor( colorValue );\n\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\tsetAttributes( {\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst onUpdateDimRatio = async ( newDimRatio ) => {\n\t\tconst isDarkSetting = await getCoverIsDark(\n\t\t\turl,\n\t\t\tnewDimRatio,\n\t\t\toverlayColor.color\n\t\t);\n\n\t\tsetAttributes( {\n\t\t\tdimRatio: newDimRatio,\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst isUploadingMedia = isTemporaryMedia( id, url );\n\n\tconst onUploadError = ( message ) => {\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t};\n\n\tconst isImageBackground = IMAGE_BACKGROUND_TYPE === backgroundType;\n\tconst isVideoBackground = VIDEO_BACKGROUND_TYPE === backgroundType;\n\n\tconst [ resizeListener, { height, width } ] = useResizeObserver();\n\tconst resizableBoxDimensions = useMemo( () => {\n\t\treturn {\n\t\t\theight: minHeightUnit === 'px' ? minHeight : 'auto',\n\t\t\twidth: 'auto',\n\t\t};\n\t}, [ minHeight, minHeightUnit ] );\n\n\tconst minHeightWithUnit =\n\t\tminHeight && minHeightUnit\n\t\t\t? `${ minHeight }${ minHeightUnit }`\n\t\t\t: minHeight;\n\n\tconst isImgElement = ! ( hasParallax || isRepeated );\n\n\tconst style = {\n\t\tminHeight: minHeightWithUnit || undefined,\n\t};\n\n\tconst backgroundImage = url ? `url(${ url })` : undefined;\n\n\tconst backgroundPosition = mediaPosition( focalPoint );\n\n\tconst bgStyle = { backgroundColor: overlayColor.color };\n\tconst mediaStyle = {\n\t\tobjectPosition:\n\t\t\tfocalPoint && isImgElement\n\t\t\t\t? mediaPosition( focalPoint )\n\t\t\t\t: undefined,\n\t};\n\n\tconst hasBackground = !! ( url || overlayColor.color || gradientValue );\n\n\tconst hasInnerBlocks = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getBlock( clientId ).innerBlocks.length >\n\t\t\t0,\n\t\t[ clientId ]\n\t);\n\n\tconst ref = useRef();\n\tconst blockProps = useBlockProps( { ref } );\n\n\t// Check for fontSize support before we pass a fontSize attribute to the innerBlocks.\n\tconst hasFontSizes = !! useSetting( 'typography.fontSizes' )?.length;\n\tconst innerBlocksTemplate = getInnerBlocksTemplate( {\n\t\tfontSize: hasFontSizes ? 'large' : undefined,\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-cover__inner-container',\n\t\t},\n\t\t{\n\t\t\t// Avoid template sync when the `templateLock` value is `all` or `contentOnly`.\n\t\t\t// See: https://github.com/WordPress/gutenberg/pull/45632\n\t\t\ttemplate: ! hasInnerBlocks ? innerBlocksTemplate : undefined,\n\t\t\ttemplateInsertUpdatesSelection: true,\n\t\t\tallowedBlocks,\n\t\t\ttemplateLock,\n\t\t}\n\t);\n\n\tconst mediaElement = useRef();\n\tconst currentSettings = {\n\t\tisVideoBackground,\n\t\tisImageBackground,\n\t\tmediaElement,\n\t\thasInnerBlocks,\n\t\turl,\n\t\tisImgElement,\n\t\toverlayColor,\n\t};\n\n\tconst toggleUseFeaturedImage = async () => {\n\t\tconst isDarkSetting = await ( useFeaturedImage\n\t\t\t? getCoverIsDark( undefined, dimRatio, overlayColor.color )\n\t\t\t: getCoverIsDark( mediaUrl, dimRatio, overlayColor.color ) );\n\t\tsetAttributes( {\n\t\t\tid: undefined,\n\t\t\turl: undefined,\n\t\t\tuseFeaturedImage: ! useFeaturedImage,\n\t\t\tdimRatio: dimRatio === 100 ? 50 : dimRatio,\n\t\t\tbackgroundType: useFeaturedImage\n\t\t\t\t? IMAGE_BACKGROUND_TYPE\n\t\t\t\t: undefined,\n\t\t\tisDark: isDarkSetting,\n\t\t} );\n\t};\n\n\tconst blockControls = (\n\t\t<CoverBlockControls\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\tcurrentSettings={ currentSettings }\n\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t/>\n\t);\n\n\tconst inspectorControls = (\n\t\t<CoverInspectorControls\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tclientId={ clientId }\n\t\t\tsetOverlayColor={ onSetOverlayColor }\n\t\t\tcoverRef={ ref }\n\t\t\tcurrentSettings={ currentSettings }\n\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\tupdateDimRatio={ onUpdateDimRatio }\n\t\t\tonClearMedia={ onClearMedia }\n\t\t/>\n\t);\n\n\tconst resizableCoverProps = {\n\t\tclassName: 'block-library-cover__resize-container',\n\t\tclientId,\n\t\theight,\n\t\tminHeight: minHeightWithUnit,\n\t\tonResizeStart: () => {\n\t\t\tsetAttributes( { minHeightUnit: 'px' } );\n\t\t\ttoggleSelection( false );\n\t\t},\n\t\tonResize: ( value ) => {\n\t\t\tsetAttributes( { minHeight: value } );\n\t\t},\n\t\tonResizeStop: ( newMinHeight ) => {\n\t\t\ttoggleSelection( true );\n\t\t\tsetAttributes( { minHeight: newMinHeight } );\n\t\t},\n\t\tshowHandle: true,\n\t\tsize: resizableBoxDimensions,\n\t\twidth,\n\t};\n\n\tif ( ! useFeaturedImage && ! hasInnerBlocks && ! hasBackground ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ blockControls }\n\t\t\t\t{ inspectorControls }\n\t\t\t\t{ isSelected && (\n\t\t\t\t\t<ResizableCoverPopover { ...resizableCoverProps } />\n\t\t\t\t) }\n\t\t\t\t<TagName\n\t\t\t\t\t{ ...blockProps }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'is-placeholder',\n\t\t\t\t\t\tblockProps.className\n\t\t\t\t\t) }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t...blockProps.style,\n\t\t\t\t\t\tminHeight: minHeightWithUnit || undefined,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ resizeListener }\n\t\t\t\t\t<CoverPlaceholder\n\t\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"wp-block-cover__placeholder-background-options\">\n\t\t\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\t\t\tdisableCustomColors={ true }\n\t\t\t\t\t\t\t\tvalue={ overlayColor.color }\n\t\t\t\t\t\t\t\tonChange={ onSetOverlayColor }\n\t\t\t\t\t\t\t\tclearable={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CoverPlaceholder>\n\t\t\t\t</TagName>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst classes = classnames(\n\t\t{\n\t\t\t'is-dark-theme': isDark,\n\t\t\t'is-light': ! isDark,\n\t\t\t'is-transient': isUploadingMedia,\n\t\t\t'has-parallax': hasParallax,\n\t\t\t'is-repeated': isRepeated,\n\t\t\t'has-custom-content-position':\n\t\t\t\t! isContentPositionCenter( contentPosition ),\n\t\t},\n\t\tgetPositionClassName( contentPosition )\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ blockControls }\n\t\t\t{ inspectorControls }\n\t\t\t<TagName\n\t\t\t\t{ ...blockProps }\n\t\t\t\tclassName={ classnames( classes, blockProps.className ) }\n\t\t\t\tstyle={ { ...style, ...blockProps.style } }\n\t\t\t\tdata-url={ url }\n\t\t\t>\n\t\t\t\t{ resizeListener }\n\t\t\t\t{ ( ! useFeaturedImage || url ) && (\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'wp-block-cover__background',\n\t\t\t\t\t\t\tdimRatioToClass( dimRatio ),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t[ overlayColor.class ]: overlayColor.class,\n\t\t\t\t\t\t\t\t'has-background-dim': dimRatio !== undefined,\n\t\t\t\t\t\t\t\t// For backwards compatibility. Former versions of the Cover Block applied\n\t\t\t\t\t\t\t\t// `.wp-block-cover__gradient-background` in the presence of\n\t\t\t\t\t\t\t\t// media, a gradient and a dim.\n\t\t\t\t\t\t\t\t'wp-block-cover__gradient-background':\n\t\t\t\t\t\t\t\t\turl && gradientValue && dimRatio !== 0,\n\t\t\t\t\t\t\t\t'has-background-gradient': gradientValue,\n\t\t\t\t\t\t\t\t[ gradientClass ]: gradientClass,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tstyle={ { backgroundImage: gradientValue, ...bgStyle } }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ ! url && useFeaturedImage && (\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\tclassName=\"wp-block-cover__image--placeholder-image\"\n\t\t\t\t\t\twithIllustration={ true }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ url &&\n\t\t\t\t\tisImageBackground &&\n\t\t\t\t\t( isImgElement ? (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tref={ mediaElement }\n\t\t\t\t\t\t\tclassName=\"wp-block-cover__image-background\"\n\t\t\t\t\t\t\talt={ alt }\n\t\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\t\tstyle={ mediaStyle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={ mediaElement }\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\t'wp-block-cover__image-background'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tstyle={ { backgroundImage, backgroundPosition } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t{ url && isVideoBackground && (\n\t\t\t\t\t<video\n\t\t\t\t\t\tref={ mediaElement }\n\t\t\t\t\t\tclassName=\"wp-block-cover__video-background\"\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tloop\n\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\tstyle={ mediaStyle }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ isUploadingMedia && <Spinner /> }\n\t\t\t\t<CoverPlaceholder\n\t\t\t\t\tdisableMediaButtons\n\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\ttoggleUseFeaturedImage={ toggleUseFeaturedImage }\n\t\t\t\t/>\n\t\t\t\t<div { ...innerBlocksProps } />\n\t\t\t</TagName>\n\t\t\t{ isSelected && (\n\t\t\t\t<ResizableCoverPopover { ...resizableCoverProps } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithColors( { overlayColor: 'background-color' } ),\n] )( CoverEdit );\n"],"mappings":"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"}