{"version":3,"names":["_blocks","require","_blob","_hooks","_constants","_constants2","_shared","parseShortcodeIds","ids","split","map","id","parseInt","updateThirdPartyTransformToGallery","block","isGalleryV2Enabled","name","attributes","images","length","innerBlocks","url","alt","createBlock","sizeSlug","linkDestination","addFilter","updateThirdPartyTransformFromGallery","toBlock","fromBlocks","from","Array","isArray","galleryBlock","find","transformedBlock","includes","transforms","type","isMultiBlock","blocks","transform","align","every","attribute","undefined","validImages","filter","image","width","height","caption","toString","tag","shortcode","named","columns","linkTo","link","DEPRECATED_LINK_DESTINATION_ATTACHMENT","DEPRECATED_LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","LINK_DESTINATION_MEDIA","LINK_DESTINATION_NONE","imageIds","imageId","isMatch","priority","files","file","indexOf","createBlobURL","pickRelevantMediaFiles","to","title","href","rel","linkClass","imageSizeSlug","linkTarget","anchor","className","index","_default","exports","default"],"sources":["@wordpress/block-library/src/gallery/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { createBlobURL } from '@wordpress/blob';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tLINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_NONE,\n\tLINK_DESTINATION_MEDIA,\n} from './constants';\nimport {\n\tLINK_DESTINATION_ATTACHMENT as DEPRECATED_LINK_DESTINATION_ATTACHMENT,\n\tLINK_DESTINATION_MEDIA as DEPRECATED_LINK_DESTINATION_MEDIA,\n} from './v1/constants';\nimport { pickRelevantMediaFiles, isGalleryV2Enabled } from './shared';\n\nconst parseShortcodeIds = ( ids ) => {\n\tif ( ! ids ) {\n\t\treturn [];\n\t}\n\n\treturn ids.split( ',' ).map( ( id ) => parseInt( id, 10 ) );\n};\n\n/**\n * Third party block plugins don't have an easy way to detect if the\n * innerBlocks version of the Gallery is running when they run a\n * 3rdPartyBlock -> GalleryBlock transform so this tranform filter\n * will handle this. Once the innerBlocks version is the default\n * in a core release, this could be deprecated and removed after\n * plugin authors have been given time to update transforms.\n *\n * @typedef  {Object} Attributes\n * @typedef  {Object} Block\n * @property {Attributes} attributes The attributes of the block.\n * @param    {Block}      block      The transformed block.\n * @return   {Block}                 The transformed block.\n */\nfunction updateThirdPartyTransformToGallery( block ) {\n\tif (\n\t\tisGalleryV2Enabled() &&\n\t\tblock.name === 'core/gallery' &&\n\t\tblock.attributes?.images.length > 0\n\t) {\n\t\tconst innerBlocks = block.attributes.images.map(\n\t\t\t( { url, id, alt } ) => {\n\t\t\t\treturn createBlock( 'core/image', {\n\t\t\t\t\turl,\n\t\t\t\t\tid: id ? parseInt( id, 10 ) : null,\n\t\t\t\t\talt,\n\t\t\t\t\tsizeSlug: block.attributes.sizeSlug,\n\t\t\t\t\tlinkDestination: block.attributes.linkDestination,\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\n\t\tdelete block.attributes.ids;\n\t\tdelete block.attributes.images;\n\t\tblock.innerBlocks = innerBlocks;\n\t}\n\n\treturn block;\n}\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/gallery/update-third-party-transform-to',\n\tupdateThirdPartyTransformToGallery\n);\n\n/**\n * Third party block plugins don't have an easy way to detect if the\n * innerBlocks version of the Gallery is running when they run a\n * GalleryBlock -> 3rdPartyBlock transform so this transform filter\n * will handle this. Once the innerBlocks version is the default\n * in a core release, this could be deprecated and removed after\n * plugin authors have been given time to update transforms.\n *\n * @typedef  {Object} Attributes\n * @typedef  {Object} Block\n * @property {Attributes} attributes The attributes of the block.\n * @param    {Block}      toBlock    The block to transform to.\n * @param    {Block[]}    fromBlocks The blocks to transform from.\n * @return   {Block}                 The transformed block.\n */\nfunction updateThirdPartyTransformFromGallery( toBlock, fromBlocks ) {\n\tconst from = Array.isArray( fromBlocks ) ? fromBlocks : [ fromBlocks ];\n\tconst galleryBlock = from.find(\n\t\t( transformedBlock ) =>\n\t\t\ttransformedBlock.name === 'core/gallery' &&\n\t\t\ttransformedBlock.innerBlocks.length > 0 &&\n\t\t\t! transformedBlock.attributes.images?.length > 0 &&\n\t\t\t! toBlock.name.includes( 'core/' )\n\t);\n\n\tif ( galleryBlock ) {\n\t\tconst images = galleryBlock.innerBlocks.map(\n\t\t\t( { attributes: { url, id, alt } } ) => ( {\n\t\t\t\turl,\n\t\t\t\tid: id ? parseInt( id, 10 ) : null,\n\t\t\t\talt,\n\t\t\t} )\n\t\t);\n\t\tconst ids = images.map( ( { id } ) => id );\n\t\tgalleryBlock.attributes.images = images;\n\t\tgalleryBlock.attributes.ids = ids;\n\t}\n\n\treturn toBlock;\n}\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/gallery/update-third-party-transform-from',\n\tupdateThirdPartyTransformFromGallery\n);\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( attributes ) => {\n\t\t\t\t// Init the align and size from the first item which may be either the placeholder or an image.\n\t\t\t\tlet { align, sizeSlug } = attributes[ 0 ];\n\t\t\t\t// Loop through all the images and check if they have the same align and size.\n\t\t\t\talign = attributes.every(\n\t\t\t\t\t( attribute ) => attribute.align === align\n\t\t\t\t)\n\t\t\t\t\t? align\n\t\t\t\t\t: undefined;\n\t\t\t\tsizeSlug = attributes.every(\n\t\t\t\t\t( attribute ) => attribute.sizeSlug === sizeSlug\n\t\t\t\t)\n\t\t\t\t\t? sizeSlug\n\t\t\t\t\t: undefined;\n\n\t\t\t\tconst validImages = attributes.filter( ( { url } ) => url );\n\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tconst innerBlocks = validImages.map( ( image ) => {\n\t\t\t\t\t\t// Gallery images can't currently be resized so make sure height and width are undefined.\n\t\t\t\t\t\timage.width = undefined;\n\t\t\t\t\t\timage.height = undefined;\n\t\t\t\t\t\treturn createBlock( 'core/image', image );\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\t'core/gallery',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\tsizeSlug,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinnerBlocks\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn createBlock( 'core/gallery', {\n\t\t\t\t\timages: validImages.map(\n\t\t\t\t\t\t( { id, url, alt, caption } ) => ( {\n\t\t\t\t\t\t\tid: id.toString(),\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\t\tids: validImages.map( ( { id } ) => parseInt( id, 10 ) ),\n\t\t\t\t\talign,\n\t\t\t\t\tsizeSlug,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'shortcode',\n\t\t\ttag: 'gallery',\n\n\t\t\tattributes: {\n\t\t\t\timages: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\tif ( ! isGalleryV2Enabled() ) {\n\t\t\t\t\t\t\treturn parseShortcodeIds( ids ).map( ( id ) => ( {\n\t\t\t\t\t\t\t\tid: id.toString(),\n\t\t\t\t\t\t\t} ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tids: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\tif ( ! isGalleryV2Enabled() ) {\n\t\t\t\t\t\t\treturn parseShortcodeIds( ids );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcolumns: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tshortcode: ( { named: { columns = '3' } } ) => {\n\t\t\t\t\t\treturn parseInt( columns, 10 );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tlinkTo: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tshortcode: ( { named: { link } } ) => {\n\t\t\t\t\t\tif ( ! isGalleryV2Enabled() ) {\n\t\t\t\t\t\t\tswitch ( link ) {\n\t\t\t\t\t\t\t\tcase 'post':\n\t\t\t\t\t\t\t\t\treturn DEPRECATED_LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\t\t\treturn DEPRECATED_LINK_DESTINATION_MEDIA;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn DEPRECATED_LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch ( link ) {\n\t\t\t\t\t\t\tcase 'post':\n\t\t\t\t\t\t\t\treturn LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\t\treturn LINK_DESTINATION_MEDIA;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn LINK_DESTINATION_NONE;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\ttransform( { named: { ids, columns = 3, link } } ) {\n\t\t\t\tconst imageIds = parseShortcodeIds( ids ).map( ( id ) =>\n\t\t\t\t\tparseInt( id, 10 )\n\t\t\t\t);\n\n\t\t\t\tlet linkTo = LINK_DESTINATION_NONE;\n\t\t\t\tif ( link === 'post' ) {\n\t\t\t\t\tlinkTo = LINK_DESTINATION_ATTACHMENT;\n\t\t\t\t} else if ( link === 'file' ) {\n\t\t\t\t\tlinkTo = LINK_DESTINATION_MEDIA;\n\t\t\t\t}\n\n\t\t\t\tconst galleryBlock = createBlock(\n\t\t\t\t\t'core/gallery',\n\t\t\t\t\t{\n\t\t\t\t\t\tcolumns: parseInt( columns, 10 ),\n\t\t\t\t\t\tlinkTo,\n\t\t\t\t\t},\n\t\t\t\t\timageIds.map( ( imageId ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', { id: imageId } )\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\treturn galleryBlock;\n\t\t\t},\n\t\t\tisMatch( { named } ) {\n\t\t\t\treturn undefined !== named.ids;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\t// When created by drag and dropping multiple files on an insertion point. Because multiple\n\t\t\t// files must not be transformed to a gallery when dropped within a gallery there is another transform\n\t\t\t// within the image block to handle that case. Therefore this transform has to have priority 1\n\t\t\t// set so that it overrrides the image block transformation when mulitple images are dropped outside\n\t\t\t// of a gallery block.\n\t\t\ttype: 'files',\n\t\t\tpriority: 1,\n\t\t\tisMatch( files ) {\n\t\t\t\treturn (\n\t\t\t\t\tfiles.length !== 1 &&\n\t\t\t\t\tfiles.every(\n\t\t\t\t\t\t( file ) => file.type.indexOf( 'image/' ) === 0\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform( files ) {\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tconst innerBlocks = files.map( ( file ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\treturn createBlock( 'core/gallery', {}, innerBlocks );\n\t\t\t\t}\n\t\t\t\tconst block = createBlock( 'core/gallery', {\n\t\t\t\t\timages: files.map( ( file ) =>\n\t\t\t\t\t\tpickRelevantMediaFiles( {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t\treturn block;\n\t\t\t},\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/image' ],\n\t\t\ttransform: ( { align, images, ids, sizeSlug }, innerBlocks ) => {\n\t\t\t\tif ( isGalleryV2Enabled() ) {\n\t\t\t\t\tif ( innerBlocks.length > 0 ) {\n\t\t\t\t\t\treturn innerBlocks.map(\n\t\t\t\t\t\t\t( {\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t\t\trel,\n\t\t\t\t\t\t\t\t\tlinkClass,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tsizeSlug: imageSizeSlug,\n\t\t\t\t\t\t\t\t\tlinkDestination,\n\t\t\t\t\t\t\t\t\tlinkTarget,\n\t\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} ) =>\n\t\t\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t\t\trel,\n\t\t\t\t\t\t\t\t\tlinkClass,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tsizeSlug: imageSizeSlug,\n\t\t\t\t\t\t\t\t\tlinkDestination,\n\t\t\t\t\t\t\t\t\tlinkTarget,\n\t\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t\t}\n\t\t\t\tif ( images.length > 0 ) {\n\t\t\t\t\treturn images.map( ( { url, alt, caption }, index ) =>\n\t\t\t\t\t\tcreateBlock( 'core/image', {\n\t\t\t\t\t\t\tid: ids[ index ],\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\tcaption,\n\t\t\t\t\t\t\talign,\n\t\t\t\t\t\t\tsizeSlug,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":"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"}