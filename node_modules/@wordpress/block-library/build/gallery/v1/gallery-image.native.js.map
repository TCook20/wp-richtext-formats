{"version":3,"names":["_element","require","_reactNative","_reactNativeBridge","_components","_i18n","_blockEditor","_url","_compose","_icons","_galleryButton","_interopRequireDefault","_galleryImageStyle","compose","StyleSheet","separatorStyle","style","separator","borderRightWidth","hairlineWidth","buttonStyle","button","aspectRatio","ICON_SIZE_ARROW","GalleryImage","Component","constructor","arguments","onSelectImage","bind","onSelectCaption","onMediaPressed","onCaptionChange","onSelectMedia","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","renderContent","state","captionSelected","isUploadInProgress","didUploadFail","setState","props","isSelected","onSelect","id","url","requestImageUploadCancelDialog","getProtocol","requestImageFailedRetryDialog","requestImageFullscreenPreview","isBlockSelected","onSelectBlock","media","setAttributes","caption","componentDidUpdate","prevProps","image","source_url","alt","alt_text","payload","mediaServerId","mediaUrl","params","isFirstItem","isLastItem","onRemove","onMoveForward","onMoveBackward","ariaLabel","isCropped","getStylesFromColorScheme","isRTL","isUploadFailed","retryMessage","resizeMode","captionPlaceholderStyle","captionPlaceholder","captionPlaceholderDark","shouldShowCaptionEditable","shouldShowCaptionExpanded","captionContainerStyle","captionExpandedContainer","captionContainer","captionStyle","captionExpanded","mediaPickerOptions","destructiveButton","label","__","onPress","separated","value","createElement","Fragment","Image","height","onSelectMediaUploadOption","retryIcon","warning","View","toolbarContainer","toolbar","moverButtonContainer","default","icon","arrowRight","arrowLeft","iconSize","onClick","undefined","accessibilityLabel","disabled","ScrollView","nestedScrollEnabled","keyboardShouldPersistTaps","bounces","Caption","inlineToolbar","onChange","onFocus","placeholder","placeholderTextColor","color","render","containerStyle","galleryImageContainer","galleryImageContainerDark","TouchableWithoutFeedback","accessible","accessibilityLabelImageContainer","accessibilityRole","MediaUploadProgress","mediaId","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","sprintf","_default","withPreferredColorScheme","exports"],"sources":["@wordpress/block-library/src/gallery/v1/gallery-image.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tStyleSheet,\n\tView,\n\tScrollView,\n\tTouchableWithoutFeedback,\n} from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\trequestImageFullscreenPreview,\n} from '@wordpress/react-native-bridge';\nimport { Component } from '@wordpress/element';\nimport { Image } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Caption, MediaUploadProgress } from '@wordpress/block-editor';\nimport { getProtocol } from '@wordpress/url';\nimport { withPreferredColorScheme } from '@wordpress/compose';\nimport { arrowLeft, arrowRight, warning } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport Button from './gallery-button';\nimport style from './gallery-image-style.scss';\n\nconst { compose } = StyleSheet;\n\nconst separatorStyle = compose( style.separator, {\n\tborderRightWidth: StyleSheet.hairlineWidth,\n} );\nconst buttonStyle = compose( style.button, { aspectRatio: 1 } );\nconst ICON_SIZE_ARROW = 15;\n\nclass GalleryImage extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSelectImage = this.onSelectImage.bind( this );\n\t\tthis.onSelectCaption = this.onSelectCaption.bind( this );\n\t\tthis.onMediaPressed = this.onMediaPressed.bind( this );\n\t\tthis.onCaptionChange = this.onCaptionChange.bind( this );\n\t\tthis.onSelectMedia = this.onSelectMedia.bind( this );\n\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.renderContent = this.renderContent.bind( this );\n\n\t\tthis.state = {\n\t\t\tcaptionSelected: false,\n\t\t\tisUploadInProgress: false,\n\t\t\tdidUploadFail: false,\n\t\t};\n\t}\n\n\tonSelectCaption() {\n\t\tif ( ! this.state.captionSelected ) {\n\t\t\tthis.setState( {\n\t\t\t\tcaptionSelected: true,\n\t\t\t} );\n\t\t}\n\n\t\tif ( ! this.props.isSelected ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\t}\n\n\tonMediaPressed() {\n\t\tconst { id, url, isSelected } = this.props;\n\t\tconst { captionSelected, isUploadInProgress, didUploadFail } =\n\t\t\tthis.state;\n\n\t\tthis.onSelectImage();\n\n\t\tif ( isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( id );\n\t\t} else if (\n\t\t\tdidUploadFail ||\n\t\t\t( id && getProtocol( url ) === 'file:' )\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( id );\n\t\t} else if ( isSelected && ! captionSelected ) {\n\t\t\trequestImageFullscreenPreview( url );\n\t\t}\n\t}\n\n\tonSelectImage() {\n\t\tif ( ! this.props.isBlockSelected ) {\n\t\t\tthis.props.onSelectBlock();\n\t\t}\n\n\t\tif ( ! this.props.isSelected ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\n\t\tif ( this.state.captionSelected ) {\n\t\t\tthis.setState( {\n\t\t\t\tcaptionSelected: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSelectMedia( media ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( media );\n\t}\n\n\tonCaptionChange( caption ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { caption } );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { isSelected, image, url } = this.props;\n\t\tif ( image && ! url ) {\n\t\t\tthis.props.setAttributes( {\n\t\t\t\turl: image.source_url,\n\t\t\t\talt: image.alt_text,\n\t\t\t} );\n\t\t}\n\n\t\t// Unselect the caption so when the user selects other image and comeback\n\t\t// the caption is not immediately selected.\n\t\tif (\n\t\t\tthis.state.captionSelected &&\n\t\t\t! isSelected &&\n\t\t\tprevProps.isSelected\n\t\t) {\n\t\t\tthis.setState( {\n\t\t\t\tcaptionSelected: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\tupdateMediaProgress() {\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tthis.setState( {\n\t\t\tisUploadInProgress: false,\n\t\t\tdidUploadFail: false,\n\t\t} );\n\n\t\tthis.props.setAttributes( {\n\t\t\tid: payload.mediaServerId,\n\t\t\turl: payload.mediaUrl,\n\t\t} );\n\t}\n\n\tfinishMediaUploadWithFailure() {\n\t\tthis.setState( {\n\t\t\tisUploadInProgress: false,\n\t\t\tdidUploadFail: true,\n\t\t} );\n\t}\n\n\trenderContent( params ) {\n\t\tconst {\n\t\t\turl,\n\t\t\tisFirstItem,\n\t\t\tisLastItem,\n\t\t\tisSelected,\n\t\t\tcaption,\n\t\t\tonRemove,\n\t\t\tonMoveForward,\n\t\t\tonMoveBackward,\n\t\t\t'aria-label': ariaLabel,\n\t\t\tisCropped,\n\t\t\tgetStylesFromColorScheme,\n\t\t\tisRTL,\n\t\t} = this.props;\n\n\t\tconst { isUploadInProgress, captionSelected } = this.state;\n\t\tconst { isUploadFailed, retryMessage } = params;\n\t\tconst resizeMode = isCropped ? 'cover' : 'contain';\n\n\t\tconst captionPlaceholderStyle = getStylesFromColorScheme(\n\t\t\tstyle.captionPlaceholder,\n\t\t\tstyle.captionPlaceholderDark\n\t\t);\n\n\t\tconst shouldShowCaptionEditable = ! isUploadFailed && isSelected;\n\t\tconst shouldShowCaptionExpanded =\n\t\t\t! isUploadFailed && ! isSelected && !! caption;\n\n\t\tconst captionContainerStyle = shouldShowCaptionExpanded\n\t\t\t? style.captionExpandedContainer\n\t\t\t: style.captionContainer;\n\n\t\tconst captionStyle = shouldShowCaptionExpanded\n\t\t\t? style.captionExpanded\n\t\t\t: style.caption;\n\n\t\tconst mediaPickerOptions = [\n\t\t\t{\n\t\t\t\tdestructiveButton: true,\n\t\t\t\tid: 'removeImage',\n\t\t\t\tlabel: __( 'Remove' ),\n\t\t\t\tonPress: onRemove,\n\t\t\t\tseparated: true,\n\t\t\t\tvalue: 'removeImage',\n\t\t\t},\n\t\t];\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Image\n\t\t\t\t\talt={ ariaLabel }\n\t\t\t\t\theight={ style.image.height }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\tisUploadFailed={ isUploadFailed }\n\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\tmediaPickerOptions={ mediaPickerOptions }\n\t\t\t\t\tonSelectMediaUploadOption={ this.onSelectMedia }\n\t\t\t\t\tresizeMode={ resizeMode }\n\t\t\t\t\turl={ url }\n\t\t\t\t\tretryMessage={ retryMessage }\n\t\t\t\t\tretryIcon={ warning }\n\t\t\t\t/>\n\n\t\t\t\t{ ! isUploadInProgress && isSelected && (\n\t\t\t\t\t<View style={ style.toolbarContainer }>\n\t\t\t\t\t\t<View style={ style.toolbar }>\n\t\t\t\t\t\t\t<View style={ style.moverButtonContainer }>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tstyle={ buttonStyle }\n\t\t\t\t\t\t\t\t\ticon={ isRTL ? arrowRight : arrowLeft }\n\t\t\t\t\t\t\t\t\ticonSize={ ICON_SIZE_ARROW }\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\tisFirstItem ? undefined : onMoveBackward\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Move Image Backward'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\taria-disabled={ isFirstItem }\n\t\t\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<View style={ separatorStyle } />\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tstyle={ buttonStyle }\n\t\t\t\t\t\t\t\t\ticon={ isRTL ? arrowLeft : arrowRight }\n\t\t\t\t\t\t\t\t\ticonSize={ ICON_SIZE_ARROW }\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\tisLastItem ? undefined : onMoveForward\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Move Image Forward'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\taria-disabled={ isLastItem }\n\t\t\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isUploadInProgress &&\n\t\t\t\t\t( shouldShowCaptionEditable ||\n\t\t\t\t\t\tshouldShowCaptionExpanded ) && (\n\t\t\t\t\t\t<View style={ captionContainerStyle }>\n\t\t\t\t\t\t\t<ScrollView\n\t\t\t\t\t\t\t\tnestedScrollEnabled\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"handled\"\n\t\t\t\t\t\t\t\tbounces={ false }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\t\t\t\tisSelected={ isSelected && captionSelected }\n\t\t\t\t\t\t\t\t\tonChange={ this.onCaptionChange }\n\t\t\t\t\t\t\t\t\tonFocus={ this.onSelectCaption }\n\t\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t\tisSelected ? __( 'Add caption' ) : null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\tcaptionPlaceholderStyle.color\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstyle={ captionStyle }\n\t\t\t\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ScrollView>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { id, onRemove, getStylesFromColorScheme, isSelected } =\n\t\t\tthis.props;\n\n\t\tconst containerStyle = getStylesFromColorScheme(\n\t\t\tstyle.galleryImageContainer,\n\t\t\tstyle.galleryImageContainerDark\n\t\t);\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ this.onMediaPressed }\n\t\t\t\taccessible={ ! isSelected } // We need only child views to be accessible after the selection.\n\t\t\t\taccessibilityLabel={ this.accessibilityLabelImageContainer() } // if we don't set this explicitly it reads system provided accessibilityLabels of all child components and those include pretty technical words which don't make sense\n\t\t\t\taccessibilityRole={ 'imagebutton' } // this makes VoiceOver to read a description of image provided by system on iOS and lets user know this is a button which conveys the message of tappablity\n\t\t\t>\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMediaUploadStateReset={ onRemove }\n\t\t\t\t\t\trenderContent={ this.renderContent }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n\n\taccessibilityLabelImageContainer() {\n\t\tconst { caption, 'aria-label': ariaLabel } = this.props;\n\n\t\treturn ! caption\n\t\t\t? ariaLabel\n\t\t\t: ariaLabel +\n\t\t\t\t\t'. ' +\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: accessibility text. %s: image caption. */\n\t\t\t\t\t\t__( 'Image caption. %s' ),\n\t\t\t\t\t\tcaption\n\t\t\t\t\t);\n\t}\n}\n\nexport default withPreferredColorScheme( GalleryImage );\n"],"mappings":"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"}