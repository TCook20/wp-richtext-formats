{"version":3,"names":["_coreData","require","_components","_i18n","_blockEditor","ReusableBlockEdit","attributes","ref","hasAlreadyRendered","useHasRecursion","record","hasResolved","useEntityRecord","isMissing","blocks","onInput","onChange","useEntityBlockEditor","id","title","setTitle","useEntityProp","blockProps","useBlockProps","className","innerBlocksProps","useInnerBlocksProps","value","renderAppender","length","undefined","InnerBlocks","ButtonBlockAppender","_element","createElement","Warning","__","Placeholder","Spinner","__experimentalRecursionProvider","uniqueId","InspectorControls","PanelBody","TextControl","__nextHasNoMarginBottom","label"],"sources":["@wordpress/block-library/src/block/edit.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tuseEntityBlockEditor,\n\tuseEntityProp,\n\tuseEntityRecord,\n} from '@wordpress/core-data';\nimport {\n\tPlaceholder,\n\tSpinner,\n\tTextControl,\n\tPanelBody,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tuseInnerBlocksProps,\n\t__experimentalRecursionProvider as RecursionProvider,\n\t__experimentalUseHasRecursion as useHasRecursion,\n\tInnerBlocks,\n\tInspectorControls,\n\tuseBlockProps,\n\tWarning,\n} from '@wordpress/block-editor';\n\nexport default function ReusableBlockEdit( { attributes: { ref } } ) {\n\tconst hasAlreadyRendered = useHasRecursion( ref );\n\tconst { record, hasResolved } = useEntityRecord(\n\t\t'postType',\n\t\t'wp_block',\n\t\tref\n\t);\n\tconst isMissing = hasResolved && ! record;\n\n\tconst [ blocks, onInput, onChange ] = useEntityBlockEditor(\n\t\t'postType',\n\t\t'wp_block',\n\t\t{ id: ref }\n\t);\n\n\tconst [ title, setTitle ] = useEntityProp(\n\t\t'postType',\n\t\t'wp_block',\n\t\t'title',\n\t\tref\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: 'block-library-block__reusable-block-container',\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\n\t\tvalue: blocks,\n\t\tonInput,\n\t\tonChange,\n\t\trenderAppender: blocks?.length\n\t\t\t? undefined\n\t\t\t: InnerBlocks.ButtonBlockAppender,\n\t} );\n\n\tif ( hasAlreadyRendered ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<Warning>\n\t\t\t\t\t{ __( 'Block cannot be rendered inside itself.' ) }\n\t\t\t\t</Warning>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( isMissing ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<Warning>\n\t\t\t\t\t{ __( 'Block has been deleted or is unavailable.' ) }\n\t\t\t\t</Warning>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( ! hasResolved ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<Placeholder>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</Placeholder>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<RecursionProvider uniqueId={ ref }>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ setTitle }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div { ...innerBlocksProps } />\n\t\t</RecursionProvider>\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,SAAA,GAAAC,OAAA;AAKA,IAAAC,WAAA,GAAAD,OAAA;AAMA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AAfA;AACA;AACA;;AAuBe,SAASI,iBAAiBA,CAAE;EAAEC,UAAU,EAAE;IAAEC;EAAI;AAAE,CAAC,EAAG;EACpE,MAAMC,kBAAkB,GAAG,IAAAC,0CAAe,EAAEF,GAAI,CAAC;EACjD,MAAM;IAAEG,MAAM;IAAEC;EAAY,CAAC,GAAG,IAAAC,yBAAe,EAC9C,UAAU,EACV,UAAU,EACVL,GACD,CAAC;EACD,MAAMM,SAAS,GAAGF,WAAW,IAAI,CAAED,MAAM;EAEzC,MAAM,CAAEI,MAAM,EAAEC,OAAO,EAAEC,QAAQ,CAAE,GAAG,IAAAC,8BAAoB,EACzD,UAAU,EACV,UAAU,EACV;IAAEC,EAAE,EAAEX;EAAI,CACX,CAAC;EAED,MAAM,CAAEY,KAAK,EAAEC,QAAQ,CAAE,GAAG,IAAAC,uBAAa,EACxC,UAAU,EACV,UAAU,EACV,OAAO,EACPd,GACD,CAAC;EAED,MAAMe,UAAU,GAAG,IAAAC,0BAAa,EAAE;IACjCC,SAAS,EAAE;EACZ,CAAE,CAAC;EAEH,MAAMC,gBAAgB,GAAG,IAAAC,gCAAmB,EAAEJ,UAAU,EAAE;IACzDK,KAAK,EAAEb,MAAM;IACbC,OAAO;IACPC,QAAQ;IACRY,cAAc,EAAEd,MAAM,EAAEe,MAAM,GAC3BC,SAAS,GACTC,wBAAW,CAACC;EAChB,CAAE,CAAC;EAEH,IAAKxB,kBAAkB,EAAG;IACzB,OACC,IAAAyB,QAAA,CAAAC,aAAA;MAAA,GAAUZ;IAAU,GACnB,IAAAW,QAAA,CAAAC,aAAA,EAAC9B,YAAA,CAAA+B,OAAO,QACL,IAAAC,QAAE,EAAE,yCAA0C,CACxC,CACL,CAAC;EAER;EAEA,IAAKvB,SAAS,EAAG;IAChB,OACC,IAAAoB,QAAA,CAAAC,aAAA;MAAA,GAAUZ;IAAU,GACnB,IAAAW,QAAA,CAAAC,aAAA,EAAC9B,YAAA,CAAA+B,OAAO,QACL,IAAAC,QAAE,EAAE,2CAA4C,CAC1C,CACL,CAAC;EAER;EAEA,IAAK,CAAEzB,WAAW,EAAG;IACpB,OACC,IAAAsB,QAAA,CAAAC,aAAA;MAAA,GAAUZ;IAAU,GACnB,IAAAW,QAAA,CAAAC,aAAA,EAAChC,WAAA,CAAAmC,WAAW,QACX,IAAAJ,QAAA,CAAAC,aAAA,EAAChC,WAAA,CAAAoC,OAAO,MAAE,CACE,CACT,CAAC;EAER;EAEA,OACC,IAAAL,QAAA,CAAAC,aAAA,EAAC9B,YAAA,CAAAmC,+BAAiB;IAACC,QAAQ,EAAGjC;EAAK,GAClC,IAAA0B,QAAA,CAAAC,aAAA,EAAC9B,YAAA,CAAAqC,iBAAiB,QACjB,IAAAR,QAAA,CAAAC,aAAA,EAAChC,WAAA,CAAAwC,SAAS,QACT,IAAAT,QAAA,CAAAC,aAAA,EAAChC,WAAA,CAAAyC,WAAW;IACXC,uBAAuB;IACvBC,KAAK,EAAG,IAAAT,QAAE,EAAE,MAAO,CAAG;IACtBT,KAAK,EAAGR,KAAO;IACfH,QAAQ,EAAGI;EAAU,CACrB,CACS,CACO,CAAC,EACpB,IAAAa,QAAA,CAAAC,aAAA;IAAA,GAAUT;EAAgB,CAAI,CACZ,CAAC;AAEtB"}