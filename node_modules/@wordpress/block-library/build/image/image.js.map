{"version":3,"names":["_element","require","_blob","_components","_compose","_data","_blockEditor","_i18n","_url","_blocks","_icons","_notices","_coreData","_lockUnlock","_util","_useClientWidth","_interopRequireDefault","_edit","_constants","_utils","DimensionsTool","ResolutionTool","unlock","blockEditorPrivateApis","scaleOptions","value","label","_x","help","__","Image","temporaryURL","attributes","setAttributes","isSelected","insertBlocksAfter","onReplace","onSelectImage","onSelectURL","onUploadError","containerRef","context","clientId","blockEditingMode","url","alt","caption","align","id","href","rel","linkClass","linkDestination","title","width","height","aspectRatio","scale","linkTarget","sizeSlug","numericWidth","parseInt","undefined","numericHeight","imageRef","useRef","prevCaption","usePrevious","showCaption","setShowCaption","useState","allowResize","getBlock","useSelect","blockEditorStore","image","multiImageSelection","select","getMedia","coreStore","getMultiSelectedBlockClientIds","getBlockName","multiSelectedClientIds","length","every","_clientId","canInsertCover","imageEditing","imageSizes","maxWidth","mediaUpload","getBlockRootClientId","getSettings","canInsertBlockType","rootClientId","settings","replaceBlocks","toggleSelection","useDispatch","createErrorNotice","createSuccessNotice","noticesStore","isLargeViewport","useViewportMatch","isWideAligned","includes","loadedNaturalWidth","loadedNaturalHeight","setLoadedNaturalSize","isEditingImage","setIsEditingImage","externalBlob","setExternalBlob","clientWidth","useClientWidth","hasNonContentControls","isResizable","imageSizeOptions","filter","slug","media_details","sizes","source_url","map","name","canUploadMedia","useEffect","isExternalImage","window","fetch","then","response","blob","catch","captionRef","useCallback","node","focus","naturalWidth","naturalHeight","useMemo","current","complete","onResizeStart","onResizeStop","onImageError","embedBlock","createUpgradedEmbedBlock","onSetHref","props","onSetTitle","updateAlt","newAlt","updateImage","newSizeSlug","newUrl","uploadExternal","filesList","onFileChange","img","isBlobURL","type","allowedTypes","ALLOWED_MEDIA_TYPES","onError","message","updateAlignment","nextAlign","extraUpdatedAttributes","canEditImage","allowCrop","switchToCover","switchToBlockType","dimensionsUnitsOptions","useCustomUnits","availableUnits","controls","createElement","Fragment","BlockControls","group","BlockAlignmentControl","onChange","ToolbarButton","onClick","icon","captionIcon","isPressed","__experimentalImageURLInputUI","onChangeUrl","mediaUrl","mediaLink","link","crop","overlayText","MediaReplaceFlow","mediaId","mediaURL","accept","onSelect","ToolbarGroup","upload","InspectorControls","__experimentalToolsPanel","resetAll","__experimentalToolsPanelItem","isShownByDefault","hasValue","onDeselect","TextareaControl","ExternalLink","__nextHasNoMarginBottom","newWidth","newHeight","newScale","newAspectRatio","defaultScale","defaultAspectRatio","unitsOptions","options","TextControl","filename","getFilename","defaultedAlt","sprintf","borderProps","useBorderProps","isRounded","className","src","onLoad","event","target","ref","style","objectFit","Spinner","fallbackClientWidth","__experimentalImageEditor","onSaveImage","imageAttributes","onFinishEditing","numericRatio","evalAspectRatio","customRatio","naturalRatio","ratio","currentWidth","currentHeight","minWidth","MIN_SIZE","minHeight","maxWidthBuffer","showRightHandle","showLeftHandle","isRTL","ResizableBox","display","size","showHandle","maxHeight","lockAspectRatio","enable","top","right","bottom","left","direction","elt","offsetWidth","String","resizeRatio","RichText","isEmpty","identifier","__experimentalGetElementClassName","tagName","placeholder","inlineToolbar","__unstableOnSplitAtEnd","createBlock","getDefaultBlockName"],"sources":["@wordpress/block-library/src/image/image.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { isBlobURL } from '@wordpress/blob';\nimport {\n\tExternalLink,\n\tResizableBox,\n\tSpinner,\n\tTextareaControl,\n\tTextControl,\n\tToolbarButton,\n\tToolbarGroup,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalUseCustomUnits as useCustomUnits,\n} from '@wordpress/components';\nimport { useViewportMatch, usePrevious } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tBlockControls,\n\tInspectorControls,\n\tRichText,\n\t__experimentalImageURLInputUI as ImageURLInputUI,\n\tMediaReplaceFlow,\n\tstore as blockEditorStore,\n\tBlockAlignmentControl,\n\t__experimentalImageEditor as ImageEditor,\n\t__experimentalGetElementClassName,\n\t__experimentalUseBorderProps as useBorderProps,\n\tprivateApis as blockEditorPrivateApis,\n} from '@wordpress/block-editor';\nimport {\n\tuseEffect,\n\tuseMemo,\n\tuseState,\n\tuseRef,\n\tuseCallback,\n} from '@wordpress/element';\nimport { __, _x, sprintf, isRTL } from '@wordpress/i18n';\nimport { getFilename } from '@wordpress/url';\nimport {\n\tcreateBlock,\n\tgetDefaultBlockName,\n\tswitchToBlockType,\n} from '@wordpress/blocks';\nimport {\n\tcrop,\n\toverlayText,\n\tupload,\n\tcaption as captionIcon,\n} from '@wordpress/icons';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../lock-unlock';\nimport { createUpgradedEmbedBlock } from '../embed/util';\nimport useClientWidth from './use-client-width';\nimport { isExternalImage } from './edit';\n\n/**\n * Module constants\n */\nimport { MIN_SIZE, ALLOWED_MEDIA_TYPES } from './constants';\nimport { evalAspectRatio } from './utils';\n\nconst { DimensionsTool, ResolutionTool } = unlock( blockEditorPrivateApis );\n\nconst scaleOptions = [\n\t{\n\t\tvalue: 'cover',\n\t\tlabel: _x( 'Cover', 'Scale option for dimensions control' ),\n\t\thelp: __( 'Image covers the space evenly.' ),\n\t},\n\t{\n\t\tvalue: 'contain',\n\t\tlabel: _x( 'Contain', 'Scale option for dimensions control' ),\n\t\thelp: __( 'Image is contained without distortion.' ),\n\t},\n];\n\nexport default function Image( {\n\ttemporaryURL,\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tinsertBlocksAfter,\n\tonReplace,\n\tonSelectImage,\n\tonSelectURL,\n\tonUploadError,\n\tcontainerRef,\n\tcontext,\n\tclientId,\n\tblockEditingMode,\n} ) {\n\tconst {\n\t\turl = '',\n\t\talt,\n\t\tcaption,\n\t\talign,\n\t\tid,\n\t\thref,\n\t\trel,\n\t\tlinkClass,\n\t\tlinkDestination,\n\t\ttitle,\n\t\twidth,\n\t\theight,\n\t\taspectRatio,\n\t\tscale,\n\t\tlinkTarget,\n\t\tsizeSlug,\n\t} = attributes;\n\n\t// The only supported unit is px, so we can parseInt to strip the px here.\n\tconst numericWidth = width ? parseInt( width, 10 ) : undefined;\n\tconst numericHeight = height ? parseInt( height, 10 ) : undefined;\n\n\tconst imageRef = useRef();\n\tconst prevCaption = usePrevious( caption );\n\tconst [ showCaption, setShowCaption ] = useState( !! caption );\n\tconst { allowResize = true } = context;\n\tconst { getBlock } = useSelect( blockEditorStore );\n\n\tconst { image, multiImageSelection } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getMedia } = select( coreStore );\n\t\t\tconst { getMultiSelectedBlockClientIds, getBlockName } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst multiSelectedClientIds = getMultiSelectedBlockClientIds();\n\t\t\treturn {\n\t\t\t\timage:\n\t\t\t\t\tid && isSelected\n\t\t\t\t\t\t? getMedia( id, { context: 'view' } )\n\t\t\t\t\t\t: null,\n\t\t\t\tmultiImageSelection:\n\t\t\t\t\tmultiSelectedClientIds.length &&\n\t\t\t\t\tmultiSelectedClientIds.every(\n\t\t\t\t\t\t( _clientId ) =>\n\t\t\t\t\t\t\tgetBlockName( _clientId ) === 'core/image'\n\t\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ id, isSelected ]\n\t);\n\tconst { canInsertCover, imageEditing, imageSizes, maxWidth, mediaUpload } =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\tgetSettings,\n\t\t\t\t\tcanInsertBlockType,\n\t\t\t\t} = select( blockEditorStore );\n\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\t\tconst settings = getSettings();\n\n\t\t\t\treturn {\n\t\t\t\t\timageEditing: settings.imageEditing,\n\t\t\t\t\timageSizes: settings.imageSizes,\n\t\t\t\t\tmaxWidth: settings.maxWidth,\n\t\t\t\t\tmediaUpload: settings.mediaUpload,\n\t\t\t\t\tcanInsertCover: canInsertBlockType(\n\t\t\t\t\t\t'core/cover',\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientId ]\n\t\t);\n\tconst { replaceBlocks, toggleSelection } = useDispatch( blockEditorStore );\n\tconst { createErrorNotice, createSuccessNotice } =\n\t\tuseDispatch( noticesStore );\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst isWideAligned = [ 'wide', 'full' ].includes( align );\n\tconst [\n\t\t{ loadedNaturalWidth, loadedNaturalHeight },\n\t\tsetLoadedNaturalSize,\n\t] = useState( {} );\n\tconst [ isEditingImage, setIsEditingImage ] = useState( false );\n\tconst [ externalBlob, setExternalBlob ] = useState();\n\tconst clientWidth = useClientWidth( containerRef, [ align ] );\n\tconst hasNonContentControls = blockEditingMode === 'default';\n\tconst isResizable =\n\t\tallowResize &&\n\t\thasNonContentControls &&\n\t\t! ( isWideAligned && isLargeViewport );\n\tconst imageSizeOptions = imageSizes\n\t\t.filter(\n\t\t\t( { slug } ) => image?.media_details?.sizes?.[ slug ]?.source_url\n\t\t)\n\t\t.map( ( { name, slug } ) => ( { value: slug, label: name } ) );\n\tconst canUploadMedia = !! mediaUpload;\n\n\t// If an image is externally hosted, try to fetch the image data. This may\n\t// fail if the image host doesn't allow CORS with the domain. If it works,\n\t// we can enable a button in the toolbar to upload the image.\n\tuseEffect( () => {\n\t\tif (\n\t\t\t! isExternalImage( id, url ) ||\n\t\t\t! isSelected ||\n\t\t\t! canUploadMedia\n\t\t) {\n\t\t\tsetExternalBlob();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( externalBlob ) return;\n\n\t\twindow\n\t\t\t// Avoid cache, which seems to help avoid CORS problems.\n\t\t\t.fetch( url.includes( '?' ) ? url : url + '?' )\n\t\t\t.then( ( response ) => response.blob() )\n\t\t\t.then( ( blob ) => setExternalBlob( blob ) )\n\t\t\t// Do nothing, cannot upload.\n\t\t\t.catch( () => {} );\n\t}, [ id, url, isSelected, externalBlob, canUploadMedia ] );\n\n\t// We need to show the caption when changes come from\n\t// history navigation(undo/redo).\n\tuseEffect( () => {\n\t\tif ( caption && ! prevCaption ) {\n\t\t\tsetShowCaption( true );\n\t\t}\n\t}, [ caption, prevCaption ] );\n\n\t// Focus the caption when we click to add one.\n\tconst captionRef = useCallback(\n\t\t( node ) => {\n\t\t\tif ( node && ! caption ) {\n\t\t\t\tnode.focus();\n\t\t\t}\n\t\t},\n\t\t[ caption ]\n\t);\n\n\t// Get naturalWidth and naturalHeight from image ref, and fall back to loaded natural\n\t// width and height. This resolves an issue in Safari where the loaded natural\n\t// width and height is otherwise lost when switching between alignments.\n\t// See: https://github.com/WordPress/gutenberg/pull/37210.\n\tconst { naturalWidth, naturalHeight } = useMemo( () => {\n\t\treturn {\n\t\t\tnaturalWidth:\n\t\t\t\timageRef.current?.naturalWidth ||\n\t\t\t\tloadedNaturalWidth ||\n\t\t\t\tundefined,\n\t\t\tnaturalHeight:\n\t\t\t\timageRef.current?.naturalHeight ||\n\t\t\t\tloadedNaturalHeight ||\n\t\t\t\tundefined,\n\t\t};\n\t}, [\n\t\tloadedNaturalWidth,\n\t\tloadedNaturalHeight,\n\t\timageRef.current?.complete,\n\t] );\n\n\tfunction onResizeStart() {\n\t\ttoggleSelection( false );\n\t}\n\n\tfunction onResizeStop() {\n\t\ttoggleSelection( true );\n\t}\n\n\tfunction onImageError() {\n\t\t// Check if there's an embed block that handles this URL, e.g., instagram URL.\n\t\t// See: https://github.com/WordPress/gutenberg/pull/11472\n\t\tconst embedBlock = createUpgradedEmbedBlock( { attributes: { url } } );\n\n\t\tif ( undefined !== embedBlock ) {\n\t\t\tonReplace( embedBlock );\n\t\t}\n\t}\n\n\tfunction onSetHref( props ) {\n\t\tsetAttributes( props );\n\t}\n\n\tfunction onSetTitle( value ) {\n\t\t// This is the HTML title attribute, separate from the media object\n\t\t// title.\n\t\tsetAttributes( { title: value } );\n\t}\n\n\tfunction updateAlt( newAlt ) {\n\t\tsetAttributes( { alt: newAlt } );\n\t}\n\n\tfunction updateImage( newSizeSlug ) {\n\t\tconst newUrl = image?.media_details?.sizes?.[ newSizeSlug ]?.source_url;\n\t\tif ( ! newUrl ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\turl: newUrl,\n\t\t\tsizeSlug: newSizeSlug,\n\t\t} );\n\t}\n\n\tfunction uploadExternal() {\n\t\tmediaUpload( {\n\t\t\tfilesList: [ externalBlob ],\n\t\t\tonFileChange( [ img ] ) {\n\t\t\t\tonSelectImage( img );\n\n\t\t\t\tif ( isBlobURL( img.url ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetExternalBlob();\n\t\t\t\tcreateSuccessNotice( __( 'Image uploaded.' ), {\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t} );\n\t\t\t},\n\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\tonError( message ) {\n\t\t\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t\t\t},\n\t\t} );\n\t}\n\n\tfunction updateAlignment( nextAlign ) {\n\t\tconst extraUpdatedAttributes = [ 'wide', 'full' ].includes( nextAlign )\n\t\t\t? {\n\t\t\t\t\twidth: undefined,\n\t\t\t\t\theight: undefined,\n\t\t\t\t\taspectRatio: undefined,\n\t\t\t\t\tscale: undefined,\n\t\t\t  }\n\t\t\t: {};\n\t\tsetAttributes( {\n\t\t\t...extraUpdatedAttributes,\n\t\t\talign: nextAlign,\n\t\t} );\n\t}\n\n\tuseEffect( () => {\n\t\tif ( ! isSelected ) {\n\t\t\tsetIsEditingImage( false );\n\t\t\tif ( ! caption ) {\n\t\t\t\tsetShowCaption( false );\n\t\t\t}\n\t\t}\n\t}, [ isSelected, caption ] );\n\n\tconst canEditImage = id && naturalWidth && naturalHeight && imageEditing;\n\tconst allowCrop = ! multiImageSelection && canEditImage && ! isEditingImage;\n\n\tfunction switchToCover() {\n\t\treplaceBlocks(\n\t\t\tclientId,\n\t\t\tswitchToBlockType( getBlock( clientId ), 'core/cover' )\n\t\t);\n\t}\n\n\t// TODO: Can allow more units after figuring out how they should interact\n\t// with the ResizableBox and ImageEditor components. Calculations later on\n\t// for those components are currently assuming px units.\n\tconst dimensionsUnitsOptions = useCustomUnits( {\n\t\tavailableUnits: [ 'px' ],\n\t} );\n\n\tconst controls = (\n\t\t<>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t{ hasNonContentControls && (\n\t\t\t\t\t<BlockAlignmentControl\n\t\t\t\t\t\tvalue={ align }\n\t\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ hasNonContentControls && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tsetShowCaption( ! showCaption );\n\t\t\t\t\t\t\tif ( showCaption && caption ) {\n\t\t\t\t\t\t\t\tsetAttributes( { caption: undefined } );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ticon={ captionIcon }\n\t\t\t\t\t\tisPressed={ showCaption }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tshowCaption\n\t\t\t\t\t\t\t\t? __( 'Remove caption' )\n\t\t\t\t\t\t\t\t: __( 'Add caption' )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! multiImageSelection && ! isEditingImage && (\n\t\t\t\t\t<ImageURLInputUI\n\t\t\t\t\t\turl={ href || '' }\n\t\t\t\t\t\tonChangeUrl={ onSetHref }\n\t\t\t\t\t\tlinkDestination={ linkDestination }\n\t\t\t\t\t\tmediaUrl={ ( image && image.source_url ) || url }\n\t\t\t\t\t\tmediaLink={ image && image.link }\n\t\t\t\t\t\tlinkTarget={ linkTarget }\n\t\t\t\t\t\tlinkClass={ linkClass }\n\t\t\t\t\t\trel={ rel }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ allowCrop && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tonClick={ () => setIsEditingImage( true ) }\n\t\t\t\t\t\ticon={ crop }\n\t\t\t\t\t\tlabel={ __( 'Crop' ) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! multiImageSelection && canInsertCover && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ticon={ overlayText }\n\t\t\t\t\t\tlabel={ __( 'Add text over image' ) }\n\t\t\t\t\t\tonClick={ switchToCover }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t\t{ ! multiImageSelection && ! isEditingImage && (\n\t\t\t\t<BlockControls group=\"other\">\n\t\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tmediaURL={ url }\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\tonSelect={ onSelectImage }\n\t\t\t\t\t\tonSelectURL={ onSelectURL }\n\t\t\t\t\t\tonError={ onUploadError }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t{ ! multiImageSelection && externalBlob && (\n\t\t\t\t<BlockControls>\n\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\tonClick={ uploadExternal }\n\t\t\t\t\t\t\ticon={ upload }\n\t\t\t\t\t\t\tlabel={ __( 'Upload external image' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t</BlockControls>\n\t\t\t) }\n\t\t\t<InspectorControls>\n\t\t\t\t<ToolsPanel\n\t\t\t\t\tlabel={ __( 'Settings' ) }\n\t\t\t\t\tresetAll={ () =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\twidth: undefined,\n\t\t\t\t\t\t\theight: undefined,\n\t\t\t\t\t\t\tscale: undefined,\n\t\t\t\t\t\t\taspectRatio: undefined,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ ! multiImageSelection && (\n\t\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\t\tlabel={ __( 'Alternative text' ) }\n\t\t\t\t\t\t\tisShownByDefault={ true }\n\t\t\t\t\t\t\thasValue={ () => alt !== '' }\n\t\t\t\t\t\t\tonDeselect={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { alt: undefined } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Alternative text' ) }\n\t\t\t\t\t\t\t\tvalue={ alt }\n\t\t\t\t\t\t\t\tonChange={ updateAlt }\n\t\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<ExternalLink href=\"https://www.w3.org/WAI/tutorials/images/decision-tree\">\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Describe the purpose of the image.'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t{ __( 'Leave empty if decorative.' ) }\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t\t) }\n\t\t\t\t\t{ isResizable && (\n\t\t\t\t\t\t<DimensionsTool\n\t\t\t\t\t\t\tvalue={ { width, height, scale, aspectRatio } }\n\t\t\t\t\t\t\tonChange={ ( {\n\t\t\t\t\t\t\t\twidth: newWidth,\n\t\t\t\t\t\t\t\theight: newHeight,\n\t\t\t\t\t\t\t\tscale: newScale,\n\t\t\t\t\t\t\t\taspectRatio: newAspectRatio,\n\t\t\t\t\t\t\t} ) => {\n\t\t\t\t\t\t\t\t// Rebuilding the object forces setting `undefined`\n\t\t\t\t\t\t\t\t// for values that are removed since setAttributes\n\t\t\t\t\t\t\t\t// doesn't do anything with keys that aren't set.\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t// CSS includes `height: auto`, but we need\n\t\t\t\t\t\t\t\t\t// `width: auto` to fix the aspect ratio when\n\t\t\t\t\t\t\t\t\t// only height is set due to the width and\n\t\t\t\t\t\t\t\t\t// height attributes set via the server.\n\t\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\t\t! newWidth && newHeight\n\t\t\t\t\t\t\t\t\t\t\t? 'auto'\n\t\t\t\t\t\t\t\t\t\t\t: newWidth,\n\t\t\t\t\t\t\t\t\theight: newHeight,\n\t\t\t\t\t\t\t\t\tscale: newScale,\n\t\t\t\t\t\t\t\t\taspectRatio: newAspectRatio,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tdefaultScale=\"cover\"\n\t\t\t\t\t\t\tdefaultAspectRatio=\"auto\"\n\t\t\t\t\t\t\tscaleOptions={ scaleOptions }\n\t\t\t\t\t\t\tunitsOptions={ dimensionsUnitsOptions }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<ResolutionTool\n\t\t\t\t\t\tvalue={ sizeSlug }\n\t\t\t\t\t\tonChange={ updateImage }\n\t\t\t\t\t\toptions={ imageSizeOptions }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanel>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorControls group=\"advanced\">\n\t\t\t\t<TextControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Title attribute' ) }\n\t\t\t\t\tvalue={ title || '' }\n\t\t\t\t\tonChange={ onSetTitle }\n\t\t\t\t\thelp={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Describe the role of this image on the page.'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<ExternalLink href=\"https://www.w3.org/TR/html52/dom.html#the-title-attribute\">\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'(Note: many devices and browsers do not display this text.)'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</InspectorControls>\n\t\t</>\n\t);\n\n\tconst filename = getFilename( url );\n\tlet defaultedAlt;\n\n\tif ( alt ) {\n\t\tdefaultedAlt = alt;\n\t} else if ( filename ) {\n\t\tdefaultedAlt = sprintf(\n\t\t\t/* translators: %s: file name */\n\t\t\t__( 'This image has an empty alt attribute; its file name is %s' ),\n\t\t\tfilename\n\t\t);\n\t} else {\n\t\tdefaultedAlt = __( 'This image has an empty alt attribute' );\n\t}\n\n\tconst borderProps = useBorderProps( attributes );\n\tconst isRounded = attributes.className?.includes( 'is-style-rounded' );\n\n\tlet img = (\n\t\t// Disable reason: Image itself is not meant to be interactive, but\n\t\t// should direct focus to block.\n\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t<>\n\t\t\t<img\n\t\t\t\tsrc={ temporaryURL || url }\n\t\t\t\talt={ defaultedAlt }\n\t\t\t\tonError={ () => onImageError() }\n\t\t\t\tonLoad={ ( event ) => {\n\t\t\t\t\tsetLoadedNaturalSize( {\n\t\t\t\t\t\tloadedNaturalWidth: event.target?.naturalWidth,\n\t\t\t\t\t\tloadedNaturalHeight: event.target?.naturalHeight,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tref={ imageRef }\n\t\t\t\tclassName={ borderProps.className }\n\t\t\t\tstyle={ {\n\t\t\t\t\twidth:\n\t\t\t\t\t\t( width && height ) || aspectRatio ? '100%' : undefined,\n\t\t\t\t\theight:\n\t\t\t\t\t\t( width && height ) || aspectRatio ? '100%' : undefined,\n\t\t\t\t\tobjectFit: scale,\n\t\t\t\t\t...borderProps.style,\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ temporaryURL && <Spinner /> }\n\t\t</>\n\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t);\n\n\t// clientWidth needs to be a number for the image Cropper to work, but sometimes it's 0\n\t// So we try using the imageRef width first and fallback to clientWidth.\n\tconst fallbackClientWidth = imageRef.current?.width || clientWidth;\n\n\tif ( canEditImage && isEditingImage ) {\n\t\timg = (\n\t\t\t<ImageEditor\n\t\t\t\tid={ id }\n\t\t\t\turl={ url }\n\t\t\t\twidth={ numericWidth }\n\t\t\t\theight={ numericHeight }\n\t\t\t\tclientWidth={ fallbackClientWidth }\n\t\t\t\tnaturalHeight={ naturalHeight }\n\t\t\t\tnaturalWidth={ naturalWidth }\n\t\t\t\tonSaveImage={ ( imageAttributes ) =>\n\t\t\t\t\tsetAttributes( imageAttributes )\n\t\t\t\t}\n\t\t\t\tonFinishEditing={ () => {\n\t\t\t\t\tsetIsEditingImage( false );\n\t\t\t\t} }\n\t\t\t\tborderProps={ isRounded ? undefined : borderProps }\n\t\t\t/>\n\t\t);\n\t} else if ( ! isResizable ) {\n\t\timg = <div style={ { width, height, aspectRatio } }>{ img }</div>;\n\t} else {\n\t\tconst numericRatio = aspectRatio && evalAspectRatio( aspectRatio );\n\t\tconst customRatio = numericWidth / numericHeight;\n\t\tconst naturalRatio = naturalWidth / naturalHeight;\n\t\tconst ratio = numericRatio || customRatio || naturalRatio || 1;\n\t\tconst currentWidth =\n\t\t\t! numericWidth && numericHeight\n\t\t\t\t? numericHeight * ratio\n\t\t\t\t: numericWidth;\n\t\tconst currentHeight =\n\t\t\t! numericHeight && numericWidth\n\t\t\t\t? numericWidth / ratio\n\t\t\t\t: numericHeight;\n\n\t\tconst minWidth =\n\t\t\tnaturalWidth < naturalHeight ? MIN_SIZE : MIN_SIZE * ratio;\n\t\tconst minHeight =\n\t\t\tnaturalHeight < naturalWidth ? MIN_SIZE : MIN_SIZE / ratio;\n\n\t\t// With the current implementation of ResizableBox, an image needs an\n\t\t// explicit pixel value for the max-width. In absence of being able to\n\t\t// set the content-width, this max-width is currently dictated by the\n\t\t// vanilla editor style. The following variable adds a buffer to this\n\t\t// vanilla style, so 3rd party themes have some wiggleroom. This does,\n\t\t// in most cases, allow you to scale the image beyond the width of the\n\t\t// main column, though not infinitely.\n\t\t// @todo It would be good to revisit this once a content-width variable\n\t\t// becomes available.\n\t\tconst maxWidthBuffer = maxWidth * 2.5;\n\n\t\tlet showRightHandle = false;\n\t\tlet showLeftHandle = false;\n\n\t\t/* eslint-disable no-lonely-if */\n\t\t// See https://github.com/WordPress/gutenberg/issues/7584.\n\t\tif ( align === 'center' ) {\n\t\t\t// When the image is centered, show both handles.\n\t\t\tshowRightHandle = true;\n\t\t\tshowLeftHandle = true;\n\t\t} else if ( isRTL() ) {\n\t\t\t// In RTL mode the image is on the right by default.\n\t\t\t// Show the right handle and hide the left handle only when it is\n\t\t\t// aligned left. Otherwise always show the left handle.\n\t\t\tif ( align === 'left' ) {\n\t\t\t\tshowRightHandle = true;\n\t\t\t} else {\n\t\t\t\tshowLeftHandle = true;\n\t\t\t}\n\t\t} else {\n\t\t\t// Show the left handle and hide the right handle only when the\n\t\t\t// image is aligned right. Otherwise always show the right handle.\n\t\t\tif ( align === 'right' ) {\n\t\t\t\tshowLeftHandle = true;\n\t\t\t} else {\n\t\t\t\tshowRightHandle = true;\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable no-lonely-if */\n\n\t\timg = (\n\t\t\t<ResizableBox\n\t\t\t\tstyle={ {\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tobjectFit: scale,\n\t\t\t\t\taspectRatio:\n\t\t\t\t\t\t! width && ! height && aspectRatio\n\t\t\t\t\t\t\t? aspectRatio\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t} }\n\t\t\t\tsize={ {\n\t\t\t\t\twidth: currentWidth ?? 'auto',\n\t\t\t\t\theight: currentHeight ?? 'auto',\n\t\t\t\t} }\n\t\t\t\tshowHandle={ isSelected }\n\t\t\t\tminWidth={ minWidth }\n\t\t\t\tmaxWidth={ maxWidthBuffer }\n\t\t\t\tminHeight={ minHeight }\n\t\t\t\tmaxHeight={ maxWidthBuffer / ratio }\n\t\t\t\tlockAspectRatio={ ratio }\n\t\t\t\tenable={ {\n\t\t\t\t\ttop: false,\n\t\t\t\t\tright: showRightHandle,\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tleft: showLeftHandle,\n\t\t\t\t} }\n\t\t\t\tonResizeStart={ onResizeStart }\n\t\t\t\tonResizeStop={ ( event, direction, elt ) => {\n\t\t\t\t\tonResizeStop();\n\t\t\t\t\t// Since the aspect ratio is locked when resizing, we can\n\t\t\t\t\t// use the width of the resized element to calculate the\n\t\t\t\t\t// height in CSS to prevent stretching when the max-width\n\t\t\t\t\t// is reached.\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\twidth: `${ elt.offsetWidth }px`,\n\t\t\t\t\t\theight: 'auto',\n\t\t\t\t\t\taspectRatio:\n\t\t\t\t\t\t\tratio === naturalRatio\n\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t: String( ratio ),\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tresizeRatio={ align === 'center' ? 2 : 1 }\n\t\t\t>\n\t\t\t\t{ img }\n\t\t\t</ResizableBox>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ /* Hide controls during upload to avoid component remount,\n\t\t\t\twhich causes duplicated image upload. */ }\n\t\t\t{ ! temporaryURL && controls }\n\t\t\t{ img }\n\t\t\t{ showCaption &&\n\t\t\t\t( ! RichText.isEmpty( caption ) || isSelected ) && (\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tidentifier=\"caption\"\n\t\t\t\t\t\tclassName={ __experimentalGetElementClassName(\n\t\t\t\t\t\t\t'caption'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tref={ captionRef }\n\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\taria-label={ __( 'Image caption text' ) }\n\t\t\t\t\t\tplaceholder={ __( 'Add caption' ) }\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { caption: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\t\t\tinsertBlocksAfter(\n\t\t\t\t\t\t\t\tcreateBlock( getDefaultBlockName() )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":"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"}