{"version":3,"names":["_element","require","_reactNative","_clipboard","_interopRequireDefault","_reactNativeBridge","_blockEditor","_components","_icons","_i18n","_compose","_data","_url","_coreData","_style","URL_COPIED_NOTIFICATION_DURATION_MS","MIN_WIDTH","FileEdit","Component","constructor","props","state","isUploadInProgress","isSidebarLinkSettings","placeholderTextWidth","maxWidth","timerRef","onLayout","bind","onSelectFile","onChangeFileName","onChangeDownloadButtonText","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","getFileComponent","onChangeDownloadButtonVisibility","onCopyURL","onChangeOpenInNewWindow","onChangeLinkDestinationOption","onShowLinkSettings","onFilePressed","mediaUploadStateReset","componentDidMount","attributes","setAttributes","downloadButtonText","undefined","_x","id","url","getProtocol","mediaUploadSync","componentWillUnmount","clearTimeout","componentDidUpdate","prevProps","isSidebarOpened","setState","media","href","fileName","title","textLinkHref","showDownloadButton","newHref","isUrlCopied","Clipboard","setString","setTimeout","newValue","textLinkTarget","payload","mediaUrl","mediaServerId","mediaId","openSidebar","getToolbarEditButton","open","createElement","BlockControls","ToolbarGroup","ToolbarButton","__","icon","replace","onClick","link","getInspectorControls","isUploadFailed","linkDestinationOptions","value","label","attachmentPage","actionButtonStyle","getStylesFromColorScheme","styles","actionButton","actionButtonDark","isCopyUrlDisabled","dimmedActionButtonStyle","dimmedActionButton","dimmedActionButtonDark","finalButtonStyle","InspectorControls","PanelBody","SelectControl","onChange","options","hideCancelButton","ToggleControl","external","checked","button","TextControl","disabled","labelStyle","onPress","getStyleForAlignment","align","getFlexAlign","alignment","alignSelf","getTextAlignmentForAlignment","requestImageUploadCancelDialog","requestImageFailedRetryDialog","nativeEvent","width","layout","paddingLeft","paddingRight","defaultButton","getPlaceholderWidth","placeholderText","Text","style","placeholder","onTextLayout","textWidth","lines","Math","min","openMediaOptions","getMediaOptions","isSelected","isButtonFocused","minWidth","MediaUploadProgress","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","renderContent","dimmedStyle","disabledButton","errorIconStyle","Object","assign","errorIcon","uploadFailed","TouchableWithoutFeedback","accessible","View","testID","container","RichText","withoutInteractiveFormatting","__unstableMobileNoFocusOnMount","tagName","underlineColorAndroid","deleteEnter","textAlign","errorContainer","Icon","warning","PlainText","editable","buttonText","unstableOnFocus","onBlur","selectionColor","color","placeholderTextColor","render","wasBlockJustInserted","MediaPlaceholder","BlockIcon","labels","instructions","onSelect","onFocus","allowedTypes","MEDIA_TYPE_ANY","autoOpenMediaUpload","MediaUpload","isReplacingMedia","exports","_default","compose","withSelect","select","clientId","isEditorSidebarOpened","isNotFileHref","coreStore","getMedia","blockEditorStore","withDispatch","dispatch","openGeneralSidebar","withPreferredColorScheme","default"],"sources":["@wordpress/block-library/src/file/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport {\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaUploadProgress,\n\tRichText,\n\tPlainText,\n\tBlockControls,\n\tMediaUpload,\n\tInspectorControls,\n\tMEDIA_TYPE_ANY,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n\tToggleControl,\n\tTextControl,\n\tSelectControl,\n\tIcon,\n} from '@wordpress/components';\nimport {\n\tfile as icon,\n\treplace,\n\tbutton,\n\texternal,\n\tlink,\n\twarning,\n} from '@wordpress/icons';\nimport { Component } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { getProtocol } from '@wordpress/url';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst URL_COPIED_NOTIFICATION_DURATION_MS = 1500;\nconst MIN_WIDTH = 40;\n\nexport class FileEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t\tisSidebarLinkSettings: false,\n\t\t\tplaceholderTextWidth: 0,\n\t\t\tmaxWidth: 0,\n\t\t};\n\n\t\tthis.timerRef = null;\n\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSelectFile = this.onSelectFile.bind( this );\n\t\tthis.onChangeFileName = this.onChangeFileName.bind( this );\n\t\tthis.onChangeDownloadButtonText =\n\t\t\tthis.onChangeDownloadButtonText.bind( this );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.getFileComponent = this.getFileComponent.bind( this );\n\t\tthis.onChangeDownloadButtonVisibility =\n\t\t\tthis.onChangeDownloadButtonVisibility.bind( this );\n\t\tthis.onCopyURL = this.onCopyURL.bind( this );\n\t\tthis.onChangeOpenInNewWindow =\n\t\t\tthis.onChangeOpenInNewWindow.bind( this );\n\n\t\tthis.onChangeLinkDestinationOption =\n\t\t\tthis.onChangeLinkDestinationOption.bind( this );\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onFilePressed = this.onFilePressed.bind( this );\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { downloadButtonText } = attributes;\n\n\t\tif ( downloadButtonText === undefined || downloadButtonText === '' ) {\n\t\t\tsetAttributes( {\n\t\t\t\tdownloadButtonText: _x( 'Download', 'button label' ),\n\t\t\t} );\n\t\t}\n\n\t\tif (\n\t\t\tattributes.id &&\n\t\t\tattributes.url &&\n\t\t\tgetProtocol( attributes.url ) === 'file:'\n\t\t) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timerRef );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tprevProps.isSidebarOpened &&\n\t\t\t! this.props.isSidebarOpened &&\n\t\t\tthis.state.isSidebarLinkSettings\n\t\t) {\n\t\t\tthis.setState( { isSidebarLinkSettings: false } );\n\t\t}\n\t}\n\n\tonSelectFile( media ) {\n\t\tthis.props.setAttributes( {\n\t\t\thref: media.url,\n\t\t\tfileName: media.title,\n\t\t\ttextLinkHref: media.url,\n\t\t\tid: media.id,\n\t\t} );\n\t}\n\n\tonChangeFileName( fileName ) {\n\t\tthis.props.setAttributes( { fileName } );\n\t}\n\n\tonChangeDownloadButtonText( downloadButtonText ) {\n\t\tthis.props.setAttributes( { downloadButtonText } );\n\t}\n\n\tonChangeDownloadButtonVisibility( showDownloadButton ) {\n\t\tthis.props.setAttributes( { showDownloadButton } );\n\t}\n\n\tonChangeLinkDestinationOption( newHref ) {\n\t\t// Choose Media File or Attachment Page (when file is in Media Library)\n\t\tthis.props.setAttributes( { textLinkHref: newHref } );\n\t}\n\n\tonCopyURL() {\n\t\tif ( this.state.isUrlCopied ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { href } = this.props.attributes;\n\t\tClipboard.setString( href );\n\n\t\tthis.setState( { isUrlCopied: true } );\n\t\tthis.timerRef = setTimeout( () => {\n\t\t\tthis.setState( { isUrlCopied: false } );\n\t\t}, URL_COPIED_NOTIFICATION_DURATION_MS );\n\t}\n\n\tonChangeOpenInNewWindow( newValue ) {\n\t\tthis.props.setAttributes( {\n\t\t\ttextLinkTarget: newValue ? '_blank' : false,\n\t\t} );\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\thref: payload.mediaUrl,\n\t\t\tid: payload.mediaServerId,\n\t\t\ttextLinkHref: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.props.setAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tid: null,\n\t\t\thref: null,\n\t\t\ttextLinkHref: null,\n\t\t\tfileName: null,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisSidebarLinkSettings: true,\n\t\t\t},\n\t\t\tthis.props.openSidebar\n\t\t);\n\t}\n\n\tgetToolbarEditButton( open ) {\n\t\treturn (\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Edit file' ) }\n\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Link To' ) }\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t);\n\t}\n\n\tgetInspectorControls(\n\t\t{ showDownloadButton, textLinkTarget, href, textLinkHref },\n\t\tmedia,\n\t\tisUploadInProgress,\n\t\tisUploadFailed\n\t) {\n\t\tlet linkDestinationOptions = [ { value: href, label: __( 'URL' ) } ];\n\t\tconst attachmentPage = media && media.link;\n\t\tconst { isSidebarLinkSettings } = this.state;\n\n\t\tif ( attachmentPage ) {\n\t\t\tlinkDestinationOptions = [\n\t\t\t\t{ value: href, label: __( 'Media file' ) },\n\t\t\t\t{ value: attachmentPage, label: __( 'Attachment page' ) },\n\t\t\t];\n\t\t}\n\n\t\tconst actionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.actionButton,\n\t\t\tstyles.actionButtonDark\n\t\t);\n\n\t\tconst isCopyUrlDisabled = isUploadFailed || isUploadInProgress;\n\n\t\tconst dimmedActionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.dimmedActionButton,\n\t\t\tstyles.dimmedActionButtonDark\n\t\t);\n\n\t\tconst finalButtonStyle = isCopyUrlDisabled\n\t\t\t? dimmedActionButtonStyle\n\t\t\t: actionButtonStyle;\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t{ isSidebarLinkSettings || (\n\t\t\t\t\t<PanelBody title={ __( 'File block settings' ) } />\n\t\t\t\t) }\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tlabel={ __( 'Link to' ) }\n\t\t\t\t\t\tvalue={ textLinkHref }\n\t\t\t\t\t\tonChange={ this.onChangeLinkDestinationOption }\n\t\t\t\t\t\toptions={ linkDestinationOptions }\n\t\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\tchecked={ textLinkTarget === '_blank' }\n\t\t\t\t\t\tonChange={ this.onChangeOpenInNewWindow }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isSidebarLinkSettings && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\ticon={ button }\n\t\t\t\t\t\t\tlabel={ __( 'Show download button' ) }\n\t\t\t\t\t\t\tchecked={ showDownloadButton }\n\t\t\t\t\t\t\tonChange={ this.onChangeDownloadButtonVisibility }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tdisabled={ isCopyUrlDisabled }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tthis.state.isUrlCopied\n\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t: __( 'Copy file URL' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabelStyle={\n\t\t\t\t\t\t\tthis.state.isUrlCopied || finalButtonStyle\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonPress={ this.onCopyURL }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\tgetStyleForAlignment( align ) {\n\t\tconst getFlexAlign = ( alignment ) => {\n\t\t\tswitch ( alignment ) {\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'flex-end';\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn 'center';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'flex-start';\n\t\t\t}\n\t\t};\n\t\treturn { alignSelf: getFlexAlign( align ) };\n\t}\n\n\tgetTextAlignmentForAlignment( align ) {\n\t\tswitch ( align ) {\n\t\t\tcase 'right':\n\t\t\t\treturn 'right';\n\t\t\tcase 'center':\n\t\t\t\treturn 'center';\n\t\t\tdefault:\n\t\t\t\treturn 'left';\n\t\t}\n\t}\n\n\tonFilePressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.href ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tconst { paddingLeft, paddingRight } = styles.defaultButton;\n\t\tthis.setState( {\n\t\t\tmaxWidth: width - ( paddingLeft + paddingRight ),\n\t\t} );\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\t// This should be fixed on RNAztec level. In the mean time,\n\t// We use the same strategy implemented in Button block.\n\tgetPlaceholderWidth( placeholderText ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst textWidth =\n\t\t\t\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\t\t\t\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tplaceholderTextWidth: Math.min(\n\t\t\t\t\t\t\t\ttextWidth,\n\t\t\t\t\t\t\t\tmaxWidth\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\tgetFileComponent( openMediaOptions, getMediaOptions ) {\n\t\tconst { attributes, media, isSelected } = this.props;\n\t\tconst { isButtonFocused, placeholderTextWidth } = this.state;\n\n\t\tconst { fileName, downloadButtonText, id, showDownloadButton, align } =\n\t\t\tattributes;\n\n\t\tconst minWidth =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? MIN_WIDTH\n\t\t\t\t: placeholderTextWidth;\n\n\t\tconst placeholderText =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? ''\n\t\t\t\t: __( 'Add text…' );\n\n\t\treturn (\n\t\t\t<MediaUploadProgress\n\t\t\t\tmediaId={ id }\n\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t}\n\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t}\n\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\trenderContent={ ( { isUploadInProgress, isUploadFailed } ) => {\n\t\t\t\t\tconst dimmedStyle =\n\t\t\t\t\t\t( this.state.isUploadInProgress || isUploadFailed ) &&\n\t\t\t\t\t\tstyles.disabledButton;\n\t\t\t\t\tconst finalButtonStyle = [\n\t\t\t\t\t\tstyles.defaultButton,\n\t\t\t\t\t\tdimmedStyle,\n\t\t\t\t\t];\n\n\t\t\t\t\tconst errorIconStyle = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tstyles.errorIcon,\n\t\t\t\t\t\tstyles.uploadFailed\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\t\t\tonPress={ this.onFilePressed }\n\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tonLayout={ this.onLayout }\n\t\t\t\t\t\t\t\ttestID=\"file-edit-container\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t\t\t\t\t{ isUploadInProgress ||\n\t\t\t\t\t\t\t\t\tthis.getToolbarEditButton(\n\t\t\t\t\t\t\t\t\t\topenMediaOptions\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t\t{ isSelected &&\n\t\t\t\t\t\t\t\t\tthis.getInspectorControls(\n\t\t\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\t\t\tmedia,\n\t\t\t\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<View style={ styles.container }>\n\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\tonChange={ this.onChangeFileName }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'File name' ) }\n\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\tvalue={ fileName }\n\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\ttextAlign={ this.getTextAlignmentForAlignment(\n\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<View style={ styles.errorContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ warning }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ errorIconStyle }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<PlainText\n\t\t\t\t\t\t\t\t\t\t\t\teditable={ false }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ __( 'Error' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.uploadFailed }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t{ showDownloadButton &&\n\t\t\t\t\t\t\t\t\tthis.state.maxWidth > 0 && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t\t\t\tfinalButtonStyle,\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getStyleForAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth={ minWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={ this.state.maxWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.buttonText }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ downloadButtonText }\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\t\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.buttonText.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.placeholderTextColor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.onChangeDownloadButtonText\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { attributes, wasBlockJustInserted, isSelected } = this.props;\n\t\tconst { href } = attributes;\n\n\t\tif ( ! href ) {\n\t\t\treturn (\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'File' ),\n\t\t\t\t\t\tinstructions: __( 'CHOOSE A FILE' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\t\tautoOpenMediaUpload={ isSelected && wasBlockJustInserted }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\tisReplacingMedia={ true }\n\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn this.getFileComponent( open, getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { attributes, isSelected, clientId } = props;\n\t\tconst { id, href } = attributes;\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst isNotFileHref = id && getProtocol( href ) !== 'file:';\n\t\treturn {\n\t\t\tmedia: isNotFileHref\n\t\t\t\t? select( coreStore ).getMedia( id )\n\t\t\t\t: undefined,\n\t\t\tisSidebarOpened: isSelected && isEditorSidebarOpened(),\n\t\t\twasBlockJustInserted: select(\n\t\t\t\tblockEditorStore\n\t\t\t).wasBlockJustInserted( clientId, 'inserter_menu' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\topenSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( FileEdit );\n"],"mappings":";;;;;;;AA2CA,IAAAA,QAAA,GAAAC,OAAA;AAxCA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAC,sBAAA,CAAAH,OAAA;AAKA,IAAAI,kBAAA,GAAAJ,OAAA;AAKA,IAAAK,YAAA,GAAAL,OAAA;AAYA,IAAAM,WAAA,GAAAN,OAAA;AASA,IAAAO,MAAA,GAAAP,OAAA;AASA,IAAAQ,KAAA,GAAAR,OAAA;AACA,IAAAS,QAAA,GAAAT,OAAA;AACA,IAAAU,KAAA,GAAAV,OAAA;AACA,IAAAW,IAAA,GAAAX,OAAA;AACA,IAAAY,SAAA,GAAAZ,OAAA;AAKA,IAAAa,MAAA,GAAAV,sBAAA,CAAAH,OAAA;AArDA;AACA;AACA;;AAIA;AACA;AACA;;AA0CA;AACA;AACA;;AAGA,MAAMc,mCAAmC,GAAG,IAAI;AAChD,MAAMC,SAAS,GAAG,EAAE;AAEb,MAAMC,QAAQ,SAASC,kBAAS,CAAC;EACvCC,WAAWA,CAAEC,KAAK,EAAG;IACpB,KAAK,CAAEA,KAAM,CAAC;IAEd,IAAI,CAACC,KAAK,GAAG;MACZC,kBAAkB,EAAE,KAAK;MACzBC,qBAAqB,EAAE,KAAK;MAC5BC,oBAAoB,EAAE,CAAC;MACvBC,QAAQ,EAAE;IACX,CAAC;IAED,IAAI,CAACC,QAAQ,GAAG,IAAI;IAEpB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACC,IAAI,CAAE,IAAK,CAAC;IAC1C,IAAI,CAACC,YAAY,GAAG,IAAI,CAACA,YAAY,CAACD,IAAI,CAAE,IAAK,CAAC;IAClD,IAAI,CAACE,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACF,IAAI,CAAE,IAAK,CAAC;IAC1D,IAAI,CAACG,0BAA0B,GAC9B,IAAI,CAACA,0BAA0B,CAACH,IAAI,CAAE,IAAK,CAAC;IAC7C,IAAI,CAACI,mBAAmB,GAAG,IAAI,CAACA,mBAAmB,CAACJ,IAAI,CAAE,IAAK,CAAC;IAChE,IAAI,CAACK,4BAA4B,GAChC,IAAI,CAACA,4BAA4B,CAACL,IAAI,CAAE,IAAK,CAAC;IAC/C,IAAI,CAACM,4BAA4B,GAChC,IAAI,CAACA,4BAA4B,CAACN,IAAI,CAAE,IAAK,CAAC;IAC/C,IAAI,CAACO,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACP,IAAI,CAAE,IAAK,CAAC;IAC1D,IAAI,CAACQ,gCAAgC,GACpC,IAAI,CAACA,gCAAgC,CAACR,IAAI,CAAE,IAAK,CAAC;IACnD,IAAI,CAACS,SAAS,GAAG,IAAI,CAACA,SAAS,CAACT,IAAI,CAAE,IAAK,CAAC;IAC5C,IAAI,CAACU,uBAAuB,GAC3B,IAAI,CAACA,uBAAuB,CAACV,IAAI,CAAE,IAAK,CAAC;IAE1C,IAAI,CAACW,6BAA6B,GACjC,IAAI,CAACA,6BAA6B,CAACX,IAAI,CAAE,IAAK,CAAC;IAChD,IAAI,CAACY,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAACZ,IAAI,CAAE,IAAK,CAAC;IAC9D,IAAI,CAACa,aAAa,GAAG,IAAI,CAACA,aAAa,CAACb,IAAI,CAAE,IAAK,CAAC;IACpD,IAAI,CAACc,qBAAqB,GAAG,IAAI,CAACA,qBAAqB,CAACd,IAAI,CAAE,IAAK,CAAC;EACrE;EAEAe,iBAAiBA,CAAA,EAAG;IACnB,MAAM;MAAEC,UAAU;MAAEC;IAAc,CAAC,GAAG,IAAI,CAACzB,KAAK;IAChD,MAAM;MAAE0B;IAAmB,CAAC,GAAGF,UAAU;IAEzC,IAAKE,kBAAkB,KAAKC,SAAS,IAAID,kBAAkB,KAAK,EAAE,EAAG;MACpED,aAAa,CAAE;QACdC,kBAAkB,EAAE,IAAAE,QAAE,EAAE,UAAU,EAAE,cAAe;MACpD,CAAE,CAAC;IACJ;IAEA,IACCJ,UAAU,CAACK,EAAE,IACbL,UAAU,CAACM,GAAG,IACd,IAAAC,gBAAW,EAAEP,UAAU,CAACM,GAAI,CAAC,KAAK,OAAO,EACxC;MACD,IAAAE,kCAAe,EAAC,CAAC;IAClB;EACD;EAEAC,oBAAoBA,CAAA,EAAG;IACtBC,YAAY,CAAE,IAAI,CAAC5B,QAAS,CAAC;EAC9B;EAEA6B,kBAAkBA,CAAEC,SAAS,EAAG;IAC/B,IACCA,SAAS,CAACC,eAAe,IACzB,CAAE,IAAI,CAACrC,KAAK,CAACqC,eAAe,IAC5B,IAAI,CAACpC,KAAK,CAACE,qBAAqB,EAC/B;MACD,IAAI,CAACmC,QAAQ,CAAE;QAAEnC,qBAAqB,EAAE;MAAM,CAAE,CAAC;IAClD;EACD;EAEAM,YAAYA,CAAE8B,KAAK,EAAG;IACrB,IAAI,CAACvC,KAAK,CAACyB,aAAa,CAAE;MACzBe,IAAI,EAAED,KAAK,CAACT,GAAG;MACfW,QAAQ,EAAEF,KAAK,CAACG,KAAK;MACrBC,YAAY,EAAEJ,KAAK,CAACT,GAAG;MACvBD,EAAE,EAAEU,KAAK,CAACV;IACX,CAAE,CAAC;EACJ;EAEAnB,gBAAgBA,CAAE+B,QAAQ,EAAG;IAC5B,IAAI,CAACzC,KAAK,CAACyB,aAAa,CAAE;MAAEgB;IAAS,CAAE,CAAC;EACzC;EAEA9B,0BAA0BA,CAAEe,kBAAkB,EAAG;IAChD,IAAI,CAAC1B,KAAK,CAACyB,aAAa,CAAE;MAAEC;IAAmB,CAAE,CAAC;EACnD;EAEAV,gCAAgCA,CAAE4B,kBAAkB,EAAG;IACtD,IAAI,CAAC5C,KAAK,CAACyB,aAAa,CAAE;MAAEmB;IAAmB,CAAE,CAAC;EACnD;EAEAzB,6BAA6BA,CAAE0B,OAAO,EAAG;IACxC;IACA,IAAI,CAAC7C,KAAK,CAACyB,aAAa,CAAE;MAAEkB,YAAY,EAAEE;IAAQ,CAAE,CAAC;EACtD;EAEA5B,SAASA,CAAA,EAAG;IACX,IAAK,IAAI,CAAChB,KAAK,CAAC6C,WAAW,EAAG;MAC7B;IACD;IACA,MAAM;MAAEN;IAAK,CAAC,GAAG,IAAI,CAACxC,KAAK,CAACwB,UAAU;IACtCuB,kBAAS,CAACC,SAAS,CAAER,IAAK,CAAC;IAE3B,IAAI,CAACF,QAAQ,CAAE;MAAEQ,WAAW,EAAE;IAAK,CAAE,CAAC;IACtC,IAAI,CAACxC,QAAQ,GAAG2C,UAAU,CAAE,MAAM;MACjC,IAAI,CAACX,QAAQ,CAAE;QAAEQ,WAAW,EAAE;MAAM,CAAE,CAAC;IACxC,CAAC,EAAEnD,mCAAoC,CAAC;EACzC;EAEAuB,uBAAuBA,CAAEgC,QAAQ,EAAG;IACnC,IAAI,CAAClD,KAAK,CAACyB,aAAa,CAAE;MACzB0B,cAAc,EAAED,QAAQ,GAAG,QAAQ,GAAG;IACvC,CAAE,CAAC;EACJ;EAEAtC,mBAAmBA,CAAEwC,OAAO,EAAG;IAC9B,MAAM;MAAE3B;IAAc,CAAC,GAAG,IAAI,CAACzB,KAAK;IACpC,IAAKoD,OAAO,CAACC,QAAQ,EAAG;MACvB5B,aAAa,CAAE;QAAEK,GAAG,EAAEsB,OAAO,CAACC;MAAS,CAAE,CAAC;IAC3C;IACA,IAAK,CAAE,IAAI,CAACpD,KAAK,CAACC,kBAAkB,EAAG;MACtC,IAAI,CAACoC,QAAQ,CAAE;QAAEpC,kBAAkB,EAAE;MAAK,CAAE,CAAC;IAC9C;EACD;EAEAW,4BAA4BA,CAAEuC,OAAO,EAAG;IACvC,MAAM;MAAE3B;IAAc,CAAC,GAAG,IAAI,CAACzB,KAAK;IAEpCyB,aAAa,CAAE;MACde,IAAI,EAAEY,OAAO,CAACC,QAAQ;MACtBxB,EAAE,EAAEuB,OAAO,CAACE,aAAa;MACzBX,YAAY,EAAES,OAAO,CAACC;IACvB,CAAE,CAAC;IACH,IAAI,CAACf,QAAQ,CAAE;MAAEpC,kBAAkB,EAAE;IAAM,CAAE,CAAC;EAC/C;EAEAY,4BAA4BA,CAAEsC,OAAO,EAAG;IACvC,IAAI,CAACpD,KAAK,CAACyB,aAAa,CAAE;MAAEI,EAAE,EAAEuB,OAAO,CAACG;IAAQ,CAAE,CAAC;IACnD,IAAI,CAACjB,QAAQ,CAAE;MAAEpC,kBAAkB,EAAE;IAAM,CAAE,CAAC;EAC/C;EAEAoB,qBAAqBA,CAAA,EAAG;IACvB,MAAM;MAAEG;IAAc,CAAC,GAAG,IAAI,CAACzB,KAAK;IAEpCyB,aAAa,CAAE;MACdI,EAAE,EAAE,IAAI;MACRW,IAAI,EAAE,IAAI;MACVG,YAAY,EAAE,IAAI;MAClBF,QAAQ,EAAE;IACX,CAAE,CAAC;IACH,IAAI,CAACH,QAAQ,CAAE;MAAEpC,kBAAkB,EAAE;IAAM,CAAE,CAAC;EAC/C;EAEAkB,kBAAkBA,CAAA,EAAG;IACpB,IAAI,CAACkB,QAAQ,CACZ;MACCnC,qBAAqB,EAAE;IACxB,CAAC,EACD,IAAI,CAACH,KAAK,CAACwD,WACZ,CAAC;EACF;EAEAC,oBAAoBA,CAAEC,IAAI,EAAG;IAC5B,OACC,IAAA9E,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAA0E,aAAa,QACb,IAAAhF,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAA0E,YAAY,QACZ,IAAAjF,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAA2E,aAAa;MACbpB,KAAK,EAAG,IAAAqB,QAAE,EAAE,WAAY,CAAG;MAC3BC,IAAI,EAAGC,cAAS;MAChBC,OAAO,EAAGR;IAAM,CAChB,CAAC,EACF,IAAA9E,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAA2E,aAAa;MACbpB,KAAK,EAAG,IAAAqB,QAAE,EAAE,SAAU,CAAG;MACzBC,IAAI,EAAGG,WAAM;MACbD,OAAO,EAAG,IAAI,CAAC9C;IAAoB,CACnC,CACY,CACA,CAAC;EAElB;EAEAgD,oBAAoBA,CACnB;IAAExB,kBAAkB;IAAEO,cAAc;IAAEX,IAAI;IAAEG;EAAa,CAAC,EAC1DJ,KAAK,EACLrC,kBAAkB,EAClBmE,cAAc,EACb;IACD,IAAIC,sBAAsB,GAAG,CAAE;MAAEC,KAAK,EAAE/B,IAAI;MAAEgC,KAAK,EAAE,IAAAT,QAAE,EAAE,KAAM;IAAE,CAAC,CAAE;IACpE,MAAMU,cAAc,GAAGlC,KAAK,IAAIA,KAAK,CAAC4B,IAAI;IAC1C,MAAM;MAAEhE;IAAsB,CAAC,GAAG,IAAI,CAACF,KAAK;IAE5C,IAAKwE,cAAc,EAAG;MACrBH,sBAAsB,GAAG,CACxB;QAAEC,KAAK,EAAE/B,IAAI;QAAEgC,KAAK,EAAE,IAAAT,QAAE,EAAE,YAAa;MAAE,CAAC,EAC1C;QAAEQ,KAAK,EAAEE,cAAc;QAAED,KAAK,EAAE,IAAAT,QAAE,EAAE,iBAAkB;MAAE,CAAC,CACzD;IACF;IAEA,MAAMW,iBAAiB,GAAG,IAAI,CAAC1E,KAAK,CAAC2E,wBAAwB,CAC5DC,cAAM,CAACC,YAAY,EACnBD,cAAM,CAACE,gBACR,CAAC;IAED,MAAMC,iBAAiB,GAAGV,cAAc,IAAInE,kBAAkB;IAE9D,MAAM8E,uBAAuB,GAAG,IAAI,CAAChF,KAAK,CAAC2E,wBAAwB,CAClEC,cAAM,CAACK,kBAAkB,EACzBL,cAAM,CAACM,sBACR,CAAC;IAED,MAAMC,gBAAgB,GAAGJ,iBAAiB,GACvCC,uBAAuB,GACvBN,iBAAiB;IAEpB,OACC,IAAA9F,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAAkG,iBAAiB,QACfjF,qBAAqB,IACtB,IAAAvB,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAAkG,SAAS;MAAC3C,KAAK,EAAG,IAAAqB,QAAE,EAAE,qBAAsB;IAAG,CAAE,CAClD,EACD,IAAAnF,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAAkG,SAAS,QACT,IAAAzG,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAAmG,aAAa;MACbtB,IAAI,EAAGG,WAAM;MACbK,KAAK,EAAG,IAAAT,QAAE,EAAE,SAAU,CAAG;MACzBQ,KAAK,EAAG5B,YAAc;MACtB4C,QAAQ,EAAG,IAAI,CAACpE,6BAA+B;MAC/CqE,OAAO,EAAGlB,sBAAwB;MAClCmB,gBAAgB,EAAG;IAAM,CACzB,CAAC,EACF,IAAA7G,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAAuG,aAAa;MACb1B,IAAI,EAAG2B,eAAU;MACjBnB,KAAK,EAAG,IAAAT,QAAE,EAAE,iBAAkB,CAAG;MACjC6B,OAAO,EAAGzC,cAAc,KAAK,QAAU;MACvCoC,QAAQ,EAAG,IAAI,CAACrE;IAAyB,CACzC,CAAC,EACA,CAAEf,qBAAqB,IACxB,IAAAvB,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAAuG,aAAa;MACb1B,IAAI,EAAG6B,aAAQ;MACfrB,KAAK,EAAG,IAAAT,QAAE,EAAE,sBAAuB,CAAG;MACtC6B,OAAO,EAAGhD,kBAAoB;MAC9B2C,QAAQ,EAAG,IAAI,CAACvE;IAAkC,CAClD,CACD,EACD,IAAApC,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAA2G,WAAW;MACXC,QAAQ,EAAGhB,iBAAmB;MAC9BP,KAAK,EACJ,IAAI,CAACvE,KAAK,CAAC6C,WAAW,GACnB,IAAAiB,QAAE,EAAE,SAAU,CAAC,GACf,IAAAA,QAAE,EAAE,eAAgB,CACvB;MACDiC,UAAU,EACT,IAAI,CAAC/F,KAAK,CAAC6C,WAAW,IAAIqC,gBAC1B;MACDc,OAAO,EAAG,IAAI,CAAChF;IAAW,CAC1B,CACS,CACO,CAAC;EAEtB;EAEAiF,oBAAoBA,CAAEC,KAAK,EAAG;IAC7B,MAAMC,YAAY,GAAKC,SAAS,IAAM;MACrC,QAASA,SAAS;QACjB,KAAK,OAAO;UACX,OAAO,UAAU;QAClB,KAAK,QAAQ;UACZ,OAAO,QAAQ;QAChB;UACC,OAAO,YAAY;MACrB;IACD,CAAC;IACD,OAAO;MAAEC,SAAS,EAAEF,YAAY,CAAED,KAAM;IAAE,CAAC;EAC5C;EAEAI,4BAA4BA,CAAEJ,KAAK,EAAG;IACrC,QAASA,KAAK;MACb,KAAK,OAAO;QACX,OAAO,OAAO;MACf,KAAK,QAAQ;QACZ,OAAO,QAAQ;MAChB;QACC,OAAO,MAAM;IACf;EACD;EAEA9E,aAAaA,CAAA,EAAG;IACf,MAAM;MAAEG;IAAW,CAAC,GAAG,IAAI,CAACxB,KAAK;IAEjC,IAAK,IAAI,CAACC,KAAK,CAACC,kBAAkB,EAAG;MACpC,IAAAsG,iDAA8B,EAAEhF,UAAU,CAACK,EAAG,CAAC;IAChD,CAAC,MAAM,IACNL,UAAU,CAACK,EAAE,IACb,IAAAE,gBAAW,EAAEP,UAAU,CAACgB,IAAK,CAAC,KAAK,OAAO,EACzC;MACD,IAAAiE,gDAA6B,EAAEjF,UAAU,CAACK,EAAG,CAAC;IAC/C;EACD;EAEAtB,QAAQA,CAAE;IAAEmG;EAAY,CAAC,EAAG;IAC3B,MAAM;MAAEC;IAAM,CAAC,GAAGD,WAAW,CAACE,MAAM;IACpC,MAAM;MAAEC,WAAW;MAAEC;IAAa,CAAC,GAAGlC,cAAM,CAACmC,aAAa;IAC1D,IAAI,CAACzE,QAAQ,CAAE;MACdjC,QAAQ,EAAEsG,KAAK,IAAKE,WAAW,GAAGC,YAAY;IAC/C,CAAE,CAAC;EACJ;;EAEA;EACA;EACA;EACA;EACAE,mBAAmBA,CAAEC,eAAe,EAAG;IACtC,MAAM;MAAE5G,QAAQ;MAAED;IAAqB,CAAC,GAAG,IAAI,CAACH,KAAK;IACrD,OACC,IAAArB,QAAA,CAAA+E,aAAA,EAAC7E,YAAA,CAAAoI,IAAI;MACJC,KAAK,EAAGvC,cAAM,CAACwC,WAAa;MAC5BC,YAAY,EAAGA,CAAE;QAAEX;MAAY,CAAC,KAAM;QACrC,MAAMY,SAAS,GACdZ,WAAW,CAACa,KAAK,CAAE,CAAC,CAAE,IAAIb,WAAW,CAACa,KAAK,CAAE,CAAC,CAAE,CAACZ,KAAK;QACvD,IAAKW,SAAS,IAAIA,SAAS,KAAKlH,oBAAoB,EAAG;UACtD,IAAI,CAACkC,QAAQ,CAAE;YACdlC,oBAAoB,EAAEoH,IAAI,CAACC,GAAG,CAC7BH,SAAS,EACTjH,QACD;UACD,CAAE,CAAC;QACJ;MACD;IAAG,GAED4G,eACG,CAAC;EAET;EAEAlG,gBAAgBA,CAAE2G,gBAAgB,EAAEC,eAAe,EAAG;IACrD,MAAM;MAAEnG,UAAU;MAAEe,KAAK;MAAEqF;IAAW,CAAC,GAAG,IAAI,CAAC5H,KAAK;IACpD,MAAM;MAAE6H,eAAe;MAAEzH;IAAqB,CAAC,GAAG,IAAI,CAACH,KAAK;IAE5D,MAAM;MAAEwC,QAAQ;MAAEf,kBAAkB;MAAEG,EAAE;MAAEe,kBAAkB;MAAEuD;IAAM,CAAC,GACpE3E,UAAU;IAEX,MAAMsG,QAAQ,GACbD,eAAe,IACb,CAAEA,eAAe,IAClBnG,kBAAkB,IAClBA,kBAAkB,KAAK,EAAI,GACzB9B,SAAS,GACTQ,oBAAoB;IAExB,MAAM6G,eAAe,GACpBY,eAAe,IACb,CAAEA,eAAe,IAClBnG,kBAAkB,IAClBA,kBAAkB,KAAK,EAAI,GACzB,EAAE,GACF,IAAAqC,QAAE,EAAE,WAAY,CAAC;IAErB,OACC,IAAAnF,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAA6I,mBAAmB;MACnBxE,OAAO,EAAG1B,EAAI;MACdmG,qBAAqB,EAAG,IAAI,CAACpH,mBAAqB;MAClDqH,8BAA8B,EAC7B,IAAI,CAACpH,4BACL;MACDqH,8BAA8B,EAC7B,IAAI,CAACpH,4BACL;MACDqH,uBAAuB,EAAG,IAAI,CAAC7G,qBAAuB;MACtD8G,aAAa,EAAGA,CAAE;QAAElI,kBAAkB;QAAEmE;MAAe,CAAC,KAAM;QAC7D,MAAMgE,WAAW,GAChB,CAAE,IAAI,CAACpI,KAAK,CAACC,kBAAkB,IAAImE,cAAc,KACjDO,cAAM,CAAC0D,cAAc;QACtB,MAAMnD,gBAAgB,GAAG,CACxBP,cAAM,CAACmC,aAAa,EACpBsB,WAAW,CACX;QAED,MAAME,cAAc,GAAGC,MAAM,CAACC,MAAM,CACnC,CAAC,CAAC,EACF7D,cAAM,CAAC8D,SAAS,EAChB9D,cAAM,CAAC+D,YACR,CAAC;QAED,OACC,IAAA/J,QAAA,CAAA+E,aAAA,EAAC7E,YAAA,CAAA8J,wBAAwB;UACxBC,UAAU,EAAG,CAAEjB,UAAY;UAC3B3B,OAAO,EAAG,IAAI,CAAC5E,aAAe;UAC9B0E,QAAQ,EAAG,CAAE6B;QAAY,GAEzB,IAAAhJ,QAAA,CAAA+E,aAAA,EAAC7E,YAAA,CAAAgK,IAAI;UACJvI,QAAQ,EAAG,IAAI,CAACA,QAAU;UAC1BwI,MAAM,EAAC;QAAqB,GAE1B,IAAI,CAAC/B,mBAAmB,CAAEC,eAAgB,CAAC,EAC3C/G,kBAAkB,IACnB,IAAI,CAACuD,oBAAoB,CACxBiE,gBACD,CAAC,EACAC,eAAe,CAAC,CAAC,EACjBC,UAAU,IACX,IAAI,CAACxD,oBAAoB,CACxB5C,UAAU,EACVe,KAAK,EACLrC,kBAAkB,EAClBmE,cACD,CAAC,EACF,IAAAzF,QAAA,CAAA+E,aAAA,EAAC7E,YAAA,CAAAgK,IAAI;UAAC3B,KAAK,EAAGvC,cAAM,CAACoE;QAAW,GAC/B,IAAApK,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAA+J,QAAQ;UACRC,4BAA4B;UAC5BC,8BAA8B;UAC9B5D,QAAQ,EAAG,IAAI,CAAC7E,gBAAkB;UAClC0G,WAAW,EAAG,IAAArD,QAAE,EAAE,WAAY,CAAG;UACjCqF,OAAO,EAAC,GAAG;UACXC,qBAAqB,EAAC,aAAa;UACnC9E,KAAK,EAAG9B,QAAU;UAClB6G,WAAW,EAAG,IAAM;UACpBC,SAAS,EAAG,IAAI,CAAChD,4BAA4B,CAC5CJ,KACD;QAAG,CACH,CAAC,EACA9B,cAAc,IACf,IAAAzF,QAAA,CAAA+E,aAAA,EAAC7E,YAAA,CAAAgK,IAAI;UAAC3B,KAAK,EAAGvC,cAAM,CAAC4E;QAAgB,GACpC,IAAA5K,QAAA,CAAA+E,aAAA,EAACxE,WAAA,CAAAsK,IAAI;UACJzF,IAAI,EAAG0F,cAAS;UAChBvC,KAAK,EAAGoB;QAAgB,CACxB,CAAC,EACF,IAAA3J,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAAyK,SAAS;UACTC,QAAQ,EAAG,KAAO;UAClBrF,KAAK,EAAG,IAAAR,QAAE,EAAE,OAAQ,CAAG;UACvBoD,KAAK,EAAGvC,cAAM,CAAC+D;QAAc,CAC7B,CACI,CAEF,CAAC,EACL/F,kBAAkB,IACnB,IAAI,CAAC3C,KAAK,CAACI,QAAQ,GAAG,CAAC,IACtB,IAAAzB,QAAA,CAAA+E,aAAA,EAAC7E,YAAA,CAAAgK,IAAI;UACJ3B,KAAK,EAAG,CACPhC,gBAAgB,EAChB,IAAI,CAACe,oBAAoB,CACxBC,KACD,CAAC;QACC,GAEH,IAAAvH,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAA+J,QAAQ;UACRC,4BAA4B;UAC5BC,8BAA8B;UAC9BC,OAAO,EAAC,GAAG;UACXG,SAAS,EAAC,QAAQ;UAClBzB,QAAQ,EAAGA,QAAU;UACrBzH,QAAQ,EAAG,IAAI,CAACJ,KAAK,CAACI,QAAU;UAChCiJ,WAAW,EAAG,IAAM;UACpBnC,KAAK,EAAGvC,cAAM,CAACiF,UAAY;UAC3BtF,KAAK,EAAG7C,kBAAoB;UAC5B0F,WAAW,EAAGH,eAAiB;UAC/B6C,eAAe,EAAGA,CAAA,KACjB,IAAI,CAACxH,QAAQ,CAAE;YACduF,eAAe,EAAE;UAClB,CAAE,CACF;UACDkC,MAAM,EAAGA,CAAA,KACR,IAAI,CAACzH,QAAQ,CAAE;YACduF,eAAe,EAAE;UAClB,CAAE,CACF;UACDmC,cAAc,EACbpF,cAAM,CAACiF,UAAU,CAACI,KAClB;UACDC,oBAAoB,EACnBtF,cAAM,CAACsF,oBAAoB,CACzBD,KACF;UACDZ,qBAAqB,EAAC,aAAa;UACnC9D,QAAQ,EACP,IAAI,CACF5E;QACF,CACD,CACI,CAEH,CACmB,CAAC;MAE7B;IAAG,CACH,CAAC;EAEJ;EAEAwJ,MAAMA,CAAA,EAAG;IACR,MAAM;MAAE3I,UAAU;MAAE4I,oBAAoB;MAAExC;IAAW,CAAC,GAAG,IAAI,CAAC5H,KAAK;IACnE,MAAM;MAAEwC;IAAK,CAAC,GAAGhB,UAAU;IAE3B,IAAK,CAAEgB,IAAI,EAAG;MACb,OACC,IAAA5D,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAAmL,gBAAgB;QAChBrG,IAAI,EAAG,IAAApF,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAAoL,SAAS;UAACtG,IAAI,EAAGA;QAAM,CAAE,CAAG;QACpCuG,MAAM,EAAG;UACR7H,KAAK,EAAE,IAAAqB,QAAE,EAAE,MAAO,CAAC;UACnByG,YAAY,EAAE,IAAAzG,QAAE,EAAE,eAAgB;QACnC,CAAG;QACH0G,QAAQ,EAAG,IAAI,CAAChK,YAAc;QAC9BiK,OAAO,EAAG,IAAI,CAAC1K,KAAK,CAAC0K,OAAS;QAC9BC,YAAY,EAAG,CAAEC,2BAAc,CAAI;QACnCC,mBAAmB,EAAGjD,UAAU,IAAIwC;MAAsB,CAC1D,CAAC;IAEJ;IAEA,OACC,IAAAxL,QAAA,CAAA+E,aAAA,EAACzE,YAAA,CAAA4L,WAAW;MACXH,YAAY,EAAG,CAAEC,2BAAc,CAAI;MACnCG,gBAAgB,EAAG,IAAM;MACzBN,QAAQ,EAAG,IAAI,CAAChK,YAAc;MAC9B0J,MAAM,EAAGA,CAAE;QAAEzG,IAAI;QAAEiE;MAAgB,CAAC,KAAM;QACzC,OAAO,IAAI,CAAC5G,gBAAgB,CAAE2C,IAAI,EAAEiE,eAAgB,CAAC;MACtD;IAAG,CACH,CAAC;EAEJ;AACD;AAACqD,OAAA,CAAAnL,QAAA,GAAAA,QAAA;AAAA,IAAAoL,QAAA,GAEc,IAAAC,gBAAO,EAAE,CACvB,IAAAC,gBAAU,EAAE,CAAEC,MAAM,EAAEpL,KAAK,KAAM;EAChC,MAAM;IAAEwB,UAAU;IAAEoG,UAAU;IAAEyD;EAAS,CAAC,GAAGrL,KAAK;EAClD,MAAM;IAAE6B,EAAE;IAAEW;EAAK,CAAC,GAAGhB,UAAU;EAC/B,MAAM;IAAE8J;EAAsB,CAAC,GAAGF,MAAM,CAAE,gBAAiB,CAAC;EAC5D,MAAMG,aAAa,GAAG1J,EAAE,IAAI,IAAAE,gBAAW,EAAES,IAAK,CAAC,KAAK,OAAO;EAC3D,OAAO;IACND,KAAK,EAAEgJ,aAAa,GACjBH,MAAM,CAAEI,eAAU,CAAC,CAACC,QAAQ,CAAE5J,EAAG,CAAC,GAClCF,SAAS;IACZU,eAAe,EAAEuF,UAAU,IAAI0D,qBAAqB,CAAC,CAAC;IACtDlB,oBAAoB,EAAEgB,MAAM,CAC3BM,kBACD,CAAC,CAACtB,oBAAoB,CAAEiB,QAAQ,EAAE,eAAgB;EACnD,CAAC;AACF,CAAE,CAAC,EACH,IAAAM,kBAAY,EAAIC,QAAQ,IAAM;EAC7B,MAAM;IAAEC;EAAmB,CAAC,GAAGD,QAAQ,CAAE,gBAAiB,CAAC;EAC3D,OAAO;IACNpI,WAAW,EAAEA,CAAA,KAAMqI,kBAAkB,CAAE,iBAAkB;EAC1D,CAAC;AACF,CAAE,CAAC,EACHC,iCAAwB,CACvB,CAAC,CAAEjM,QAAS,CAAC;AAAAmL,OAAA,CAAAe,OAAA,GAAAd,QAAA"}