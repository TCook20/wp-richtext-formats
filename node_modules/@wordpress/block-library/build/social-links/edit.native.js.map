{"version":3,"names":["_element","require","_reactNative","_blockEditor","_data","_compose","_editor","_interopRequireDefault","_variations","ALLOWED_BLOCKS","variations","map","v","name","TEMPLATE","service","url","SocialLinksEdit","shouldDelete","onDelete","isSelected","isInnerIconSelected","innerBlocks","attributes","activeInnerBlocks","getBlock","blockWidth","initialCreation","setInitialCreation","useState","shouldRenderFooterAppender","align","marginLeft","spacing","styles","useEffect","renderFooterAppender","useRef","createElement","View","style","footerAppenderContainer","InnerBlocks","ButtonBlockAppender","isFloating","placeholderStyle","usePreferredColorSchemeStyle","placeholder","placeholderDark","renderPlaceholder","Array","length","_","index","testID","key","filterInnerBlocks","blockIds","filter","blockId","placeholderWrapper","allowedBlocks","templateLock","template","current","orientation","onDeleteBlock","undefined","marginVertical","marginHorizontal","horizontalAlignment","_default","compose","withSelect","select","clientId","getBlockCount","getBlockParents","getSelectedBlockClientId","getBlocks","blockEditorStore","selectedBlockClientId","selectedBlockParents","block","withDispatch","dispatch","removeBlock","exports","default"],"sources":["@wordpress/block-library/src/social-links/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\nimport variations from '../social-link/variations';\n\nconst ALLOWED_BLOCKS = variations.map(\n\t( v ) => `core/social-link-${ v.name }`\n);\n\n// Template contains the links that show when start.\nconst TEMPLATE = [\n\t[\n\t\t'core/social-link-wordpress',\n\t\t{ service: 'wordpress', url: 'https://wordpress.org' },\n\t],\n\t[ 'core/social-link-facebook', { service: 'facebook' } ],\n\t[ 'core/social-link-twitter', { service: 'twitter' } ],\n\t[ 'core/social-link-instagram', { service: 'instagram' } ],\n];\n\nfunction SocialLinksEdit( {\n\tshouldDelete,\n\tonDelete,\n\tisSelected,\n\tisInnerIconSelected,\n\tinnerBlocks,\n\tattributes,\n\tactiveInnerBlocks,\n\tgetBlock,\n\tblockWidth,\n} ) {\n\tconst [ initialCreation, setInitialCreation ] = useState( true );\n\tconst shouldRenderFooterAppender = isSelected || isInnerIconSelected;\n\tconst { align } = attributes;\n\tconst { marginLeft: spacing } = styles.spacing;\n\n\tuseEffect( () => {\n\t\tif ( ! shouldRenderFooterAppender ) {\n\t\t\tsetInitialCreation( false );\n\t\t}\n\t}, [ shouldRenderFooterAppender ] );\n\n\tconst renderFooterAppender = useRef( () => (\n\t\t<View style={ styles.footerAppenderContainer }>\n\t\t\t<InnerBlocks.ButtonBlockAppender isFloating={ true } />\n\t\t</View>\n\t) );\n\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.placeholder,\n\t\tstyles.placeholderDark\n\t);\n\n\tfunction renderPlaceholder() {\n\t\treturn [ ...new Array( innerBlocks.length || 1 ) ].map(\n\t\t\t( _, index ) => (\n\t\t\t\t<View\n\t\t\t\t\ttestID=\"social-links-placeholder\"\n\t\t\t\t\tstyle={ placeholderStyle }\n\t\t\t\t\tkey={ index }\n\t\t\t\t/>\n\t\t\t)\n\t\t);\n\t}\n\n\tfunction filterInnerBlocks( blockIds ) {\n\t\treturn blockIds.filter(\n\t\t\t( blockId ) => getBlock( blockId ).attributes.url\n\t\t);\n\t}\n\n\tif ( ! shouldRenderFooterAppender && activeInnerBlocks.length === 0 ) {\n\t\treturn (\n\t\t\t<View style={ styles.placeholderWrapper }>\n\t\t\t\t{ renderPlaceholder() }\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<InnerBlocks\n\t\t\tallowedBlocks={ ALLOWED_BLOCKS }\n\t\t\ttemplateLock={ false }\n\t\t\ttemplate={ initialCreation && TEMPLATE }\n\t\t\trenderFooterAppender={\n\t\t\t\tshouldRenderFooterAppender && renderFooterAppender.current\n\t\t\t}\n\t\t\torientation={ 'horizontal' }\n\t\t\tonDeleteBlock={ shouldDelete ? onDelete : undefined }\n\t\t\tmarginVertical={ spacing }\n\t\t\tmarginHorizontal={ spacing }\n\t\t\thorizontalAlignment={ align }\n\t\t\tfilterInnerBlocks={\n\t\t\t\t! shouldRenderFooterAppender && filterInnerBlocks\n\t\t\t}\n\t\t\tblockWidth={ blockWidth }\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlocks,\n\t\t\tgetBlock,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectedBlockParents = getBlockParents(\n\t\t\tselectedBlockClientId,\n\t\t\ttrue\n\t\t);\n\t\tconst innerBlocks = getBlocks( clientId );\n\t\tconst activeInnerBlocks = innerBlocks.filter(\n\t\t\t( block ) => block.attributes?.url\n\t\t);\n\n\t\treturn {\n\t\t\tshouldDelete: getBlockCount( clientId ) === 1,\n\t\t\tisInnerIconSelected: selectedBlockParents[ 0 ] === clientId,\n\t\t\tinnerBlocks,\n\t\t\tactiveInnerBlocks,\n\t\t\tgetBlock,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { removeBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonDelete: () => {\n\t\t\t\tremoveBlock( clientId, false );\n\t\t\t},\n\t\t};\n\t} )\n)( SocialLinksEdit );\n"],"mappings":"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"}