{"version":3,"names":["_i18n","require","_blockEditor","_data","_components","_commentsPaginationArrowControls","TEMPLATE","ALLOWED_BLOCKS","QueryPaginationEdit","attributes","paginationArrow","setAttributes","clientId","hasNextPreviousBlocks","useSelect","select","getBlocks","blockEditorStore","innerBlocks","find","innerBlock","includes","name","blockProps","useBlockProps","innerBlocksProps","useInnerBlocksProps","template","allowedBlocks","pageComments","getSettings","__experimentalDiscussionSettings","_element","createElement","Warning","__","Fragment","InspectorControls","PanelBody","title","CommentsPaginationArrowControls","value","onChange"],"sources":["@wordpress/block-library/src/comments-pagination/edit.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\tuseInnerBlocksProps,\n\tstore as blockEditorStore,\n\tWarning,\n} from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\nimport { PanelBody } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { CommentsPaginationArrowControls } from './comments-pagination-arrow-controls';\n\nconst TEMPLATE = [\n\t[ 'core/comments-pagination-previous' ],\n\t[ 'core/comments-pagination-numbers' ],\n\t[ 'core/comments-pagination-next' ],\n];\nconst ALLOWED_BLOCKS = [\n\t'core/comments-pagination-previous',\n\t'core/comments-pagination-numbers',\n\t'core/comments-pagination-next',\n];\n\nexport default function QueryPaginationEdit( {\n\tattributes: { paginationArrow },\n\tsetAttributes,\n\tclientId,\n} ) {\n\tconst hasNextPreviousBlocks = useSelect( ( select ) => {\n\t\tconst { getBlocks } = select( blockEditorStore );\n\t\tconst innerBlocks = getBlocks( clientId );\n\t\t/**\n\t\t * Show the `paginationArrow` control only if a\n\t\t * Comments Pagination Next or Comments Pagination Previous\n\t\t * block exists.\n\t\t */\n\t\treturn innerBlocks?.find( ( innerBlock ) => {\n\t\t\treturn [\n\t\t\t\t'core/comments-pagination-previous',\n\t\t\t\t'core/comments-pagination-next',\n\t\t\t].includes( innerBlock.name );\n\t\t} );\n\t}, [] );\n\n\tconst blockProps = useBlockProps();\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\n\t\ttemplate: TEMPLATE,\n\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t} );\n\n\t// Get the Discussion settings\n\tconst pageComments = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst { __experimentalDiscussionSettings } = getSettings();\n\t\treturn __experimentalDiscussionSettings?.pageComments;\n\t}, [] );\n\n\t// If paging comments is not enabled in the Discussion Settings then hide the pagination\n\t// controls. We don't want to remove them from the template so that when the user enables\n\t// paging comments, the controls will be visible.\n\tif ( ! pageComments ) {\n\t\treturn (\n\t\t\t<Warning>\n\t\t\t\t{ __(\n\t\t\t\t\t'Comments Pagination block: paging comments is disabled in the Discussion Settings'\n\t\t\t\t) }\n\t\t\t</Warning>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ hasNextPreviousBlocks && (\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t\t<CommentsPaginationArrowControls\n\t\t\t\t\t\t\tvalue={ paginationArrow }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( { paginationArrow: value } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t) }\n\t\t\t<div { ...innerBlocksProps } />\n\t\t</>\n\t);\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAOA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AAKA,IAAAI,gCAAA,GAAAJ,OAAA;AAjBA;AACA;AACA;;AAYA;AACA;AACA;;AAGA,MAAMK,QAAQ,GAAG,CAChB,CAAE,mCAAmC,CAAE,EACvC,CAAE,kCAAkC,CAAE,EACtC,CAAE,+BAA+B,CAAE,CACnC;AACD,MAAMC,cAAc,GAAG,CACtB,mCAAmC,EACnC,kCAAkC,EAClC,+BAA+B,CAC/B;AAEc,SAASC,mBAAmBA,CAAE;EAC5CC,UAAU,EAAE;IAAEC;EAAgB,CAAC;EAC/BC,aAAa;EACbC;AACD,CAAC,EAAG;EACH,MAAMC,qBAAqB,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IACtD,MAAM;MAAEC;IAAU,CAAC,GAAGD,MAAM,CAAEE,kBAAiB,CAAC;IAChD,MAAMC,WAAW,GAAGF,SAAS,CAAEJ,QAAS,CAAC;IACzC;AACF;AACA;AACA;AACA;IACE,OAAOM,WAAW,EAAEC,IAAI,CAAIC,UAAU,IAAM;MAC3C,OAAO,CACN,mCAAmC,EACnC,+BAA+B,CAC/B,CAACC,QAAQ,CAAED,UAAU,CAACE,IAAK,CAAC;IAC9B,CAAE,CAAC;EACJ,CAAC,EAAE,EAAG,CAAC;EAEP,MAAMC,UAAU,GAAG,IAAAC,0BAAa,EAAC,CAAC;EAClC,MAAMC,gBAAgB,GAAG,IAAAC,gCAAmB,EAAEH,UAAU,EAAE;IACzDI,QAAQ,EAAErB,QAAQ;IAClBsB,aAAa,EAAErB;EAChB,CAAE,CAAC;;EAEH;EACA,MAAMsB,YAAY,GAAG,IAAAf,eAAS,EAAIC,MAAM,IAAM;IAC7C,MAAM;MAAEe;IAAY,CAAC,GAAGf,MAAM,CAAEE,kBAAiB,CAAC;IAClD,MAAM;MAAEc;IAAiC,CAAC,GAAGD,WAAW,CAAC,CAAC;IAC1D,OAAOC,gCAAgC,EAAEF,YAAY;EACtD,CAAC,EAAE,EAAG,CAAC;;EAEP;EACA;EACA;EACA,IAAK,CAAEA,YAAY,EAAG;IACrB,OACC,IAAAG,QAAA,CAAAC,aAAA,EAAC/B,YAAA,CAAAgC,OAAO,QACL,IAAAC,QAAE,EACH,mFACD,CACQ,CAAC;EAEZ;EAEA,OACC,IAAAH,QAAA,CAAAC,aAAA,EAAAD,QAAA,CAAAI,QAAA,QACGvB,qBAAqB,IACtB,IAAAmB,QAAA,CAAAC,aAAA,EAAC/B,YAAA,CAAAmC,iBAAiB,QACjB,IAAAL,QAAA,CAAAC,aAAA,EAAC7B,WAAA,CAAAkC,SAAS;IAACC,KAAK,EAAG,IAAAJ,QAAE,EAAE,UAAW;EAAG,GACpC,IAAAH,QAAA,CAAAC,aAAA,EAAC5B,gCAAA,CAAAmC,+BAA+B;IAC/BC,KAAK,EAAG/B,eAAiB;IACzBgC,QAAQ,EAAKD,KAAK,IAAM;MACvB9B,aAAa,CAAE;QAAED,eAAe,EAAE+B;MAAM,CAAE,CAAC;IAC5C;EAAG,CACH,CACS,CACO,CACnB,EACD,IAAAT,QAAA,CAAAC,aAAA;IAAA,GAAUR;EAAgB,CAAI,CAC7B,CAAC;AAEL"}