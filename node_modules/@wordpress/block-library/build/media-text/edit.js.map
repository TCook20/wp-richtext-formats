{"version":3,"names":["_element","require","_classnames","_interopRequireDefault","_i18n","_data","_blockEditor","_components","_blob","_icons","_coreData","_mediaContainer","_constants","applyWidthConstraints","width","Math","max","WIDTH_CONSTRAINT_PERCENTAGE","min","getImageSourceUrlBySizeSlug","image","slug","media_details","sizes","source_url","attributesFromMedia","attributes","linkDestination","href","setAttributes","media","url","mediaAlt","undefined","mediaId","mediaType","mediaUrl","mediaLink","focalPoint","isBlobURL","type","getBlobTypeByURL","src","media_type","large","newHref","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","link","alt","id","MediaTextEdit","isSelected","imageFill","isStackedOnMobile","linkClass","linkTarget","mediaPosition","mediaWidth","rel","verticalAlignment","allowedBlocks","mediaSizeSlug","DEFAULT_MEDIA_SIZE_SLUG","imageSizes","useSelect","select","getSettings","blockEditorStore","coreStore","getMedia","context","refMediaContainer","useRef","imperativeFocalPointPreview","value","style","current","resizable","x","y","backgroundPosition","temporaryMediaWidth","setTemporaryMediaWidth","useState","onSelectMedia","onSetHref","props","onWidthChange","commitWidthChange","classNames","classnames","widthString","gridTemplateColumns","msGridColumns","onMediaAltChange","newMediaAlt","onVerticalAlignmentChange","alignment","imageSizeOptions","filter","map","name","label","updateImage","newMediaSizeSlug","newUrl","mediaTextGeneralSettings","createElement","PanelBody","title","__","ToggleControl","__nextHasNoMarginBottom","checked","onChange","FocalPointPicker","onDragStart","onDrag","TextareaControl","help","Fragment","ExternalLink","__experimentalImageSizeControl","onChangeImage","isResizable","imageSizeHelp","RangeControl","blockProps","useBlockProps","className","innerBlocksProps","useInnerBlocksProps","template","TEMPLATE","blockEditingMode","useBlockEditingMode","InspectorControls","BlockControls","group","BlockVerticalAlignmentControl","ToolbarButton","icon","pullLeft","isActive","onClick","pullRight","__experimentalImageURLInputUI","onChangeUrl","default","ref","enableResize","_default","exports"],"sources":["@wordpress/block-library/src/media-text/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useRef } from '@wordpress/element';\nimport {\n\tBlockControls,\n\tBlockVerticalAlignmentControl,\n\tuseInnerBlocksProps,\n\tInspectorControls,\n\tuseBlockProps,\n\t__experimentalImageURLInputUI as ImageURLInputUI,\n\t__experimentalImageSizeControl as ImageSizeControl,\n\tstore as blockEditorStore,\n\tuseBlockEditingMode,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tRangeControl,\n\tTextareaControl,\n\tToggleControl,\n\tToolbarButton,\n\tExternalLink,\n\tFocalPointPicker,\n} from '@wordpress/components';\nimport { isBlobURL, getBlobTypeByURL } from '@wordpress/blob';\nimport { pullLeft, pullRight } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport MediaContainer from './media-container';\nimport {\n\tDEFAULT_MEDIA_SIZE_SLUG,\n\tWIDTH_CONSTRAINT_PERCENTAGE,\n\tLINK_DESTINATION_MEDIA,\n\tLINK_DESTINATION_ATTACHMENT,\n\tTEMPLATE,\n} from './constants';\n\n// this limits the resize to a safe zone to avoid making broken layouts\nconst applyWidthConstraints = ( width ) =>\n\tMath.max(\n\t\tWIDTH_CONSTRAINT_PERCENTAGE,\n\t\tMath.min( width, 100 - WIDTH_CONSTRAINT_PERCENTAGE )\n\t);\n\nfunction getImageSourceUrlBySizeSlug( image, slug ) {\n\t// eslint-disable-next-line camelcase\n\treturn image?.media_details?.sizes?.[ slug ]?.source_url;\n}\n\nfunction attributesFromMedia( {\n\tattributes: { linkDestination, href },\n\tsetAttributes,\n} ) {\n\treturn ( media ) => {\n\t\tif ( ! media || ! media.url ) {\n\t\t\tsetAttributes( {\n\t\t\t\tmediaAlt: undefined,\n\t\t\t\tmediaId: undefined,\n\t\t\t\tmediaType: undefined,\n\t\t\t\tmediaUrl: undefined,\n\t\t\t\tmediaLink: undefined,\n\t\t\t\thref: undefined,\n\t\t\t\tfocalPoint: undefined,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isBlobURL( media.url ) ) {\n\t\t\tmedia.type = getBlobTypeByURL( media.url );\n\t\t}\n\n\t\tlet mediaType;\n\t\tlet src;\n\t\t// For media selections originated from a file upload.\n\t\tif ( media.media_type ) {\n\t\t\tif ( media.media_type === 'image' ) {\n\t\t\t\tmediaType = 'image';\n\t\t\t} else {\n\t\t\t\t// only images and videos are accepted so if the media_type is not an image we can assume it is a video.\n\t\t\t\t// video contain the media type of 'file' in the object returned from the rest api.\n\t\t\t\tmediaType = 'video';\n\t\t\t}\n\t\t} else {\n\t\t\t// For media selections originated from existing files in the media library.\n\t\t\tmediaType = media.type;\n\t\t}\n\n\t\tif ( mediaType === 'image' ) {\n\t\t\t// Try the \"large\" size URL, falling back to the \"full\" size URL below.\n\t\t\tsrc =\n\t\t\t\tmedia.sizes?.large?.url ||\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tmedia.media_details?.sizes?.large?.source_url;\n\t\t}\n\n\t\tlet newHref = href;\n\t\tif ( linkDestination === LINK_DESTINATION_MEDIA ) {\n\t\t\t// Update the media link.\n\t\t\tnewHref = media.url;\n\t\t}\n\n\t\t// Check if the image is linked to the attachment page.\n\t\tif ( linkDestination === LINK_DESTINATION_ATTACHMENT ) {\n\t\t\t// Update the media link.\n\t\t\tnewHref = media.link;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\tmediaAlt: media.alt,\n\t\t\tmediaId: media.id,\n\t\t\tmediaType,\n\t\t\tmediaUrl: src || media.url,\n\t\t\tmediaLink: media.link || undefined,\n\t\t\thref: newHref,\n\t\t\tfocalPoint: undefined,\n\t\t} );\n\t};\n}\n\nfunction MediaTextEdit( { attributes, isSelected, setAttributes } ) {\n\tconst {\n\t\tfocalPoint,\n\t\thref,\n\t\timageFill,\n\t\tisStackedOnMobile,\n\t\tlinkClass,\n\t\tlinkDestination,\n\t\tlinkTarget,\n\t\tmediaAlt,\n\t\tmediaId,\n\t\tmediaPosition,\n\t\tmediaType,\n\t\tmediaUrl,\n\t\tmediaWidth,\n\t\trel,\n\t\tverticalAlignment,\n\t\tallowedBlocks,\n\t} = attributes;\n\tconst mediaSizeSlug = attributes.mediaSizeSlug || DEFAULT_MEDIA_SIZE_SLUG;\n\n\tconst { imageSizes, image } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\timage:\n\t\t\t\t\tmediaId && isSelected\n\t\t\t\t\t\t? select( coreStore ).getMedia( mediaId, {\n\t\t\t\t\t\t\t\tcontext: 'view',\n\t\t\t\t\t\t  } )\n\t\t\t\t\t\t: null,\n\t\t\t\timageSizes: getSettings()?.imageSizes,\n\t\t\t};\n\t\t},\n\t\t[ isSelected, mediaId ]\n\t);\n\n\tconst refMediaContainer = useRef();\n\tconst imperativeFocalPointPreview = ( value ) => {\n\t\tconst { style } = refMediaContainer.current.resizable;\n\t\tconst { x, y } = value;\n\t\tstyle.backgroundPosition = `${ x * 100 }% ${ y * 100 }%`;\n\t};\n\n\tconst [ temporaryMediaWidth, setTemporaryMediaWidth ] = useState( null );\n\n\tconst onSelectMedia = attributesFromMedia( { attributes, setAttributes } );\n\n\tconst onSetHref = ( props ) => {\n\t\tsetAttributes( props );\n\t};\n\n\tconst onWidthChange = ( width ) => {\n\t\tsetTemporaryMediaWidth( applyWidthConstraints( width ) );\n\t};\n\tconst commitWidthChange = ( width ) => {\n\t\tsetAttributes( {\n\t\t\tmediaWidth: applyWidthConstraints( width ),\n\t\t} );\n\t\tsetTemporaryMediaWidth( null );\n\t};\n\n\tconst classNames = classnames( {\n\t\t'has-media-on-the-right': 'right' === mediaPosition,\n\t\t'is-selected': isSelected,\n\t\t'is-stacked-on-mobile': isStackedOnMobile,\n\t\t[ `is-vertically-aligned-${ verticalAlignment }` ]: verticalAlignment,\n\t\t'is-image-fill': imageFill,\n\t} );\n\tconst widthString = `${ temporaryMediaWidth || mediaWidth }%`;\n\tconst gridTemplateColumns =\n\t\t'right' === mediaPosition\n\t\t\t? `1fr ${ widthString }`\n\t\t\t: `${ widthString } 1fr`;\n\tconst style = {\n\t\tgridTemplateColumns,\n\t\tmsGridColumns: gridTemplateColumns,\n\t};\n\tconst onMediaAltChange = ( newMediaAlt ) => {\n\t\tsetAttributes( { mediaAlt: newMediaAlt } );\n\t};\n\tconst onVerticalAlignmentChange = ( alignment ) => {\n\t\tsetAttributes( { verticalAlignment: alignment } );\n\t};\n\n\tconst imageSizeOptions = imageSizes\n\t\t.filter( ( { slug } ) => getImageSourceUrlBySizeSlug( image, slug ) )\n\t\t.map( ( { name, slug } ) => ( { value: slug, label: name } ) );\n\tconst updateImage = ( newMediaSizeSlug ) => {\n\t\tconst newUrl = getImageSourceUrlBySizeSlug( image, newMediaSizeSlug );\n\n\t\tif ( ! newUrl ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\tmediaUrl: newUrl,\n\t\t\tmediaSizeSlug: newMediaSizeSlug,\n\t\t} );\n\t};\n\n\tconst mediaTextGeneralSettings = (\n\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Stack on mobile' ) }\n\t\t\t\tchecked={ isStackedOnMobile }\n\t\t\t\tonChange={ () =>\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tisStackedOnMobile: ! isStackedOnMobile,\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ mediaType === 'image' && (\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Crop image to fill entire column' ) }\n\t\t\t\t\tchecked={ imageFill }\n\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\timageFill: ! imageFill,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ imageFill && mediaUrl && mediaType === 'image' && (\n\t\t\t\t<FocalPointPicker\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Focal point picker' ) }\n\t\t\t\t\turl={ mediaUrl }\n\t\t\t\t\tvalue={ focalPoint }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { focalPoint: value } )\n\t\t\t\t\t}\n\t\t\t\t\tonDragStart={ imperativeFocalPointPreview }\n\t\t\t\t\tonDrag={ imperativeFocalPointPreview }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ mediaType === 'image' && (\n\t\t\t\t<TextareaControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Alternative text' ) }\n\t\t\t\t\tvalue={ mediaAlt }\n\t\t\t\t\tonChange={ onMediaAltChange }\n\t\t\t\t\thelp={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ExternalLink href=\"https://www.w3.org/WAI/tutorials/images/decision-tree\">\n\t\t\t\t\t\t\t\t{ __( 'Describe the purpose of the image.' ) }\n\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t{ __( 'Leave empty if decorative.' ) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ mediaType === 'image' && (\n\t\t\t\t<ImageSizeControl\n\t\t\t\t\tonChangeImage={ updateImage }\n\t\t\t\t\tslug={ mediaSizeSlug }\n\t\t\t\t\timageSizeOptions={ imageSizeOptions }\n\t\t\t\t\tisResizable={ false }\n\t\t\t\t\timageSizeHelp={ __(\n\t\t\t\t\t\t'Select the size of the source image.'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ mediaUrl && (\n\t\t\t\t<RangeControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Media width' ) }\n\t\t\t\t\tvalue={ temporaryMediaWidth || mediaWidth }\n\t\t\t\t\tonChange={ commitWidthChange }\n\t\t\t\t\tmin={ WIDTH_CONSTRAINT_PERCENTAGE }\n\t\t\t\t\tmax={ 100 - WIDTH_CONSTRAINT_PERCENTAGE }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</PanelBody>\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classNames,\n\t\tstyle,\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{ className: 'wp-block-media-text__content' },\n\t\t{ template: TEMPLATE, allowedBlocks }\n\t);\n\n\tconst blockEditingMode = useBlockEditingMode();\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>{ mediaTextGeneralSettings }</InspectorControls>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockVerticalAlignmentControl\n\t\t\t\t\t\t\tonChange={ onVerticalAlignmentChange }\n\t\t\t\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon={ pullLeft }\n\t\t\t\t\t\t\ttitle={ __( 'Show media on left' ) }\n\t\t\t\t\t\t\tisActive={ mediaPosition === 'left' }\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { mediaPosition: 'left' } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon={ pullRight }\n\t\t\t\t\t\t\ttitle={ __( 'Show media on right' ) }\n\t\t\t\t\t\t\tisActive={ mediaPosition === 'right' }\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\tsetAttributes( { mediaPosition: 'right' } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\n\t\t\t\t{ mediaType === 'image' && (\n\t\t\t\t\t<ImageURLInputUI\n\t\t\t\t\t\turl={ href || '' }\n\t\t\t\t\t\tonChangeUrl={ onSetHref }\n\t\t\t\t\t\tlinkDestination={ linkDestination }\n\t\t\t\t\t\tmediaType={ mediaType }\n\t\t\t\t\t\tmediaUrl={ image && image.source_url }\n\t\t\t\t\t\tmediaLink={ image && image.link }\n\t\t\t\t\t\tlinkTarget={ linkTarget }\n\t\t\t\t\t\tlinkClass={ linkClass }\n\t\t\t\t\t\trel={ rel }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ mediaPosition === 'right' && <div { ...innerBlocksProps } /> }\n\t\t\t\t<MediaContainer\n\t\t\t\t\tclassName=\"wp-block-media-text__media\"\n\t\t\t\t\tonSelectMedia={ onSelectMedia }\n\t\t\t\t\tonWidthChange={ onWidthChange }\n\t\t\t\t\tcommitWidthChange={ commitWidthChange }\n\t\t\t\t\tref={ refMediaContainer }\n\t\t\t\t\tenableResize={ blockEditingMode === 'default' }\n\t\t\t\t\t{ ...{\n\t\t\t\t\t\tfocalPoint,\n\t\t\t\t\t\timageFill,\n\t\t\t\t\t\tisSelected,\n\t\t\t\t\t\tisStackedOnMobile,\n\t\t\t\t\t\tmediaAlt,\n\t\t\t\t\t\tmediaId,\n\t\t\t\t\t\tmediaPosition,\n\t\t\t\t\t\tmediaType,\n\t\t\t\t\t\tmediaUrl,\n\t\t\t\t\t\tmediaWidth,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t{ mediaPosition !== 'right' && <div { ...innerBlocksProps } /> }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default MediaTextEdit;\n"],"mappings":"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"}