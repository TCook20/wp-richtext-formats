{"version":3,"names":["_element","require","_i18n","_blockEditor","_components","_richText","_icons","name","title","__","language","tagName","className","edit","Edit","exports","isActive","value","onChange","contentRef","isPopoverVisible","setIsPopoverVisible","useState","togglePopover","state","createElement","Fragment","RichTextToolbarButton","icon","languageIcon","label","onClick","removeFormat","role","InlineLanguageUI","onClose","popoverAnchor","useAnchor","editableContentElement","current","settings","lang","setLang","dir","setDir","Popover","anchor","onSubmit","event","preventDefault","applyFormat","type","attributes","TextControl","val","help","SelectControl","options","__experimentalHStack","alignment","Button","variant","text"],"sources":["@wordpress/format-library/src/language/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * WordPress dependencies\n */\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport {\n\tTextControl,\n\tSelectControl,\n\tButton,\n\tPopover,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { applyFormat, removeFormat, useAnchor } from '@wordpress/rich-text';\nimport { language as languageIcon } from '@wordpress/icons';\n\nconst name = 'core/language';\nconst title = __( 'Language' );\n\nexport const language = {\n\tname,\n\ttagName: 'bdo',\n\tclassName: null,\n\tedit: Edit,\n\ttitle,\n};\n\nfunction Edit( { isActive, value, onChange, contentRef } ) {\n\tconst [ isPopoverVisible, setIsPopoverVisible ] = useState( false );\n\tconst togglePopover = () => {\n\t\tsetIsPopoverVisible( ( state ) => ! state );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={ languageIcon }\n\t\t\t\tlabel={ title }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tif ( isActive ) {\n\t\t\t\t\t\tonChange( removeFormat( value, name ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttogglePopover();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tisActive={ isActive }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t\t{ isPopoverVisible && (\n\t\t\t\t<InlineLanguageUI\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tonClose={ togglePopover }\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nfunction InlineLanguageUI( { value, contentRef, onChange, onClose } ) {\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement: contentRef.current,\n\t\tsettings: language,\n\t} );\n\n\tconst [ lang, setLang ] = useState( '' );\n\tconst [ dir, setDir ] = useState( 'ltr' );\n\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"block-editor-format-toolbar__language-popover\"\n\t\t\tanchor={ popoverAnchor }\n\t\t\tonClose={ onClose }\n\t\t>\n\t\t\t<form\n\t\t\t\tclassName=\"block-editor-format-toolbar__language-container-content\"\n\t\t\t\tonSubmit={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tonChange(\n\t\t\t\t\t\tapplyFormat( value, {\n\t\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tlang,\n\t\t\t\t\t\t\t\tdir,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ title }\n\t\t\t\t\tvalue={ lang }\n\t\t\t\t\tonChange={ ( val ) => setLang( val ) }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'A valid language attribute, like \"en\" or \"fr\".'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Text direction' ) }\n\t\t\t\t\tvalue={ dir }\n\t\t\t\t\toptions={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Left to right' ),\n\t\t\t\t\t\t\tvalue: 'ltr',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Right to left' ),\n\t\t\t\t\t\t\tvalue: 'rtl',\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t\tonChange={ ( val ) => setDir( val ) }\n\t\t\t\t/>\n\t\t\t\t<HStack alignment=\"right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\ttext={ __( 'Apply' ) }\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t</form>\n\t\t</Popover>\n\t);\n}\n"],"mappings":"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"}