{"version":3,"names":["__","RichTextToolbarButton","TextControl","SelectControl","Button","Popover","__experimentalHStack","HStack","useState","applyFormat","removeFormat","useAnchor","language","languageIcon","name","title","tagName","className","edit","Edit","isActive","value","onChange","contentRef","isPopoverVisible","setIsPopoverVisible","togglePopover","state","createElement","Fragment","icon","label","onClick","role","InlineLanguageUI","onClose","popoverAnchor","editableContentElement","current","settings","lang","setLang","dir","setDir","anchor","onSubmit","event","preventDefault","type","attributes","val","help","options","alignment","variant","text"],"sources":["@wordpress/format-library/src/language/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * WordPress dependencies\n */\nimport { RichTextToolbarButton } from '@wordpress/block-editor';\nimport {\n\tTextControl,\n\tSelectControl,\n\tButton,\n\tPopover,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { applyFormat, removeFormat, useAnchor } from '@wordpress/rich-text';\nimport { language as languageIcon } from '@wordpress/icons';\n\nconst name = 'core/language';\nconst title = __( 'Language' );\n\nexport const language = {\n\tname,\n\ttagName: 'bdo',\n\tclassName: null,\n\tedit: Edit,\n\ttitle,\n};\n\nfunction Edit( { isActive, value, onChange, contentRef } ) {\n\tconst [ isPopoverVisible, setIsPopoverVisible ] = useState( false );\n\tconst togglePopover = () => {\n\t\tsetIsPopoverVisible( ( state ) => ! state );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<RichTextToolbarButton\n\t\t\t\ticon={ languageIcon }\n\t\t\t\tlabel={ title }\n\t\t\t\ttitle={ title }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tif ( isActive ) {\n\t\t\t\t\t\tonChange( removeFormat( value, name ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttogglePopover();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tisActive={ isActive }\n\t\t\t\trole=\"menuitemcheckbox\"\n\t\t\t/>\n\t\t\t{ isPopoverVisible && (\n\t\t\t\t<InlineLanguageUI\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tonClose={ togglePopover }\n\t\t\t\t\tcontentRef={ contentRef }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nfunction InlineLanguageUI( { value, contentRef, onChange, onClose } ) {\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement: contentRef.current,\n\t\tsettings: language,\n\t} );\n\n\tconst [ lang, setLang ] = useState( '' );\n\tconst [ dir, setDir ] = useState( 'ltr' );\n\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"block-editor-format-toolbar__language-popover\"\n\t\t\tanchor={ popoverAnchor }\n\t\t\tonClose={ onClose }\n\t\t>\n\t\t\t<form\n\t\t\t\tclassName=\"block-editor-format-toolbar__language-container-content\"\n\t\t\t\tonSubmit={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tonChange(\n\t\t\t\t\t\tapplyFormat( value, {\n\t\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tlang,\n\t\t\t\t\t\t\t\tdir,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ title }\n\t\t\t\t\tvalue={ lang }\n\t\t\t\t\tonChange={ ( val ) => setLang( val ) }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'A valid language attribute, like \"en\" or \"fr\".'\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Text direction' ) }\n\t\t\t\t\tvalue={ dir }\n\t\t\t\t\toptions={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Left to right' ),\n\t\t\t\t\t\t\tvalue: 'ltr',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Right to left' ),\n\t\t\t\t\t\t\tvalue: 'rtl',\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t\tonChange={ ( val ) => setDir( val ) }\n\t\t\t\t/>\n\t\t\t\t<HStack alignment=\"right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\ttext={ __( 'Apply' ) }\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t</form>\n\t\t</Popover>\n\t);\n}\n"],"mappings":"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"}