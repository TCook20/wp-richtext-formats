{"version":3,"names":["_hooks","require","_deepsignal","_portals","_utils","_hooks2","_slots","isObject","item","Array","isArray","mergeDeepSignals","target","source","overwrite","k","peek","_default","directive","directives","context","default","newContext","props","children","inheritedContext","Provider","inheritedValue","useContext","currentValue","useRef","deepSignal","current","useMemo","newValue","_element","createElement","value","priority","createPortal","document","body","effect","evaluate","contextValue","Object","values","forEach","path","useSignalEffect","init","useEffect","on","element","entries","name","event","class","className","keys","filter","n","result","currentClass","classFinder","RegExp","replace","trim","test","ref","classList","remove","add","newRule","ruleClean","ruleNewline","empty","cssStringToObject","val","tree","block","left","exec","shift","unshift","style","key","removeProperty","bind","attribute","el","undefined","err","setAttribute","removeAttribute","type","Type","innerHTML","rest","cached","dangerouslySetInnerHTML","__html","text","slot","position","Fragment","Slot","fill","Fill","SlotProvider","exports"],"sources":["@wordpress/interactivity/src/directives.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { useContext, useMemo, useEffect, useRef } from 'preact/hooks';\nimport { deepSignal, peek } from 'deepsignal';\n\n/**\n * Internal dependencies\n */\nimport { createPortal } from './portals';\nimport { useSignalEffect } from './utils';\nimport { directive } from './hooks';\nimport { SlotProvider, Slot, Fill } from './slots';\n\nconst isObject = ( item ) =>\n\titem && typeof item === 'object' && ! Array.isArray( item );\n\nconst mergeDeepSignals = ( target, source, overwrite ) => {\n\tfor ( const k in source ) {\n\t\tif ( isObject( peek( target, k ) ) && isObject( peek( source, k ) ) ) {\n\t\t\tmergeDeepSignals(\n\t\t\t\ttarget[ `$${ k }` ].peek(),\n\t\t\t\tsource[ `$${ k }` ].peek(),\n\t\t\t\toverwrite\n\t\t\t);\n\t\t} else if ( overwrite || typeof peek( target, k ) === 'undefined' ) {\n\t\t\ttarget[ `$${ k }` ] = source[ `$${ k }` ];\n\t\t}\n\t}\n};\n\nexport default () => {\n\t// data-wp-context\n\tdirective(\n\t\t'context',\n\t\t( {\n\t\t\tdirectives: {\n\t\t\t\tcontext: { default: newContext },\n\t\t\t},\n\t\t\tprops: { children },\n\t\t\tcontext: inheritedContext,\n\t\t} ) => {\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst inheritedValue = useContext( inheritedContext );\n\t\t\tconst currentValue = useRef( deepSignal( {} ) );\n\t\t\tcurrentValue.current = useMemo( () => {\n\t\t\t\tconst newValue = deepSignal( newContext );\n\t\t\t\tmergeDeepSignals( newValue, inheritedValue );\n\t\t\t\tmergeDeepSignals( currentValue.current, newValue, true );\n\t\t\t\treturn currentValue.current;\n\t\t\t}, [ newContext, inheritedValue ] );\n\n\t\t\treturn (\n\t\t\t\t<Provider value={ currentValue.current }>{ children }</Provider>\n\t\t\t);\n\t\t},\n\t\t{ priority: 5 }\n\t);\n\n\t// data-wp-body\n\tdirective( 'body', ( { props: { children } } ) => {\n\t\treturn createPortal( children, document.body );\n\t} );\n\n\t// data-wp-effect--[name]\n\tdirective( 'effect', ( { directives: { effect }, context, evaluate } ) => {\n\t\tconst contextValue = useContext( context );\n\t\tObject.values( effect ).forEach( ( path ) => {\n\t\t\tuseSignalEffect( () => {\n\t\t\t\treturn evaluate( path, { context: contextValue } );\n\t\t\t} );\n\t\t} );\n\t} );\n\n\t// data-wp-init--[name]\n\tdirective( 'init', ( { directives: { init }, context, evaluate } ) => {\n\t\tconst contextValue = useContext( context );\n\t\tObject.values( init ).forEach( ( path ) => {\n\t\t\tuseEffect( () => {\n\t\t\t\treturn evaluate( path, { context: contextValue } );\n\t\t\t}, [] );\n\t\t} );\n\t} );\n\n\t// data-wp-on--[event]\n\tdirective( 'on', ( { directives: { on }, element, evaluate, context } ) => {\n\t\tconst contextValue = useContext( context );\n\t\tObject.entries( on ).forEach( ( [ name, path ] ) => {\n\t\t\telement.props[ `on${ name }` ] = ( event ) => {\n\t\t\t\tevaluate( path, { event, context: contextValue } );\n\t\t\t};\n\t\t} );\n\t} );\n\n\t// data-wp-class--[classname]\n\tdirective(\n\t\t'class',\n\t\t( {\n\t\t\tdirectives: { class: className },\n\t\t\telement,\n\t\t\tevaluate,\n\t\t\tcontext,\n\t\t} ) => {\n\t\t\tconst contextValue = useContext( context );\n\t\t\tObject.keys( className )\n\t\t\t\t.filter( ( n ) => n !== 'default' )\n\t\t\t\t.forEach( ( name ) => {\n\t\t\t\t\tconst result = evaluate( className[ name ], {\n\t\t\t\t\t\tclassName: name,\n\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t} );\n\t\t\t\t\tconst currentClass = element.props.class || '';\n\t\t\t\t\tconst classFinder = new RegExp(\n\t\t\t\t\t\t`(^|\\\\s)${ name }(\\\\s|$)`,\n\t\t\t\t\t\t'g'\n\t\t\t\t\t);\n\t\t\t\t\tif ( ! result )\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t.replace( classFinder, ' ' )\n\t\t\t\t\t\t\t.trim();\n\t\t\t\t\telse if ( ! classFinder.test( currentClass ) )\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t? `${ currentClass } ${ name }`\n\t\t\t\t\t\t\t: name;\n\n\t\t\t\t\tuseEffect( () => {\n\t\t\t\t\t\t// This seems necessary because Preact doesn't change the class\n\t\t\t\t\t\t// names on the hydration, so we have to do it manually. It doesn't\n\t\t\t\t\t\t// need deps because it only needs to do it the first time.\n\t\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\t\telement.ref.current.classList.remove( name );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.ref.current.classList.add( name );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, [] );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\tconst newRule =\n\t\t/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g;\n\tconst ruleClean = /\\/\\*[^]*?\\*\\/|  +/g;\n\tconst ruleNewline = /\\n+/g;\n\tconst empty = ' ';\n\n\t/**\n\t * Convert a css style string into a object.\n\t *\n\t * Made by Cristian Bote (@cristianbote) for Goober.\n\t * https://unpkg.com/browse/goober@2.1.13/src/core/astish.js\n\t *\n\t * @param {string} val CSS string.\n\t * @return {Object} CSS object.\n\t */\n\tconst cssStringToObject = ( val ) => {\n\t\tconst tree = [ {} ];\n\t\tlet block, left;\n\n\t\twhile ( ( block = newRule.exec( val.replace( ruleClean, '' ) ) ) ) {\n\t\t\tif ( block[ 4 ] ) {\n\t\t\t\ttree.shift();\n\t\t\t} else if ( block[ 3 ] ) {\n\t\t\t\tleft = block[ 3 ].replace( ruleNewline, empty ).trim();\n\t\t\t\ttree.unshift( ( tree[ 0 ][ left ] = tree[ 0 ][ left ] || {} ) );\n\t\t\t} else {\n\t\t\t\ttree[ 0 ][ block[ 1 ] ] = block[ 2 ]\n\t\t\t\t\t.replace( ruleNewline, empty )\n\t\t\t\t\t.trim();\n\t\t\t}\n\t\t}\n\n\t\treturn tree[ 0 ];\n\t};\n\n\t// data-wp-style--[style-key]\n\tdirective(\n\t\t'style',\n\t\t( { directives: { style }, element, evaluate, context } ) => {\n\t\t\tconst contextValue = useContext( context );\n\t\t\tObject.keys( style )\n\t\t\t\t.filter( ( n ) => n !== 'default' )\n\t\t\t\t.forEach( ( key ) => {\n\t\t\t\t\tconst result = evaluate( style[ key ], {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t} );\n\t\t\t\t\telement.props.style = element.props.style || {};\n\t\t\t\t\tif ( typeof element.props.style === 'string' )\n\t\t\t\t\t\telement.props.style = cssStringToObject(\n\t\t\t\t\t\t\telement.props.style\n\t\t\t\t\t\t);\n\t\t\t\t\tif ( ! result ) delete element.props.style[ key ];\n\t\t\t\t\telse element.props.style[ key ] = result;\n\n\t\t\t\t\tuseEffect( () => {\n\t\t\t\t\t\t// This seems necessary because Preact doesn't change the styles on\n\t\t\t\t\t\t// the hydration, so we have to do it manually. It doesn't need deps\n\t\t\t\t\t\t// because it only needs to do it the first time.\n\t\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\t\telement.ref.current.style.removeProperty( key );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.ref.current.style[ key ] = result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, [] );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-bind--[attribute]\n\tdirective(\n\t\t'bind',\n\t\t( { directives: { bind }, element, context, evaluate } ) => {\n\t\t\tconst contextValue = useContext( context );\n\t\t\tObject.entries( bind )\n\t\t\t\t.filter( ( n ) => n !== 'default' )\n\t\t\t\t.forEach( ( [ attribute, path ] ) => {\n\t\t\t\t\tconst result = evaluate( path, {\n\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t} );\n\t\t\t\t\telement.props[ attribute ] = result;\n\n\t\t\t\t\t// This seems necessary because Preact doesn't change the attributes\n\t\t\t\t\t// on the hydration, so we have to do it manually. It doesn't need\n\t\t\t\t\t// deps because it only needs to do it the first time.\n\t\t\t\t\tuseEffect( () => {\n\t\t\t\t\t\tconst el = element.ref.current;\n\n\t\t\t\t\t\t// We set the value directly to the corresponding\n\t\t\t\t\t\t// HTMLElement instance property excluding the following\n\t\t\t\t\t\t// special cases.\n\t\t\t\t\t\t// We follow Preact's logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L110-L129\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tattribute !== 'width' &&\n\t\t\t\t\t\t\tattribute !== 'height' &&\n\t\t\t\t\t\t\tattribute !== 'href' &&\n\t\t\t\t\t\t\tattribute !== 'list' &&\n\t\t\t\t\t\t\tattribute !== 'form' &&\n\t\t\t\t\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t\t\t\t\t// cast to `0` instead\n\t\t\t\t\t\t\tattribute !== 'tabIndex' &&\n\t\t\t\t\t\t\tattribute !== 'download' &&\n\t\t\t\t\t\t\tattribute !== 'rowSpan' &&\n\t\t\t\t\t\t\tattribute !== 'colSpan' &&\n\t\t\t\t\t\t\tattribute in el\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tel[ attribute ] =\n\t\t\t\t\t\t\t\t\tresult === null || result === undefined\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: result;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} catch ( err ) {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// aria- and data- attributes have no boolean representation.\n\t\t\t\t\t\t// A `false` value is different from the attribute not being\n\t\t\t\t\t\t// present, so we can't remove it.\n\t\t\t\t\t\t// We follow Preact's logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L131C24-L136\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tresult !== null &&\n\t\t\t\t\t\t\tresult !== undefined &&\n\t\t\t\t\t\t\t( result !== false || attribute[ 4 ] === '-' )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tel.setAttribute( attribute, result );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.removeAttribute( attribute );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, [] );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-ignore\n\tdirective(\n\t\t'ignore',\n\t\t( {\n\t\t\telement: {\n\t\t\t\ttype: Type,\n\t\t\t\tprops: { innerHTML, ...rest },\n\t\t\t},\n\t\t} ) => {\n\t\t\t// Preserve the initial inner HTML.\n\t\t\tconst cached = useMemo( () => innerHTML, [] );\n\t\t\treturn (\n\t\t\t\t<Type\n\t\t\t\t\tdangerouslySetInnerHTML={ { __html: cached } }\n\t\t\t\t\t{ ...rest }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t);\n\n\t// data-wp-text\n\tdirective(\n\t\t'text',\n\t\t( {\n\t\t\tdirectives: {\n\t\t\t\ttext: { default: text },\n\t\t\t},\n\t\t\telement,\n\t\t\tevaluate,\n\t\t\tcontext,\n\t\t} ) => {\n\t\t\tconst contextValue = useContext( context );\n\t\t\telement.props.children = evaluate( text, {\n\t\t\t\tcontext: contextValue,\n\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-slot\n\tdirective(\n\t\t'slot',\n\t\t( {\n\t\t\tdirectives: {\n\t\t\t\tslot: { default: slot },\n\t\t\t},\n\t\t\tprops: { children },\n\t\t\telement,\n\t\t} ) => {\n\t\t\tconst name = typeof slot === 'string' ? slot : slot.name;\n\t\t\tconst position = slot.position || 'children';\n\n\t\t\tif ( position === 'before' ) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Slot name={ name } />\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif ( position === 'after' ) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t<Slot name={ name } />\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\t\t\tif ( position === 'replace' ) {\n\t\t\t\treturn <Slot name={ name }>{ children }</Slot>;\n\t\t\t}\n\t\t\tif ( position === 'children' ) {\n\t\t\t\telement.props.children = (\n\t\t\t\t\t<Slot name={ name }>{ element.props.children }</Slot>\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t{ priority: 4 }\n\t);\n\n\t// data-wp-fill\n\tdirective(\n\t\t'fill',\n\t\t( {\n\t\t\tdirectives: {\n\t\t\t\tfill: { default: fill },\n\t\t\t},\n\t\t\tprops: { children },\n\t\t\tevaluate,\n\t\t\tcontext,\n\t\t} ) => {\n\t\t\tconst contextValue = useContext( context );\n\t\t\tconst slot = evaluate( fill, { context: contextValue } );\n\t\t\treturn <Fill slot={ slot }>{ children }</Fill>;\n\t\t},\n\t\t{ priority: 4 }\n\t);\n\n\t// data-wp-slot-provider\n\tdirective(\n\t\t'slot-provider',\n\t\t( { props: { children } } ) => (\n\t\t\t<SlotProvider>{ children }</SlotProvider>\n\t\t),\n\t\t{ priority: 4 }\n\t);\n};\n"],"mappings":"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"}