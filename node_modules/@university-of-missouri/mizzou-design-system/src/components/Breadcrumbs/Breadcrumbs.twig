{% macro Breadcrumbs( options ) %}
  {%- spaceless %}

    {# Imports #}
      {% import "@miz/utilities/twig/utils.twig" as utils %}
      {% from "@miz/components/Breadcrumbs/Breadcrumbs.twig" import BreadcrumbItem as breadcrumbItem %}

    {# Parameters #}
      {% set breadcrumbsClass          = "miz-breadcrumbs" %}
      {% set breadcrumbsClass          = options.class ? utils.AppendClasses( breadcrumbsClass, options.class ) : breadcrumbsClass %}
      {% set breadcrumbsAttributes     = options.attributes ? utils.AddAttributes( options.attributes ) : null %}

      {% set breadcrumbsList           = options['list'] ? options['list'] : false %}
      {% set breadcrumbsListClass      = "miz-breadcrumbs__list" %}
      {% set breadcrumbsListClass      = breadcrumbsList.class ? utils.AppendClasses( breadcrumbsListClass, breadcrumbsList.class ) : breadcrumbsListClass %}
      {% set breadcrumbsListAttributes = breadcrumbsList.attributes ? utils.AddAttributes( breadcrumbsList.attributes ) : null %}

{% endspaceless %}

  {# Output #}
    <nav class="{{ breadcrumbsClass }}"{{ breadcrumbsAttributes }} aria-label="breadcrumbs">
      <ol class="{{ breadcrumbsListClass }}"{{ breadcrumbsListAttributes }}>

        {% for item in breadcrumbsList.items if breadcrumbsList.items is iterable %}
          {{ breadcrumbItem( item ) }}
        {% endfor %}

      </ol>
    </nav>

{% endmacro %}

{% macro BreadcrumbItem( options ) %}
  {%- spaceless %}

    {# Imports #}
      {% import "@miz/utilities/twig/utils.twig" as utils %}
      {% from "@miz/components/Breadcrumbs/Breadcrumbs.twig" import BreadcrumbLink as breadcrumbLink %}

    {# Parameters #}
      {% set breadcrumbItemClass      = "miz-breadcrumbs__list-item" %}
      {% set breadcrumbItemClass      = options.class ? utils.AppendClasses( breadcrumbItemClass, options.class ) : breadcrumbItemClass %}
      {% set breadcrumbItemAttributes = options.attributes ? utils.AddAttributes( options.attributes ) : null %}

{% endspaceless %}

  {# Output #}
    {% if options.link %}
      <li class="{{ breadcrumbItemClass }}"{{ breadcrumbItemAttributes }}>{{ breadcrumbLink( options.link ) }}</li>
    {%- else -%}
      <li class="{{ breadcrumbItemClass }}"{{ breadcrumbItemAttributes }} aria-current="page">{{ options.page.text }}</li>
    {% endif %}

{% endmacro %}

{% macro BreadcrumbLink( options ) %}
  {%- spaceless %}

    {# Imports #}
      {% import "@miz/utilities/twig/utils.twig" as utils %}

    {# Parameters #}
      {% set breadcrumbLinkClass      = "miz-breadcrumbs__link" %}
      {% set breadcrumbLinkClass      = options.class ? utils.AppendClasses( breadcrumbLinkClass, options.class ) : breadcrumbLinkClass %}
      {% set breadcrumbLinkAttributes = options.attributes ? utils.AddAttributes( options.attributes ) : null %}

{% endspaceless -%}
  <a href="{{ options.href }}" class="{{ breadcrumbLinkClass }}">{{ options.text }}</a>
{%- endmacro %}
