{#
/**
 * @macro
 * Social Media Icons
 * SVG Social Media Icon component. Outputs an icon of a social media network.
 *
 * @uses   AppendClasses, AddAttributes from @miz/utilities/twig/utils.twig
 *
 *
 * Parameters:
 * @param  array params: Alert parameters
 *    params
 *    ├─ 'class'        => string
 *    ├─ 'attributes'   => array
 *    ├─ 'name'         => string  Name of the social network
 *    ├─ 'color'        => string  Name of the social network
 *    ├─ 'xlink   '     => string
 *    └─ 'link   '      => string
 *       └─ 'href'      => string  URL to link to if the icon is linked
 */
#}
{% macro SocialSVG(params) %}
{%- spaceless %}

  {# Imports #}
    {% from '@miz/utilities/twig/utils.twig' import AppendClasses as appendClasses %}
    {% from '@miz/utilities/twig/utils.twig' import AddAttributes as addAttributes %}

  {# Parameters #}
    {% set social_svg_class = 'miz-icon miz-icon__svg' %}
    {% set social_svg_class = params.class ? appendClasses(social_svg_class, params.class) : social_svg_class %}
    {% set social_svg_attributes = params.attributes ? addAttributes(params.attributes) %}

    {# If a color is defined, add it as a class. Ex: 'black' --> 'miz-svg--black' #}
    {% set social_svg_color = params.color is defined ? params.color : false %}
    {% set social_svg_class = social_svg_color ? appendClasses(social_svg_class, 'miz-svg--' ~ social_svg_color) : social_svg_class %}

    {% set social_svg_xlink = params.xlink is defined ? params.xlink : '/images/icons/svg/sprite.symbol.svg' %}

    {# If a name is present (required), add it as a class. Ex: 'facebook' --> 'miz-svg--facebook' #}
    {% set social_svg_name = params.name is defined ? params.name : false %}
    {% set social_svg_class = social_svg_name ? appendClasses(social_svg_class, 'miz-svg--' ~ social_svg_name) : social_svg_class %}

    {% set social_svg_a11y_title = params['a11y-title'] ?? social_svg_name|capitalize %}

    {% set social_svg_link = params.link is defined and params.link is iterable ? params.link : false %}

{% endspaceless -%}

  {#- Output -#}
    {%- set output -%}
      <svg class="{{ social_svg_class }}" role="img" aria-labelledby="miz-contact-card-social-icon-{{ social_svg_name }}"{{ social_svg_attributes }}>
        <title id="miz-contact-card-social-icon-{{ social_svg_name }}">{{ social_svg_a11y_title }}</title>
        <use xlink:href="{{ social_svg_xlink }}#{{ social_svg_name }}"></use>
      </svg>
    {%- endset %}

    {%- if social_svg_link -%}
      <a href="{{ social_svg_link.href }}" class="miz-link--no-underline">
        {{ output }}
      </a>
    {%- else -%}
      {{ output }}
    {%- endif -%}

{%- endmacro %}
