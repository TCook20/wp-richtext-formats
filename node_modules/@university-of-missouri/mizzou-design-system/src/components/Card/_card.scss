////
/// Cards
/// Classes and utilities for use with the Card component.
///
/// @author <Jason Rollins rollinsj@missouri.edu>
///
////
@mixin miz-card-link-effects($underline: (), $padding: $miz-space-inset-squish-xs, $margins: ('top': 0, 'right': -#{$miz-space-xs}, 'bottom': -#{$miz-space-xs}, 'left': -#{$miz-space-xs})) {

  $_underline: (
    color: $miz-gold,
    thickness: 4px
  );
  $underline: map-merge($_underline, $underline);

  position: relative;
  margin-top: map-get($margins, top);
  margin-right: map-get($margins, right);
  margin-bottom: map-get($margins, bottom);
  margin-left: map-get($margins, left);
  padding: $miz-space-inset-squish-xs;
  text-decoration: none;
  z-index: 1;

  &::after {
    content: '';
    position: absolute;
    z-index: -1;
    bottom: 0;
    left: 0;
    width: 100%;
    height: map-get($underline, 'thickness');
    background-color: $miz-gold;
    transition: height 0.1s ease-in-out;
  }

  &:focus::after {
    background-color: $miz-gold-200;
  }

  &:focus::after,
  &:hover::after {
    height: 100%;
  }
}

/// Base Card style
.miz-card {
  position: relative;
  /* stylelint-disable-next-line */
  display: flex;
  flex-direction: column;
  min-width: 0;
  word-wrap: break-word;
  background-color: $miz-card__background-color;
  background-clip: border-box;
  border: $miz-card__border-width;
  border-style: $miz-card__border-style;
  border-color: $miz-card__border-color;
  border-radius: $miz-card__border-radius;

  > hr {
    margin-right: 0;
    margin-left: 0;
  }
}

/// Card Body
/// Use this class to place content inset into the Card.
.miz-card__body {
  flex: 1 1 auto;
  padding: $miz-card__body-space;

  > * {
    margin-bottom: 0;
  }

  > * + * {
    margin-top: $miz-space-default;
  }
}

/// Card Title
/// Use this class on the main title for the Card
.miz-card__title {
  font-size: $miz-font-size-level-5;
}

.miz-card__title-link {
  @include miz-card-link-effects;
}

/// Card Subtitle
/// Use this as a subtitle or subheading for a Card.
/// Do not use without a Title
.miz-card__subtitle {
  font-size: $miz-font-size-level-2;
  font-weight: $miz-font-weight-bold;
  margin-top: $miz-space-s;
}

/// Card Text
/// Use this as a class on Card body text.
.miz-card__text {
  * + & {
    margin-top: $miz-space-default;
  }
}

/// Card Image
/// Use this on images placed in Cards for the image
/// to fill the Card's space.
.miz-card__image {
  width: 100%;
  border-radius: 0;
}

.miz-card__links {
  /* stylelint-disable-next-line */
  display: flex;
  flex-direction: column;
  align-items: flex-start;

  @include media-breakpoint-up(md) {
    flex-direction: row;
    flex-wrap: wrap;
  }
}

.miz-card__link {
  @include miz-card-link-effects($underline: (thickness: 2px), $margins: ('right': $miz-space-m, 'bottom': 0, 'left': -#{$miz-space-xs}));

  display: inline-block;
  font-weight: $miz-font-weight-bold;
}

.miz-card__links--stack {
  flex-direction: column;
  align-items: flex-start;

  // stylelint-disable-next-line selector-max-class
  > .miz-card__link + .miz-card__link {
    margin-top: $miz-space-s;
  }
}

.miz-card__address {
  margin-bottom: 0;
  line-height: $miz-line-height-base * 1.25;

  > * {
    margin: 0;
  }
}

.miz-card__header {
  padding: $miz-card__space-y $miz-card__space-x;
  margin-bottom: 0;

  > :last-child {
    margin-bottom: 0;
  }
}

.miz-card__footer {
  padding: $miz-card__space-y $miz-card__space-x;

  > :last-child {
    margin-bottom: 0;
  }
}

/// Linked Card
/// Special container class for anchors around cards to make them clickable
.miz-linked-card {
  text-decoration: none;
  height: 100%;
  min-width: 0;

  /// These effects are placed on the underlying card itself
  > .miz-card {
    box-shadow: 0 2px 2px $miz-linked-card__hover-color;

    &:hover {
      color: inherit;
      box-shadow: 0 4px 3px $miz-linked-card__hover-color;
      transition: box-shadow 0.25s;
    }
  }
}

/// Card Group
/// Surround Cards with a container using this class
/// to create a horizontal group of cards (small screens and up)
.miz-card-group {
  @include miz-make-flex-column;

  @include media-breakpoint-up(md) {
    @include miz-make-flex-row;

    > .miz-card {
      margin-bottom: 0;
    }
  }
}

/// Card Deck
/// Group Cards together with gutters
.miz-card-deck {
  @include miz-make-flex-column;

  /* stylelint-disable-next-line */
  > .miz-card,
  > .miz-linked-card {
    margin-bottom: $miz-space-l;
  }

  > .miz-card:last-of-type,
  > .miz-linked-card:last-of-type {
    margin-bottom: 0;
  }

  @include media-breakpoint-up(md) {
    @include miz-make-flex-row($flex-basis: 100%);

    > .miz-card,
    > .miz-linked-card {
      margin-right: $miz-space-l;
      margin-bottom: 0;
    }

    > .miz-card:last-of-type,
    > .miz-linked-card:last-of-type {
      margin-right: 0;
    }
  }
}

///
/// Utilities

/// Card theming
/// Experimental!
/// Document and refine at a later time.
.miz-card--dark {
  background-color: $miz-card__background-color--dark;
  color: $miz-white;

  a {
    color: $miz-white;

    &:hover, &:focus {
      color: $miz-black;
    }
  }

  .miz-card__title {
    color: $miz-gold;
  }
}

/// Card Outline
/// Add a simple border outline to the card.
.miz-card--outline {
  border: $miz-size-xxs solid $miz-black-100;
}

.miz-card--inline {
  @include media-breakpoint-up('xs') {
    flex-direction: row;
  }
}
