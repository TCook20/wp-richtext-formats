@use 'sass:map';
@import 'base/variables';
@import 'mixins/flex';

$miz-theme: (
  'default': (
    'color': (
      'primary': $miz-gold,
      'secondary': $miz-black,
    ),
    'font': (
      'color': $miz-black,
    )
  ),
  'light': (
    'font': (
      'color': $miz-black-600,
    )
  ),
  'dark':  (
    'font': (
      'color': $miz-white,
    )
  ),
);

@mixin make-styled-link(
  $theme: map.get($miz-theme, 'default'),
  $underline: (),
  $padding: $miz-space-inset-squish-xs,
  $margins: ('top': 0, 'right': -#{$miz-space-xs}, 'bottom': -#{$miz-space-xs}, 'left': -#{$miz-space-xs})
) {
  $_underline: (
    color: map.get($theme, 'color', 'primary'),
    thickness: 4px
  );
  $underline: map.merge($_underline, $underline);

  position: relative;
  margin: map.get($margins, top) map.get($margins, right) map.get($margins, bottom) map.get($margins, left);
  padding: $padding;
  text-decoration: none;
  font-weight: $miz-font-weight-bold;
  z-index: 1;
  color: map.get($theme, 'font', 'color');

  &::after {
    content: '';
    position: absolute;
    z-index: -1;
    bottom: 0;
    left: 0;
    width: 100%;
    height: map.get($underline, 'thickness');
    background-color: map.get($underline, 'color');
    transition: height 0.1s ease-in-out;
  }

  &:focus::after {
    background-color: $miz-gold-200;
  }

  &:focus::after,
  &:hover::after {
    height: 100%;
  }
}

@mixin make-flex-list(
  $list-style: none,
  $display: flex,
  $flex-direction: column,
  $align-items: stretch,
  $gap: $miz-line-height-base,
  $responsive-layouts: null
) {
  display: $display;
  flex-direction: $flex-direction;
  list-style: $list-style;
  align-items: $align-items;
  gap: $gap;

  @include miz-make-flex-items;

  @if type-of($responsive-layouts) == 'map' {
    @each $size, $layout in $responsive-layouts {
      @include media-breakpoint-up($size) {
        @each $prop, $val in $layout {
          #{$prop}: $val;
        }
      }
    }
  }
}

// Pagination
.miz-pagination {
  width: fit-content;
}

.miz-pagination__list {
  padding: 0;

  @include make-flex-list($responsive-layouts: ('sm': (flex-direction: row, gap: $miz-space-s)));
}

.miz-pagination__list-item {
  &.is-current {
    padding: $miz-space-inset-squish-default;
    font-weight: $miz-font-weight-bold;
    background-color: $miz-gold-100;
  }
}

.miz-pagination__link {
  display: inline-block;
  width: 100%;

  @include make-styled-link($margins: (top: 0, right: 0, bottom: 0, left: 0), $padding: $miz-space-inset-squish-default);
}
