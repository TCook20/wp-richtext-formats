import React from 'react'
import DrupalAttribute from 'drupal-attribute'
import classNames from 'classnames'

import Button, { ButtonProps } from 'Components/Button/Button'
import Nav from 'Components/Nav/Nav'
// import './_primary.scss'

export const PrimaryNavButton = ({
  attributes = new DrupalAttribute(''),
  children,
  ...args
}: ButtonProps): JSX.Element => {
  const atts: Record<string, unknown> = { className: '', ...args }

  attributes.forEach((value, key) => {
    if (key !== 'class') {
      atts[key] = value
    }
  })

  return (
    <Button
      primary={true}
      attributes={attributes
        .addClass('miz-button--icon miz-primary-navigation__menu-button')
        .setAttribute('id', 'mizPrimaryNavMenuButton')
        .setAttribute('data-miz-expand', 'mizPrimaryNavNav')
        .setAttribute('aria-label', 'Open navigation')}
    >
      {children}
    </Button>
  )
}

export interface PrimaryNavigationProps {
  attributes?: DrupalAttribute
}

const PrimaryNavigation = ({
  attributes = new DrupalAttribute(''),
  ...list
}: PrimaryNavigationProps): JSX.Element => {
  const PrimaryNavigationAttributes: Record<string, unknown> = {
    className: classNames('miz-primary-navigation miz-expand', attributes.get('class')),
  }

  const buttonIconClasses = classNames(
    'miz-icon material-icons miz-icon--button miz-icon miz-icon--md miz-svg--black',
  )

  attributes.forEach((value, key) => {
    if (key !== 'class') {
      PrimaryNavigationAttributes[key] = value
    }
  })

  return (
    <div {...PrimaryNavigationAttributes}>
      <PrimaryNavButton>
        <i className={buttonIconClasses}>menu</i>
      </PrimaryNavButton>
      <Nav list={list} attributes={attributes.addClass('miz-primary-navigation__nav')} />
    </div>
  )
}

export default PrimaryNavigation
