@use 'sass:math';

// Wrapper
//
// Use this to create a wrapping container around the entire page's content
.miz-wrapper {
  @include miz-make-container($max-width: $miz-wrapper-max-width, $padding-x: false);
}

// Container
//
// Use this to make a container with reponsive max-widths
.miz-container {
  @include miz-make-container;
  @include miz-make-container-max-widths;
}

.miz-container--no-padding {
  @include miz-make-container($padding-x: false);
  @include miz-make-container-max-widths;
}

// The Grid
// Still a work in progress but something to start using

.miz-main-grid__main,
.miz-main-grid__article,
.miz-main-grid__sidebar {
  margin-right: auto;
  margin-left: auto;

  @include miz-make-container-max-widths;
}

// stylelint-disable-next-line plugin/no-unsupported-browser-features
@supports (display: grid) {
  .miz-main-grid {
    display: grid;
    /* stylelint-disable */
    grid-template-columns:
      [full-start] (math.div($miz-grid-gutter-width, 2))
      [main-start] repeat(12, 1fr) [main-end] (math.div($miz-grid-gutter-width, 2))
      [full-end];
    grid-auto-flow: column;

    > * {
      grid-column: full;
    }

    @include media-breakpoint-up(sm) {
      grid-template-columns:
        [full-start] minmax(0, 1fr)
        [main-start] repeat(12, 13px) [main-end]
        minmax(0, 1fr) [full-end];
      grid-gap: 0 $miz-grid-gutter-width;
    }

    @include media-breakpoint-up(md) {
      grid-template-columns:
        [full-start] minmax(0, 1fr)
        [main-start] repeat(12, 28px) [main-end]
        minmax(0, 1fr) [full-end];
    }

    @include media-breakpoint-up(lg) {
      grid-template-columns:
        [full-start] minmax(0, 1fr)
        [main-start] repeat(12, 48px) [main-end]
        minmax(0, 1fr) [full-end];
    }

    @include media-breakpoint-up(xl) {
      grid-template-columns:
        [full-start] minmax(0, 1fr)
        [main-start] repeat(12, minmax(65px, 68px)) [main-end]
        minmax(0, 1fr) [full-end];
    }
    /* stylelint-enable */
  }

  .miz-main-grid__main {
    grid-column: main;
    margin-right: 0;
    margin-left: 0;
    width: 100%;
  }

  .miz-main-grid__article {
    grid-column: main;
    margin-right: 0;
    margin-left: 0;
    width: 100%;

    @include media-breakpoint-up(lg) {
      grid-column: main / span 8;
    }
  }

  .miz-main-grid__sidebar {
    grid-column: main;
    margin-right: 0;
    margin-left: 0;
    width: 100%;

    @include media-breakpoint-up(lg) {
      grid-column: 10 / span 4;
    }
  }

  .miz-main-grid__full {
    grid-column: full;
  }

  .miz-main-grid--reverse {
    .miz-main-grid__article {
      @include media-breakpoint-up(lg) {
        grid-column: 6 / span 8;
      }
    }

    .miz-main-grid__sidebar {
      @include media-breakpoint-up(lg) {
        grid-column: main / span 4;
      }
    }
  }
}
