@use 'sass:math';

@mixin miz-clarendon-text-crop($line-height: 1.3, $top-adjustment: 0, $bottom-adjustment: 0) {
  // Configured in Step 1
  $top-crop: 1;
  $bottom-crop: 19;
  $crop-font-size: 48;
  $crop-line-height: 1.1;

  // Apply values to calculate em-based margins that work with any size
  $dynamic-top-crop: math.div(
    max(
      ($top-crop + ($line-height - $crop-line-height) * (math.div($crop-font-size, 2))),
      0
    ),
    $crop-font-size
  );
  $dynamic-bottom-crop: math.div(
    max(
      ($bottom-crop + ($line-height - $crop-line-height) * (math.div($crop-font-size, 2))),
      0
    ),
    $crop-font-size
  );

  // Mixin output
  line-height: $line-height;

  &::before,
  &::after {
    content: '';
    display: block;
    height: 0;
    width: 0;
  }

  &::before {
    margin-bottom: calc(-#{$dynamic-top-crop}em + #{$top-adjustment});
  }

  &::after {
    margin-top: calc(-#{$dynamic-bottom-crop}em + #{$bottom-adjustment});
  }
}
