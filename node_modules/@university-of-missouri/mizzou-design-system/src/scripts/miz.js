/* ==========================================================================
    Calendar Toggle
 ========================================================================== */

var calendarButtonsGroup = document.querySelectorAll('.btn-group')[0]
var calendarButtons = calendarButtonsGroup && calendarButtonsGroup.childNodes
var calendarbutton1 = calendarButtons && calendarButtons[1].id
var calendarbutton2 = calendarButtons && calendarButtons[3].id

var calendarToggleButtonOne = document.getElementById(calendarbutton1)
var calendarToggleButtonTwo = document.getElementById(calendarbutton2)

var calendarCardOne = document.getElementById('calendarCardOne')
var calendarCardTwo = document.getElementById('calendarCardTwo')

calendarToggleButtonOne != null &&
  calendarToggleButtonOne.addEventListener('click', function(e) {
    e.preventDefault()
    $(calendarToggleButtonTwo).removeClass('active-event-calendar')
    $(calendarCardTwo).removeClass('miz-events__group--active')
    $(calendarToggleButtonTwo).addClass('shadow')
    e.target.classList.remove('shadow')

    e.target.classList.add('active-academic-dates')
    $(calendarCardOne).addClass('miz-events__group--active')
  })

calendarToggleButtonTwo != null &&
  calendarToggleButtonTwo.addEventListener('click', function(e) {
    e.preventDefault()
    $(calendarToggleButtonOne).removeClass('active-academic-dates')
    $(calendarCardOne).removeClass('miz-events__group--active')
    $(calendarToggleButtonOne).addClass('shadow')
    e.target.classList.remove('shadow')

    e.target.classList.add('active-event-calendar')
    $(calendarCardTwo).addClass('miz-events__group--active')
  })

/* ==========================================================================
        Navigation
     ========================================================================== */
var menuButton = document.querySelector('.navbar-toggler')
var searchButton = document.querySelector('.miz-button--xs[data-target="#collapseSearchBox"]')
var searchInput = document.querySelector('.input-group')
var navbarContent = document.querySelector('.navbar-collapse')
var navExpand = [].slice.call(document.querySelectorAll('.nav-expand'))
var bottomTwoThirdsNav = document.getElementById('bottom-two-thirds-nav')
// var backLink = `
// <li id="backLi" class="nav-item">
//   <a class="nav-link nav-back-link" href="javascript:;">
//   </a>
// </li>`;

searchButton &&
  searchButton.addEventListener('click', function(e) {
    if (navbarContent.classList.contains('show')) {
      navExpand.forEach(function(item) {
        item.classList.remove('active')
      })
    }
  })

menuButton &&
  menuButton.addEventListener('click', function(e) {
    $('body').addClass('fixedPosition')
    if (navbarContent.classList.contains('show')) {
      $('.nav-expand-content').hide()
      $('body').removeClass('fixedPosition')
      navExpand.forEach(function(item) {
        item.classList.remove('active')
      })
      setTimeout(function() {
        $('.nav-expand-content').show()
      }, 500)
    }
  })

// navExpand &&
//   navExpand.forEach(item => {
//     item.querySelector(".nav-link").addEventListener("click", () => {
//       if (searchInput.classList.contains("show")) {
//         searchInput.classList.remove("show");
//       }
//       item.classList.add("active");
//     });
//
//     item.querySelector('.nav-expand-content').insertAdjacentHTML(
//       'afterbegin',
//       `
//     <li class="nav-item">
//       <a class="nav-link nav-back-link" href="javascript:;">
//           <span>${item.childNodes[1].innerHTML}</span>
//       </a>
//     </li>`
//     )
//
//     item.querySelector(".nav-back-link").addEventListener("click", () => {
//       text = "";
//       item.classList.remove("active");
//     });
//   });

/* ==========================================================================
        Pillar Callout Expand 2.0
     ========================================================================== */

var pillarContainer = document.getElementById('pillar-expand-layer')
var box1Button = document.getElementById('box-1-button')
var box2Button = document.getElementById('box-2-button')
var box3Button = document.getElementById('box-3-button')
var boxOneOverlay = document.getElementById('box-1-overlay')
var boxTwoOverlay = document.getElementById('box-2-overlay')
var boxThreeOverlay = document.getElementById('box-3-overlay')
var closeButton = Array.prototype.slice.call(document.querySelectorAll('.closebtn'))
var nextButton = Array.prototype.slice.call(document.querySelectorAll('.nextbtn'))
var prevButton = Array.prototype.slice.call(document.querySelectorAll('.prevbtn'))

// function handleCommand(e) {
//   let currentOverlay
//   let nextElement
//   let pressed = e.target.parentElement.getAttribute('aria-pressed') === 'true'
//
//   if (e.key === ' ' || e.key === 'Enter' || e.key === 'Spacebar') {
//     e.preventDefault()
//     currentOverlay = e.target.parentElement.parentElement.parentElement.parentElement
//     nextElement = currentOverlay.nextElementSibling
//
//     e.target.setAttribute('aria-pressed', !pressed)
//     currentOverlay.classList.add('hide')
//     nextElement.classList.remove('hide')
//   } else {
//     currentOverlay = e.target.parentElement.parentElement.parentElement.parentElement.parentElement
//     nextElement = currentOverlay.nextElementSibling
//
//     e.target.parentElement.setAttribute('aria-pressed', !pressed)
//     currentOverlay.classList.add('hide')
//     nextElement.classList.remove('hide')
//   }
// }
nextButton &&
  nextButton.forEach(function(button) {
    button.addEventListener('click', function(e) {
      var currentOverlay = e.target.parentElement.parentElement.parentElement.parentElement

      currentOverlay.classList.add('hide')
      currentOverlay.nextElementSibling.classList.remove('hide')
    })
  })

prevButton &&
  prevButton.forEach(function(button) {
    button.addEventListener('click', function(e) {
      var currentOverlay = e.target.parentElement.parentElement.parentElement.parentElement

      currentOverlay.classList.add('hide')
      currentOverlay.previousElementSibling.classList.remove('hide')
    })
  })

box1Button &&
  box1Button.addEventListener('click', function() {
    boxOneOverlay.classList.remove('hide')
    boxTwoOverlay.classList.add('hide')
    boxThreeOverlay.classList.add('hide')
    pillarContainer.classList.add('addOverlay')
  })

box2Button &&
  box2Button.addEventListener('click', function() {
    boxTwoOverlay.classList.remove('hide')
    boxOneOverlay.classList.add('hide')
    boxThreeOverlay.classList.add('hide')
    pillarContainer.classList.add('addOverlay')
  })

box3Button &&
  box3Button.addEventListener('click', function() {
    boxThreeOverlay.classList.remove('hide')
    boxOneOverlay.classList.add('hide')
    boxTwoOverlay.classList.add('hide')
    pillarContainer.classList.add('addOverlay')
  })

closeButton.forEach(function(button) {
  button.addEventListener('click', function() {
    pillarContainer.classList.remove('addOverlay')
  })
})

/* ==========================================================================
        Card with Tabs
     ========================================================================== */

// var tabs = document.querySelectorAll(".tab");
// var allTabContent = document.querySelectorAll(".panel-content");
//
// tabs &&
//   tabs.forEach(tab => {
//     tab.addEventListener("click", setActiveClass);
//   });
//
// function setActiveClass(e) {
//   tabs.forEach(tab => {
//     tab.classList.remove("active");
//     tab.classList.add("grey-border-bottom");
//   });
//
//   allTabContent.forEach(tabContent => {
//     tabContent.classList.add("hide-content");
//     if (tabContent.id === e.currentTarget.dataset.target) {
//       tabContent.classList.remove("hide-content");
//     }
//   });
//
//   e.currentTarget.classList.add("active");
//   e.currentTarget.classList.remove("grey-border-bottom");
// }

/* ==========================================================================
        DRUPAL
     ========================================================================== */
jQuery(document).ready(function($) {
  /* ===============
          Alert Modal
    ================= */
  // initializes and invokes the modal on page load
  $('#alertModal').modal()
})
