{#-
  Form Search
  Base Form Search component

  @uses AddAttributes from utils

  @param  {object}  options
  @param  {object}  ├─ options.form
  @param  {string}  │  ├─ options.form.class
  @param  {object}  │  ├─ options.form.attributes
  @param  {string}  │  └─ options.form.action
  @param  {object}  ├─ options.input
  @param  {string}  │  ├─ options.input.class
  @param  {object}  │  ├─ options.input.attributes
  @param  {string}  │  ├─ options.input.id
  @param  {string}  │  └─ options.input.placeholder
  @param  {object}  ├─ options.button
  @param  {string}  │  ├─ options.class
  @param  {object}  │  └─ options.attributes
  @param  {object}  └─ options.icon
  @param  {string}     ├─ options.class
  @param  {object}     └─ options.attributes

 -#}
{%- spaceless %}
  {# Imports #}
    {% from "@miz/components/button/button.twig" import ButtonWithIcon as buttonWithIcon %}
    {% import "@miz/utilities/twig/utils.twig" as utils %}

  {# Parameters #}
    {% set options = _context ? _context : {} %}

    {% set form_search_class = options.form.class %}
    {% set form_search_class = utils.AppendClasses('miz-input-group', form_search_class) %}
    {% set form_search_action = options.form.action|default('/search/') %}
    {% set form_search_attributes = options.form.attributes %}

    {% set input_class = options.input.class|default('miz-input') %}
    {% set input_id = options.input.id|default('search-input') %}
    {% set input_placeholder = options.input.placeholder|default('Search this site') %}
    {% set input_name = options.input.name|default('q') %}

    {% set button_class = options.button.class|default('miz-button--primary miz-button--small miz-button--square-sm miz-input-group__button') %}
    {% set button_attributes = options.button.attributes %}
    {% set button_type = options.button.type|default('submit') %}

    {% set icon_class = options.icon.class|default('miz-icon--md') %}
    {% set icon_name = options.icon.name|default('search') %}

  {# Variables #}
    {% set label_for = input_id %}
    {% set label_class = 'miz-label--hidden' %}
    {% set label_text = 'Search' %}

    {% set button_options = {
      class: button_class,
      attributes: button_attributes,
      type: button_type
    } %}

    {% set icon_options = {
      class: icon_class,
      name: icon_name
    } %}
{% endspaceless -%}

{#- Output -#}
  <form class="{{ form_search_class }}" action="{{ form_search_action }}" method="get" {{ utils.AddAttributes(form_search_attributes) }}>
    <label for="{{ label_for }}" class="{{ label_class }}">{{ label_text }}</label>
    <input type="text" class="{{ input_class }}" id="{{ input_id }}" placeholder="{{ input_placeholder }}" name="{{ input_name }}" />
    {{- buttonWithIcon(icon_options, button_options) -}}
  </form>
