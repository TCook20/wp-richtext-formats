{#

  List Group

  @uses listGroupItem, listGroupLink

  @todo Needs better support for non ul based lists. Support for divs and links without li elements.

#}
{% macro ListGroup( options ) %}
  {%- spaceless %}

    {# Imports #}
    {% import "@miz/utilities/twig/utils.twig" as utils %}
    {% from "@miz/components/list-group/list-group.twig" import ListGroupItem as listGroupItem %}

    {# Parameters #}
    {% set listGroupClass       = "miz-list-group list-group" %}
    {% set listGroupClass       = options.class ? utils.AppendClasses( listGroupClass, options.class ) : listGroupClass %}
    {% set listGroupAttributes  = options.attributes ? utils.AddAttributes( options.attributes ) %}
    {% set listGroupElement     = "ul" %}
    {% set listGroupElement     = options.element ?: listGroupElement %}
    {% set listGroupFlush       = options.flush ?: false %}
    {% set listGroupList        = options.list ?: null %}

    {# Variables #}
    {% if listGroupFlush %}
      {% set listGroupClass = utils.AppendClasses( listGroupClass, "list-group-flush" ) %}
    {% endif %}

  {% endspaceless -%}

  <{{ listGroupElement }} class="{{ listGroupClass }}"{{ listGroupAttributes }}>
    {% for item in listGroupList.items %}
      {{ listGroupItem( item ) }}
    {% endfor %}
  </{{ listGroupElement }}>

{% endmacro %}

{#
/**
 * @macro
 * Summary List Group Item
 * @author Jason Rollins <rollinsj@missouri.edu>
 *
 * @copyright University of Missouri 2018
 */
#}
{% macro ListGroupItem( options ) %}
  {%- spaceless %}

    {# Imports #}
    {% import "@miz/utilities/twig/utils.twig" as utils %}
    {% from "@miz/components/list-group/list-group.twig" import ListGroupLink as listGroupLink %}

    {# Parameters #}
    {% set listGroupItemClass       = "miz-list-group__item list-group-item" %}
    {% set listGroupItemClass       = options.class ? utils.AppendClasses( listGroupItemClass, options.class ) : listGroupItemClass %}
    {% set listGroupItemAttributes  = options.attributes ? utils.AddAttributes( options.attributes ) %}
    {% set listGroupItemContents    = options.contents ?: false %}
    {% set listGroupItemLink        = options.link ?: false %}

    {% if listGroupItemContents %}
      {% set listGroupItemContent = listGroupItemContents %}
    {% elseif listGroupItemLink %}
      {% set listGroupItemContent = listGroupLink( listGroupItemLink ) %}
    {% endif %}

  {% endspaceless -%}

  <li class="{{ listGroupItemClass }}"{{ listGroupItemAttributes }}>{{ listGroupItemContent }}</li>

{%- endmacro %}

{#
 #}
{% macro ListGroupLink( options ) %}
  {%- spaceless %}

    {# Imports #}
    {% import "@miz/utilities/twig/utils.twig" as utils %}

    {# Parameters #}
    {% set listGroupLinkClass       = "miz-list-group__item-link" %}
    {% set listGroupLinkClass       = options.class ? utils.AppendClasses( listGroupLinkClass, options.class ) : listGroupLinkClass %}
    {% set listGroupLinkAttributes  = options.attributes ? utils.AddAttributes( options.attributes ) %}
    {% set listGroupLinkHref        = options.href ?: "#" %}
    {% set listGroupLinkText        = options.text ?: "No text" %}

  {% endspaceless -%}

  {# Output #}
  <a href="{{ listGroupLinkHref }}" class="{{ listGroupLinkClass }}"{{ listGroupLinkAttributes }}>{{ listGroupLinkText }}</a>

{% endmacro %}
