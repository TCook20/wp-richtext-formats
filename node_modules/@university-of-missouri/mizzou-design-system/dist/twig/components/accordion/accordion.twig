{% macro Accordion(button_options, content_options, options) %}
  {% from "@miz/utilities/twig/utils.twig" import AppendClasses as appendClasses %}
  {% from "@miz/components/accordion/accordion.twig" import AccordionButton as accordionButton %}
  {% from "@miz/components/accordion/accordion.twig" import AccordionContent as accordionContent %}

  {% set accordion_class = 'miz-accordion miz-accordion--brand miz-expand' %}
  {% set accordion_class = appendClasses(accordion_class, options.class) %}

  {# Output #}
  <section class="{{ accordion_class }}">
    {{ accordionButton(button_options) }}
    {{ accordionContent(content_options) }}
  </section>
{% endmacro %}

{% macro AccordionButton(options) %}
  {% from "@miz/utilities/twig/utils.twig" import AppendClasses as appendClasses %}
  {% from "@miz/components/button/button.twig" import Button as button %}

  {% set accordion_button_class = 'miz-accordion__button' %}
  {% set accordion_button_class = appendClasses(accordion_button_class, options.class) %}
  {% set accordion_button_text = options.text|default('Accordion button') %}
  {% set accordion_button_attributes = options.attributes %}

  {% set button_options = {
    class: accordion_button_class,
    attributes: accordion_button_attributes,
    text: accordion_button_text
  } %}

  {# Output #}
  {{ button(button_options) }}
{% endmacro %}

{% macro AccordionContent(options) %}
  {% from "@miz/utilities/twig/utils.twig" import AppendClasses as appendClasses %}
  {% from "@miz/utilities/twig/utils.twig" import AddAttributes as addAttributes %}

  {% set accordion_content_class = 'miz-accordion__content' %}
  {% set accordion_content_class = appendClasses(accordion_content_class, options.class) %}
  {% set accordion_content_attributes = options.attributes ? addAttributes(options.attributes) : null %}
  {% set accordion_content = options.content|default('No content') %}

  {# Output #}
  <div class="{{ accordion_content_class }}" {{ accordion_content_attributes }}>
    {{ accordion_content }}
  </div>
{% endmacro %}
