"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = require("./utils");
var toggle_1 = require("./toggle");
// CSS for expands
var expandCSS = {
    container: 'miz-expand',
    show_content: 'expand',
};
// Button data attribute
var expandButtonAttribute = 'data-miz-expand';
exports.default = (function () {
    // Locate all the expand containers in the document and store in a collection
    var expandCollection = document.getElementsByClassName(expandCSS.container);
    var _loop_1 = function (i) {
        var expand = expandCollection[i];
        var toggleController = expand.querySelector("[".concat(expandButtonAttribute, "]"));
        if (toggleController !== null) {
            var toggleContent_1 = document.getElementById(toggleController.dataset.mizExpand);
            var hideThis_1 = function () { return (0, toggle_1.hide)(toggleController, toggleContent_1, expandCSS.show_content); };
            expand.addEventListener('click', function (e) {
                if (toggleController.contains(e.target)) {
                    if (toggleContent_1.classList.contains('expand')) {
                        hideThis_1();
                    }
                    else {
                        (0, toggle_1.show)(toggleController, toggleContent_1, expandCSS.show_content);
                        (0, utils_1.detect)(expand, toggleController, hideThis_1);
                    }
                }
            });
        }
    };
    for (var i = 0; i < expandCollection.length; i += 1) {
        _loop_1(i);
    }
});
