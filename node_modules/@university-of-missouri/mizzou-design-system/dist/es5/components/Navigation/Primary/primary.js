"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = require("../../../scripts/utils");
var toggle_1 = require("../../../scripts/toggle");
// CSS for dropdowns
var primaryNavigationCSS = {
    nav_item_with_sub_list: 'miz-primary-navigation__nav-item-w-sub',
    show_content: 'show',
};
// Button data attribute
var dropdownButtonAttribute = 'data-miz-toggle-controls';
exports.default = (function () {
    // Locate all the dropdown containers in the document and store in a collection
    var primaryNavigationCollection = document.getElementsByClassName(primaryNavigationCSS.nav_item_with_sub_list);
    var _loop_1 = function (i) {
        var dropdown = primaryNavigationCollection[i];
        var dropdownController = dropdown.querySelector("[".concat(dropdownButtonAttribute, "]"));
        if (dropdownController !== null) {
            var dropdownContent_1 = document.getElementById(dropdownController.dataset.mizToggleControls);
            var hideThis_1 = function () {
                return (0, toggle_1.hide)(dropdownController, dropdownContent_1, primaryNavigationCSS.show_content);
            };
            dropdown.addEventListener('click', function (e) {
                if (dropdownController.contains(e.target)) {
                    if (dropdownContent_1.classList.contains(primaryNavigationCSS.show_content)) {
                        hideThis_1();
                    }
                    else {
                        var containerWidth = dropdown.offsetWidth;
                        dropdownContent_1.style.width = "".concat(containerWidth, "px");
                        (0, toggle_1.show)(dropdownController, dropdownContent_1, primaryNavigationCSS.show_content);
                        (0, utils_1.detect)(dropdown, dropdownController, hideThis_1);
                    }
                }
            });
        }
    };
    for (var i = 0; i < primaryNavigationCollection.length; i += 1) {
        _loop_1(i);
    }
});
